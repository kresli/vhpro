var dr=Object.defineProperty,ur=Object.defineProperties;var fr=Object.getOwnPropertyDescriptors;var xt=Object.getOwnPropertySymbols;var pr=Object.prototype.hasOwnProperty,vr=Object.prototype.propertyIsEnumerable;var Je=(t,r,a)=>r in t?dr(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,M=(t,r)=>{for(var a in r||(r={}))pr.call(r,a)&&Je(t,a,r[a]);if(xt)for(var a of xt(r))vr.call(r,a)&&Je(t,a,r[a]);return t},F=(t,r)=>ur(t,fr(r));var ze=(t,r,a)=>(Je(t,typeof r!="symbol"?r+"":r,a),a);import{j as g,a as o,S as ve,c as O,r as p,F as Re,D as wt,L as yt,N as hr,b as Ae,q as mr,o as gr,u as De,d as xr,C as wr,B as yr,U as br,e as Er,f as k,g as bt,O as _r,h as Nr,i as Et,k as Or,l as Tr,m as _t,n as te,p as Sr,s as Cr,P as Ir,R as Rr,t as Ar,v as Dr,w as kr,Q as Mr,x as Pr,y as Lr,z as jr}from"./vendor.0894178c.js";const Ur=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}};Ur();const ke=({navigation:t,children:r,title:a,breadcrumbs:n,sections:s})=>g("div",{className:"bg-secondary-600/10 w-screen h-screen flex  overflow-hidden flex-col",children:[t&&o(Jr,{breadcrumbs:n,title:a,sections:s}),o("div",{className:"flex flex-col w-full h-full overflow-hidden",children:o("div",{className:"flex overflow-hidden flex-1 flex-col",children:r})})]}),Nt=({field:t})=>{const{setValue:r,value:a,config:n}=t,{label:s,type:i,placeholder:l}=n;return g("div",{className:"flex flex-col flex-1 w-full",children:[s&&o("span",{className:"block text-sm font-medium text-gray-700",children:s}),g("div",{className:"relative rounded-md shadow-sm",children:[o("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o(ve,{className:"text-gray-500 w-5"})}),o("input",{type:i,value:a,onChange:({currentTarget:c})=>r(c.value),placeholder:l,className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12  border-gray-300 rounded-md"})]})]})},he=({label:t,onClick:r,disabled:a=!1,loading:n=!1,intent:s="none",children:i})=>g("button",{disabled:a,onClick:r,className:O("disabled:bg-secondary-300 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 inline-flex items-center px-4 py-2 border","border-transparent rounded-md shadow-sm text-sm","h-full","font-medium","focus:outline-none focus:ring-2 focus:ring-offset-2","text-white",{"text-white bg-primary-600 hover:bg-primary-700":s==="primary","bg-white border border-gray-300 shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-100":s==="none"}),children:[n&&o("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:o("div",{className:"border-2 border-transparent  border-t-white rounded-full w-4 h-4 animate-spin"})}),t||i]}),Vr=({className:t})=>g("svg",{width:"39",height:"31",viewBox:"0 0 39 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[o("path",{d:"M13.139 17.8109L9.41569 9.84675C8.8792 8.69921 9.19767 7.3446 10.1937 6.53764L17.4618 0.648871C18.5296 -0.21629 20.0807 -0.216291 21.1485 0.648871L28.4166 6.53764C29.4126 7.3446 29.7311 8.69921 29.1946 9.84675L25.4712 17.8109C25.004 18.8103 23.9791 19.4519 22.8499 19.4519H15.7603C14.6312 19.4519 13.6063 18.8103 13.139 17.8109Z",fill:"#29bdae"}),o("path",{d:"M3.96056 28.6602L0.419433 21.0948C-0.118041 19.9465 0.200836 18.5906 1.19816 17.7835L8.10503 12.1941C9.17239 11.3303 10.7218 11.3303 11.7891 12.1941L18.696 17.7835C19.6933 18.5906 20.0122 19.9465 19.4747 21.0948L15.9336 28.6602C15.4661 29.659 14.4415 30.3001 13.3128 30.3001H6.58134C5.45266 30.3001 4.42807 29.659 3.96056 28.6602Z",fill:"#29bdae"}),o("path",{d:"M22.698 29.2987L19.1065 21.1107C18.5885 19.93 18.9629 18.558 20.0148 17.7822L26.9229 12.6869C27.9518 11.928 29.3746 11.928 30.4035 12.6869L37.3116 17.7822C38.3635 18.558 38.7378 19.93 38.2199 21.1107L34.6284 29.2987C34.1758 30.3305 33.1335 31 31.9798 31H25.3466C24.1929 31 23.1506 30.3305 22.698 29.2987Z",fill:"#29bdae"})]}),Ot=({isLastItem:t,isFirstItem:r,width:a,header:n,onResizeStart:s})=>{const{label:i,stickyColumn:l}=n;return g("div",{className:O("flex","relative","border-b border-gray-200",{"sticky left-0 z-30 bg-gray-50":l&&r,"flex-1":t}),style:{width:t?void 0:a,boxShadow:"inset 0 -2px 0 rgb(229 231 235)"},children:[o("div",{className:O("w-full","whitespace-nowrap","shrink-0","text-ellipsis","overflow-hidden","px-6 py-3 text-left text-xs font-medium","text-gray-500 uppercase tracking-wider","bg-gray-50"),children:i}),!t&&o(wt,{onMouseDown:s,className:O("w-4 absolute top-0","-right-2 h-full text-gray-300 cursor-col-resize","z-20")})]})},Wr=({headers:t,columnsWidth:r,onColumnsWidthChange:a,RowAction:n})=>{const s=p.exports.useRef(r);s.current=r;const i=p.exports.useCallback(l=>{const c=f=>{f.stopImmediatePropagation(),f.preventDefault();const u=[...s.current];u[l]+=f.movementX,a(u)},d=()=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",d)};window.addEventListener("mouseup",d),window.addEventListener("mousemove",c)},[a]);return o("div",{className:"bg-gray-50 sticky top-0 z-10",children:g("div",{className:"flex flex-row",children:[t.map((l,c)=>o(Ot,{header:l,isLastItem:!n&&c===t.length-1,isFirstItem:c===0,width:r[c],onResizeStart:()=>i(c)},l.label)),n&&o(Ot,{header:{label:"",RowCell:()=>o(Re,{})},isLastItem:!0,isFirstItem:!1,onResizeStart:()=>{}})]})})},$r=({row:t,width:r,stickyColumn:a,RowCell:n,isEvenRow:s})=>o("div",{style:{width:r,minWidth:r,maxWidth:r,boxShadow:a?"inset -1px 0 0 rgb(229 231 235)":void 0},className:O("p-0","shrink-0","overflow-hidden","flex","flex-1","group-hover:bg-gray-100",{"sticky left-0 z20 bg-white":a,"bg-gray-50":s}),children:o(n,M({},t))}),Br=({row:t,selectedRowId:r,onRowClick:a,headers:n,columnsWidth:s,RowAction:i,rowId:l,isEvenRow:c})=>{const d=r===l;return g("div",{className:O("flex","group","cursor-pointer","hover:bg-black/5","text-gray-700",{"hover:bg-slate-300":d,"bg-slate-300":d,"text-gray-800":d}),onClick:()=>a==null?void 0:a(t),children:[n.map((f,u)=>{const{RowCell:x,stickyColumn:m}=f,y=!i&&u===n.length-1?void 0:s[u];return o($r,{width:y,stickyColumn:m,RowCell:x,row:t,isEvenRow:c},f.label)}),i&&o("div",{className:"group-hover:sticky right-0 z20 flex flex-1",children:o(i,M({},t))})]},l)},Tt=({headers:t,data:r,getRowId:a,selectedRowId:n,onRowClick:s,showHeader:i=!0,RowAction:l})=>{const[c,d]=p.exports.useState(()=>t.map(({defaultWidth:f})=>f!=null?f:200));return o("div",{className:"flex flex-col flex-1 overflow-hidden",children:o("div",{className:"shadow border-b border-gray-200 overflow-scroll flex flex-1",children:g("div",{className:"h-fit relative border-b border-black/10 flex-1",children:[i&&o(Wr,{columnsWidth:c,headers:t,onColumnsWidthChange:d,RowAction:l}),o("div",{className:"divide-y divide-black/10 w-auto",children:r.map((f,u)=>{const x=a(f);return o(Br,{rowId:x,row:f,selectedRowId:n,headers:t,columnsWidth:c,RowAction:l,onRowClick:s,isEvenRow:u%2==0},x)})})]})})})};function Fr(t){return p.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),p.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"}))}function Hr(t){return p.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),p.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}function qr(t){return p.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},t),p.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"}))}function Jr({breadcrumbs:t,title:r,sections:a}){return g("div",{className:O("h-44 flex-shrink-0 bg-gradient-to-r","to-gray-800 from-secondary-900 flex flex-row"),children:[g("div",{className:"flex flex-col p-4 justify-center items-center",children:[o(Vr,{className:"w-14 h-14 flex-shrink-0"}),o("span",{className:"text-primary-400 text-xl inline-flex",children:"VHPRO"})]}),g("div",{className:"flex flex-1 flex-col justify-center items-center",children:[o("div",{className:"flex whitespace-nowrap space-x-8 flex-1",children:t==null?void 0:t.map(({href:n,label:s,Icon:i})=>g(yt,{to:n,className:O("text-gray-400 flex flex-1 items-end","hover:text-white"),children:[o(i,{className:"w-6 mr-2"})," ",s]},s))}),o("div",{className:O("justify-center items-center flex flex-1 text-4xl","text-gray-300 whitespace-nowrap p-2"),children:r}),o("div",{className:"flex justify-center text-secondary-200/50 h-11",children:a==null?void 0:a.map(({label:n,link:s,Icon:i})=>g(hr,{to:s,activeClassName:"text-primary-500 font-normal border-primary-500",className:O("hover:text-gray-300","px-5","border-transparent","border-b-4","flex-inline","whitespace-nowrap","py-2","flex"),children:[i&&o(i,{className:"w-6 mr-2"}),o("span",{children:n})]},n))})]}),g("div",{className:"flex flex-row items-start p-4",children:[g("button",{type:"button",className:"bg-gray-800 rounded-full text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[o("span",{className:"sr-only",children:"View notifications"}),o(Fr,{className:"h-6 w-6","aria-hidden":"true"})]}),o(qr,{className:"w-6 h-6 text-gray-400 ml-3"})]})]})}var Ge;(function(t){t.ADMIN="admin",t.VIEW_USER="view_user",t.EDIT_USER="edit_user",t.DELETE_USER="delete_user",t.VIEW_ROLES="view_roles",t.VIEW_ORGANISATIONS="view_organisations",t.VIEW_ORGANISATION="view_organisation",t.EDIT_ORGANISATION="edit_organisation",t.DELETE_ORGANISATION="delete_organisation",t.CREATE_ORGANISATION="create_organisation",t.EDIT_USER_ROLES="edit_user_roles",t.VIEW_ADMIN_ACTIONS="view_admin_actions",t.RESET_USER_PASSWORD="reset_user_password",t.CREATE_PROJECT="create_project",t.VIEW_PROJECTS="view_projects",t.VIEW_PROJECT="view_project",t.EDIT_PROJECT="edit_project",t.DELETE_PROJECT="delete_project",t.VIEW_ORGANISATION_USERS="view_organisation_users",t.CREATE_ORGANISATION_USERS="create_organisation_users",t.DELETE_ORGANISATION_USERS="delete_organisation_users",t.VIEW_PROJECT_USERS="view_project_users",t.INVITE_PROJECT_USERS="invite_project_users",t.VIEW_USER_DASHBOARD="view_user_dashboard",t.VIEW_USER_DASHBOARD_REPORTS="view_user_dashboard_reports",t.EDIT_PROJECT_USER="edit_project_user",t.VIEW_PROJECT_USER="view_project_user",t.DELETE_PROJECT_USER="delete_project_user",t.CREATE_QUESTIONNAIRE_SCHEDULE="create_questionnaire_schedule",t.VIEW_QUESTIONNAIRE_SCHEDULES="view_questionnaire_schedules",t.DELETE_QUESTIONNAIRE_SCHEDULE="delete_questionnaire_schedule",t.VIEW_QUESTIONNAIRE_SCHEDULE="view_questionnaire_schedule",t.EDIT_QUESTIONNAIRE_SCHEDULE="edit_questionnaire_schedule",t.VIEW_PROJECT_STAFF_MEMBER="view_project_staff_member",t.VIEW_PROJECT_STAFF_MEMBERS="view_project_staff_members",t.CREATE_PROJECT_STAFF_MEMBER="create_project_staff_member",t.EDIT_PROJECT_STAFF_MEMBER="edit_project_staff_member",t.DELETE_PROJECT_STAFF_MEMBER="delete_project_staff_member",t.EDIT_PROJECT_QUESTIONNAIRE_SETTINGS="edit_project_questionnaire_settings",t.EDIT_QUESTIONNAIRE_SETTINGS_OUTCOMES_MEASURES="edit_questionnaire_settings_outcomes_measures",t.VIEW_QUESTIONNAIRE_SETTINGS_OUTCOMES_MEASURES="view_questionnaire_settings_outcomes_measures",t.VIEW_PROJECT_USERS_ANONYMISED="view_project_users_anonymised",t.EDIT_PROJECT_USERS="edit_project_users",t.DELETE_PROJECT_USERS="delete_project_users",t.WITHDRAW_CONSENT_PROJECT_USERS="withdraw_consent_project_users",t.VIEW_PROJECT_OVERVIEW="view_project_overview",t.VIEW_PROJECT_DASHBOARD_FILTERS="view_project_dashboard_filters",t.VIEW_USER_DASHBOARD_FILTERS="view_user_dashboard_filters",t.VIEW_USER_DASHBOARD_WEIGHT="view_user_dashboard_weight",t.VIEW_USER_DASHBOARD_CALENDAR="view_user_dashboard_calendar",t.VIEW_USER_DASHBOARD_TEMPERATURE="view_user_dashboard_temperature",t.VIEW_USER_QUESTIONNAIRE_EVENT_RESULTS="view_user_questionnaire_event_results",t.VIEW_USER_SYMPTOM_LOGS="view_user_symptom_logs",t.VIEW_USER_SYMPTOM_RED_FLAGS="view_user_symptom_red_flags",t.VIEW_USER_SYMPTOM_VALIDATION="view_user_symptom_validation",t.VIEW_USER_SYMPTOM_TRENDS="view_user_symptom_trends",t.VIEW_USER_MED_ADHERENCE="view_user_med_adherence",t.VIEW_USER_ACTIVITIES="view_user_activities",t.DATA_EXPORT_IDENTIFIABLE="data_export_identifiable",t.DATA_EXPORT_ANONYMISED="data_export_anonymised",t.VIEW_USER_LISTING_ANONYMISED="view_user_listing_anonymised",t.VIEW_PROJECT_DATA_MED_ADHERENCE="view_project_data_med_adherence",t.VIEW_PROJECT_DATA_QUESTIONNAIRE_BREAKDOWN="view_project_data_questionnaire_breakdown",t.VIEW_PROJECT_DATA_QUESTIONNAIRE_LONGITUDINAL="view_project_data_questionnaire_longitudinal",t.VIEW_PROJECT_DATA_TEMPERATURE="view_project_data_temperature",t.VIEW_PROJECT_DATA_SYMPTOM_LOGS="view_project_data_symptom_logs",t.VIEW_PROJECT_DATA_WEIGHT_TRENDS="view_project_data_weight_trends",t.VIEW_PROJECT_DATA_ACTIVITY_TRENDS="view_project_data_activity_trends",t.VALIDATE_USER_LOG="validate_user_log",t.VIEW_PROJECT_USERS_SYMPTOM_COUNTS="view_project_users_symptom_counts",t.VIEW_PROJECT_ARTICLES="view_project_articles",t.EDIT_DISABLE_MEDS_APPOINTMENT_NOTES="edit_disable_meds_appointment_notes",t.VIEW_DISABLE_MEDS_APPOINTMENT_NOTES="view_disable_meds_appointment_notes",t.VIEW_PROJECT_CONSENT_MESSAGE="view_project_consent_message",t.EDIT_PROJECT_CONSENT_MESSAGE="edit_project_consent_message",t.VIEW_PATIENT_PARTICIPATION_DURATION="view_patient_participation_duration",t.EDIT_PATIENT_PARTICIPATION_DURATION="edit_patient_participation_duration",t.VIEW_QUESTIONNAIRE_TYPES="view_questionnaire_types",t.UPLOAD_PROJECT_IMAGE="upload_project_image"})(Ge||(Ge={}));const{fromEntries:Qe,entries:Ye}=Object;function zr(t){const r=p.exports.useMemo(()=>Qe(Ye(t).map(([l,{defaultValue:c}])=>[l,c])),[t]),[a,n]=p.exports.useState({}),s=p.exports.useMemo(()=>Qe(Ye(r).map(([l,c])=>[l,a[l]||c])),[r,a]),i=p.exports.useMemo(()=>Qe(Ye(t).map(([l,c])=>[l,{value:s[l],setValue:d=>n(F(M({},s),{[l]:d})),config:c}])),[t,s]);return{values:s,fields:i}}const St=t=>{const r=p.exports.useRef(!0);return p.exports.useEffect(()=>(r.current=!0,t==null||t(),()=>{r.current=!1}),[]),r},Xe="token",Ke="refresh_token";function Ct(){return{accessToken:localStorage.getItem(Xe),refreshToken:localStorage.getItem(Ke)}}function Gr(){const[t,r]=p.exports.useState(()=>Ct()),{accessToken:a,refreshToken:n}=t,s=p.exports.useCallback(i=>{const{accessToken:l,refreshToken:c}=i;l?localStorage.setItem(Xe,l):localStorage.removeItem(Xe),c?localStorage.setItem(Ke,c):localStorage.removeItem(Ke)},[]);return p.exports.useEffect(()=>{const i=()=>{const l=Ct();l.accessToken===a&&l.refreshToken===n||r(l)};return window.addEventListener("storage",i),()=>window.removeEventListener("storage",i)},[a,n]),{tokens:t,updateTokens:s}}function Qr({api:t}){const[r,a]=p.exports.useState(),n=p.exports.useCallback(async()=>{const{data:d}=await t.getUser();d&&a(d)},[t]);St(()=>{n()});const s=p.exports.useCallback(async d=>{const{data:f}=await t.login(d),{user:u}=f;a(u)},[t]),i=p.exports.useCallback(async()=>{},[]),l=p.exports.useMemo(()=>!!r,[r]),c=p.exports.useMemo(()=>(r==null?void 0:r.permissions.includes(Ge.ADMIN))||!1,[r==null?void 0:r.permissions]);return{signIn:s,signOut:i,user:r,isSigned:l,isAdmin:c}}const It=p.exports.createContext(null),Rt=()=>p.exports.useContext(It),At=t=>F(M({},t),{dateCreated:new Date(t.dateCreated),dateUpdated:new Date(t.dateUpdated),diagnosisDate:new Date(t.diagnosisDate),dob:new Date(t.dob)}),Ze=t=>F(M({},t),{dateCreated:new Date(t.dateCreated),dateUpdated:new Date(t.dateUpdated)}),Dt=t=>F(M({},t),{dateCreated:new Date(t.dateCreated),dateUpdated:new Date(t.dateUpdated),startDate:new Date(t.startDate),endDate:t.endDate?new Date(t.endDate):null,organisation:Ze(t.organisation)}),kt=t=>F(M({},t),{dateConsentGiven:new Date(t.dateConsentGiven),dateConsentRevoked:new Date(t.dateConsentRevoked),dateCreated:new Date(t.dateCreated),dateUpdated:new Date(t.dateUpdated),dob:t.dob?new Date(t.dob):null,questionnairesEarliestDate:new Date(t.questionnairesEarliestDate),questionnairesLatestDate:new Date(t.questionnairesLatestDate),reportsEarliestDate:new Date(t.reportsEarliestDate),reportsLatestDate:new Date(t.reportsLatestDate)}),Yr=t=>{const r=t.headers||new Headers({Accept:"application/json"});return!r.has("Content-Type")&&!(t&&(!t.method||t.method==="GET"))&&!(t&&t.body&&t.body instanceof FormData)&&r.set("Content-Type","application/json"),t.user&&t.user.authenticated&&t.user.token&&r.set("Authorization",t.user.token),r},Xr=(t,r={})=>{const a=Yr(r);return fetch(t,F(M({},r),{headers:a})).then(n=>n.text().then(s=>({status:n.status,statusText:n.statusText,headers:n.headers,body:s}))).then(({status:n,statusText:s,headers:i,body:l})=>{let c;try{c=JSON.parse(l)}catch{}return(n<200||n>=300)&&console.error(e),Promise.resolve({status:n,headers:i,body:l,json:c})})};function Kr(t,r={},a){return r.headers||(r.headers=new Headers({Accept:"application/json"})),r.headers.set("Authorization",`Bearer ${a}`),Xr(t,r)}class Me{constructor(r,a){ze(this,"fetch");ze(this,"tokens",null);this.apiEndpoint=r,this.onTokensUpdate=a,this.fetch=Me.createAxios(r,null)}setTokens(r){this.tokens=r,this.fetch=Me.createAxios(this.apiEndpoint,r.accessToken),this.onTokensUpdate(this.tokens)}static createAxios(r,a){return Ae.create({baseURL:r,withCredentials:!0,headers:M({"Access-Control-Allow-Origin":"*","Content-Type":"application/json","Referrer-Policy":"origin"},a?{Authorization:`Bearer ${a}`}:{})})}async login(r){const a=await Ae.post(`${this.apiEndpoint}/auth/login`,r);return this.tokens={accessToken:a.data.accessToken,refreshToken:a.data.refreshToken},this.setTokens(this.tokens),{payload:a,data:F(M({},a.data),{user:At(a.data.user)})}}async getUser(){var a;const r=await Ae.get(`${this.apiEndpoint}/current`,{headers:{Authorization:`Bearer ${(a=this.tokens)==null?void 0:a.accessToken}`}});return{payload:r,data:At(r.data)}}async getOrganisations({page:r=1,perPage:a=25,term:n=""}){const s="/admin/organisations",i=await this.fetch.get(s,{params:{_page:r,_perPage:a,term:n}}),l=i.data.map(Ze),c=parseInt(i.headers["x-total-count"]);return{organisations:l,totalCount:c}}async getOrganisation(r){const a=await this.fetch.get(`admin/organisations/${r}`);return{payload:a,data:Ze(a.data)}}async getPrograms({page:r=1,perPage:a=25,term:n="",organisationId:s}){const i=await this.fetch.get("admin/projects",{params:{_page:r,_perPage:a,organisationId:s,term:n}}),l=parseInt(i.headers["x-total-count"]),c=i.data.map(Dt);return{totalCount:l,programs:c}}async getProgram(r){const a=await this.fetch.get(`admin/projects/${r}`);return{payload:a,data:Dt(a.data)}}async refetchAccessToken(){var a,n;const r=await Ae.post(`${this.apiEndpoint}/auth/refresh`,{},{headers:{Authorization:`Bearer ${(a=this.tokens)==null?void 0:a.refreshToken}`}});return this.setTokens({accessToken:r.data.accessToken,refreshToken:((n=this.tokens)==null?void 0:n.refreshToken)||null}),{payload:r}}async getPatients({page:r=1,perPage:a=25,term:n="",consentedOnly:s=!1,programId:i}){const l=await this.fetch.get(`/admin/projects/${i}/users`,{params:{_page:r,_perPage:a,term:n,consentedOnly:s}});return{totalCount:parseInt(l.headers["x-total-count"]),patients:l.data.map(kt)}}async getPatient({participantId:r,programId:a}){const n=await this.fetch.get(`admin/projects/${a}/users/${r}`);return{payload:n,data:kt(n.data)}}async getMedications({programId:r,startDate:a,endDate:n}){var i;const s=mr.stringify({startDate:a.toISOString(),endDate:n.toISOString()});return Kr(`https://staging.api.vinehealth.ai/api/v1/pro-dashboard/projects/${r}/reports/medication?${s}`,{method:"GET",headers:new Headers({Accept:"application/json"})},(i=this.tokens)==null?void 0:i.accessToken)}}const Zr=1e3*60,ea=t=>{const{tokens:r,updateTokens:a}=Gr(),n=p.exports.useMemo(()=>new Me(t.apiEndpoint,a),[t.apiEndpoint,a]);p.exports.useEffect(()=>{n.setTokens(r);const{accessToken:i}=r;if(!i)return;const{exp:l}=gr(i),c=l*1e3-Zr,d=new Date().getTime();if(c<d){n.refetchAccessToken();return}const f=setTimeout(()=>n.refetchAccessToken(),c-d);return()=>clearTimeout(f)},[n,r]);const s=!!r.accessToken;return{api:n,hasToken:s}},Mt=p.exports.createContext(null),G=()=>p.exports.useContext(Mt).api,ta=({page:t,rowsPerPage:r,totalCount:a,setPage:n,setRowsPerPage:s})=>{const i=p.exports.useCallback(l=>{n(1),s(l)},[n,s]);return o(me.Footer,{children:g("div",{className:"flex flex-col px-4 py-2 bg-gray-50",children:[g("span",{className:"text-sm text-gray-700 flex-shrink-0 mb-2",children:["Showing"," ",o("span",{className:"font-medium",children:(t-1)*r+1})," to"," ",o("span",{className:"font-medium",children:Math.min(t*r,a)})," ","of ",o("span",{className:"font-medium",children:a})," results"]}),g("div",{className:"flex flex-row justify-items-stretch",children:[o(rr,{items:[{id:"5",label:"5 rows",value:5},{id:"10",label:"10 rows",value:10},{id:"25",label:"25 rows",value:25},{id:"50",label:"50 rows",value:50},{id:"100",label:"100 rows",value:100}],selected:`${r}`,onChange:({value:l})=>i(l)}),o("div",{className:"flex flex-1 justify-end",children:o(Pt,{showActivePageOnly:!0,pagesCount:Math.ceil(a/r),currentPage:t,onPageChange:n})})]})]})})},ne=({programId:t,program:r,children:a,selectedParticipantId:n})=>{const s=`/programs/${t}`,i=De(),[l,c]=p.exports.useState(""),d=p.exports.useMemo(()=>[{label:"Patient enrolment",link:`${s}/enrolment`,Icon:xr},{label:"Reports",link:`${s}/reports`,Icon:wr},{label:"Questionnaires",link:`${s}/questionnaires`,Icon:yr},{label:"Team",link:`${s}/team`,Icon:br},{label:"Settings",link:`${s}/settings`,Icon:Er}],[s]),f=G(),[u,x]=p.exports.useState(1),[m,w]=p.exports.useState(25),{data:y}=k([t,"patients",u,m,l],()=>f.getPatients({programId:t,perPage:m,page:u,term:l}),{keepPreviousData:!0}),{patients:v,totalCount:h}=y||{patients:[],totalCount:0},E=p.exports.useCallback(()=>({id:_})=>i.push(`/programs/${t}/participants/${_}`),[i,t]),S=p.exports.useMemo(()=>[{label:"Patient Name",RowCell:({firstName:_,lastName:T,severeSymptomsCount:N,id:I,email:R})=>g("div",{className:"relative group px-6 py-4 whitespace-nowrap flex-1 flex flex-col",children:[n===I&&o("div",{className:"absolute h-full w-1 bg-primary-500 left-0 top-0"}),o("div",{children:o($e,{text:`${_} ${T}`,term:l})}),o("div",{className:"text-gray-400 text-sm",children:o($e,{text:R,term:l})}),!!N&&o("div",{className:"absolute h-full right-0 top-0 flex items-center pr-4",children:o("div",{className:"bg-red-400 rounded-full px-2 py-1 text-sm flex items-center h-fit w-fit",children:g("div",{className:"flex whitespace-nowrap space-x-1",children:[o(Hr,{className:"w-4"}),o("span",{children:N}),o("span",{className:"hidden group-hover:block",children:"SEVERE SYMPTOMPS"})]})})})]})}],[l,n]),C=p.exports.useCallback(({id:_})=>_,[]),b=p.exports.useMemo(()=>[{Icon:bt,href:"/organisaitons",label:"Organisations"},{Icon:_r,href:`/organisations/${r==null?void 0:r.organisation.organisationId}`,label:`${r==null?void 0:r.organisation.name} organisation`}],[r==null?void 0:r.organisation.name,r==null?void 0:r.organisation.organisationId]);return o(ke,{navigation:!0,title:g("div",{className:"flex flex-col justify-center items-center",children:[`${r==null?void 0:r.name} program`,o("div",{className:"text-sm text-gray-400",children:r==null?void 0:r.description})]}),sections:d,breadcrumbs:b,children:g("div",{className:"flex flex-row flex-1 h-full overflow-hidden",children:[o("div",{className:O("flex flex-col w-96 border-r","border-slate-30 shrink-0 border-secondary-200"),children:g("div",{className:"flex flex-col overflow-hidden h-full",children:[g("div",{className:O("h-16 justify-center items-center","flex text-secondary-900/40 flex-shrink-0"),children:[o(Nr,{className:"w-6 mr-2"}),"PARTICIPANTS"]}),o("div",{className:"pb-4 px-4",children:g("div",{className:"relative rounded-md shadow-sm",children:[o("div",{className:O("absolute inset-y-0 left-0 pl-3","flex items-center pointer-events-none"),children:o(ve,{className:"text-gray-500 w-5"})}),o("input",{type:"text",value:l,onChange:({currentTarget:_})=>{c(_.value)},placeholder:"search for participant",className:O("focus:ring-primary-500","focus:border-primary-500 block w-full pl-10 pr-12","border-gray-300 rounded-md")})]})}),o("div",{className:"px-4 overflow-hidden flex h-full",children:o(Pe,{selectedRowId:n,onRowClick:E,headers:S,data:v,getRowId:C,page:u,onPageChange:x,rowsPerPage:m,onRowsPerPageChange:w,totalRows:h,showHeader:!1,footer:o(ta,{page:u,rowsPerPage:m,setPage:x,setRowsPerPage:w,totalCount:h})})})]})}),o("div",{className:"flex flex-col flex-1  w-full h-full overflow-hidden",children:a})]})})},ra=({children:t})=>o("div",{children:t}),me=({children:t,roundedBottom:r=!0})=>o("div",{className:O("rounded-t-lg bg-white flex flex-1 flex-col","shadow border-slate-300 border overflow-hidden",{"rounded-b-lg":r}),children:t});me.Footer=ra;const et=({label:t,active:r,onClick:a})=>o("button",{onClick:a,className:O("bg-white","z-10","relative inline-flex items-center","px-4 py-2 border text-sm font-medium",{"bg-primary-300":r}),children:t}),Pt=({pagesCount:t,currentPage:r,onPageChange:a,showActivePageOnly:n})=>{const s=7,i=p.exports.useMemo(()=>{if(n)return o(et,{label:r});if(t<=s)return Array.from({length:t}).map((f,u)=>o(et,{label:u+1,active:t!==1&&r===u+1,onClick:()=>a(u+1)},u));const l=r-Math.floor(s/2),c=l<=1?1:l+7>=t?t-s+1:l,d=Array.from({length:s}).map((f,u)=>u+c);return d[0]=1,d[1]=d[1]!==2?"...":d[1],d[d.length-1]=t,d[d.length-2]=d[d.length-2]!==t-1?"...":d[d.length-2],d.map((f,u)=>o(et,{label:f,active:f===r,onClick:()=>{typeof f=="number"&&a(f)}},`${f}_${u}`))},[r,a,t,n]);return o("div",{children:g("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[o("button",{disabled:r===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",onClick:()=>a(r-1),children:o(Et,{className:"h-5 w-5","aria-hidden":"true"})}),i,o("button",{disabled:r===t,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",onClick:()=>a(r+1),children:o(Or,{className:"h-5 w-5","aria-hidden":"true"})})]})})},Pe=({headers:t,data:r,selectedRowId:a,page:n,rowsPerPage:s,totalRows:i,getRowId:l,onRowClick:c,RowAction:d,onPageChange:f,onRowsPerPageChange:u,footer:x,showHeader:m})=>{const w=Math.ceil(i/s),y=p.exports.useCallback(v=>{f(1),u(v)},[f,u]);return g(me,{roundedBottom:!1,children:[o(Tt,{onRowClick:c,headers:t,data:r,getRowId:l,selectedRowId:a,RowAction:d,showHeader:m}),x||o(me.Footer,{children:g("div",{className:"flex-1 flex items-center justify-between flex-wrap px-4 py-2 bg-gray-50",children:[o("div",{className:"flex flex-1 flex-shrink-0",children:g("span",{className:"text-sm text-gray-700 flex-shrink-0",children:["Showing"," ",o("span",{className:"font-medium",children:(n-1)*s+1})," ","to"," ",o("span",{className:"font-medium",children:Math.min(n*s,i)})," ","of ",o("span",{className:"font-medium",children:i})," results"]})}),g("div",{className:"space-x-4 flex flex-shrink-0 flex-1 justify-end",children:[o(rr,{items:[{id:"5",label:"5 rows",value:5},{id:"10",label:"10 rows",value:10},{id:"25",label:"25 rows",value:25},{id:"50",label:"50 rows",value:50},{id:"100",label:"100 rows",value:100}],selected:`${s}`,onChange:({value:v})=>y(v)}),o(Pt,{pagesCount:w,currentPage:n,onPageChange:f})]})]})})]})};var Lt=function(r){return r.reduce(function(a,n){var s=n[0],i=n[1];return a[s]=i,a},{})},jt=typeof window!="undefined"&&window.document&&window.document.createElement?p.exports.useLayoutEffect:p.exports.useEffect,L="top",V="bottom",W="right",j="left",tt="auto",ge=[L,V,W,j],se="start",xe="end",aa="clippingParents",Ut="viewport",we="popper",na="reference",Vt=ge.reduce(function(t,r){return t.concat([r+"-"+se,r+"-"+xe])},[]),Wt=[].concat(ge,[tt]).reduce(function(t,r){return t.concat([r,r+"-"+se,r+"-"+xe])},[]),sa="beforeRead",oa="read",ia="afterRead",la="beforeMain",ca="main",da="afterMain",ua="beforeWrite",fa="write",pa="afterWrite",va=[sa,oa,ia,la,ca,da,ua,fa,pa];function q(t){return t?(t.nodeName||"").toLowerCase():null}function H(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var r=t.ownerDocument;return r&&r.defaultView||window}return t}function oe(t){var r=H(t).Element;return t instanceof r||t instanceof Element}function $(t){var r=H(t).HTMLElement;return t instanceof r||t instanceof HTMLElement}function $t(t){if(typeof ShadowRoot=="undefined")return!1;var r=H(t).ShadowRoot;return t instanceof r||t instanceof ShadowRoot}function ha(t){var r=t.state;Object.keys(r.elements).forEach(function(a){var n=r.styles[a]||{},s=r.attributes[a]||{},i=r.elements[a];!$(i)||!q(i)||(Object.assign(i.style,n),Object.keys(s).forEach(function(l){var c=s[l];c===!1?i.removeAttribute(l):i.setAttribute(l,c===!0?"":c)}))})}function ma(t){var r=t.state,a={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,a.popper),r.styles=a,r.elements.arrow&&Object.assign(r.elements.arrow.style,a.arrow),function(){Object.keys(r.elements).forEach(function(n){var s=r.elements[n],i=r.attributes[n]||{},l=Object.keys(r.styles.hasOwnProperty(n)?r.styles[n]:a[n]),c=l.reduce(function(d,f){return d[f]="",d},{});!$(s)||!q(s)||(Object.assign(s.style,c),Object.keys(i).forEach(function(d){s.removeAttribute(d)}))})}}var ga={name:"applyStyles",enabled:!0,phase:"write",fn:ha,effect:ma,requires:["computeStyles"]};function J(t){return t.split("-")[0]}var re=Math.max,Le=Math.min,ie=Math.round;function le(t,r){r===void 0&&(r=!1);var a=t.getBoundingClientRect(),n=1,s=1;if($(t)&&r){var i=t.offsetHeight,l=t.offsetWidth;l>0&&(n=ie(a.width)/l||1),i>0&&(s=ie(a.height)/i||1)}return{width:a.width/n,height:a.height/s,top:a.top/s,right:a.right/n,bottom:a.bottom/s,left:a.left/n,x:a.left/n,y:a.top/s}}function rt(t){var r=le(t),a=t.offsetWidth,n=t.offsetHeight;return Math.abs(r.width-a)<=1&&(a=r.width),Math.abs(r.height-n)<=1&&(n=r.height),{x:t.offsetLeft,y:t.offsetTop,width:a,height:n}}function Bt(t,r){var a=r.getRootNode&&r.getRootNode();if(t.contains(r))return!0;if(a&&$t(a)){var n=r;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function z(t){return H(t).getComputedStyle(t)}function xa(t){return["table","td","th"].indexOf(q(t))>=0}function Y(t){return((oe(t)?t.ownerDocument:t.document)||window.document).documentElement}function je(t){return q(t)==="html"?t:t.assignedSlot||t.parentNode||($t(t)?t.host:null)||Y(t)}function Ft(t){return!$(t)||z(t).position==="fixed"?null:t.offsetParent}function wa(t){var r=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,a=navigator.userAgent.indexOf("Trident")!==-1;if(a&&$(t)){var n=z(t);if(n.position==="fixed")return null}for(var s=je(t);$(s)&&["html","body"].indexOf(q(s))<0;){var i=z(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||r&&i.willChange==="filter"||r&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function ye(t){for(var r=H(t),a=Ft(t);a&&xa(a)&&z(a).position==="static";)a=Ft(a);return a&&(q(a)==="html"||q(a)==="body"&&z(a).position==="static")?r:a||wa(t)||r}function at(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function be(t,r,a){return re(t,Le(r,a))}function ya(t,r,a){var n=be(t,r,a);return n>a?a:n}function Ht(){return{top:0,right:0,bottom:0,left:0}}function qt(t){return Object.assign({},Ht(),t)}function Jt(t,r){return r.reduce(function(a,n){return a[n]=t,a},{})}var ba=function(r,a){return r=typeof r=="function"?r(Object.assign({},a.rects,{placement:a.placement})):r,qt(typeof r!="number"?r:Jt(r,ge))};function Ea(t){var r,a=t.state,n=t.name,s=t.options,i=a.elements.arrow,l=a.modifiersData.popperOffsets,c=J(a.placement),d=at(c),f=[j,W].indexOf(c)>=0,u=f?"height":"width";if(!(!i||!l)){var x=ba(s.padding,a),m=rt(i),w=d==="y"?L:j,y=d==="y"?V:W,v=a.rects.reference[u]+a.rects.reference[d]-l[d]-a.rects.popper[u],h=l[d]-a.rects.reference[d],E=ye(i),S=E?d==="y"?E.clientHeight||0:E.clientWidth||0:0,C=v/2-h/2,b=x[w],_=S-m[u]-x[y],T=S/2-m[u]/2+C,N=be(b,T,_),I=d;a.modifiersData[n]=(r={},r[I]=N,r.centerOffset=N-T,r)}}function _a(t){var r=t.state,a=t.options,n=a.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=r.elements.popper.querySelector(s),!s)||!Bt(r.elements.popper,s)||(r.elements.arrow=s))}var Na={name:"arrow",enabled:!0,phase:"main",fn:Ea,effect:_a,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ce(t){return t.split("-")[1]}var Oa={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ta(t){var r=t.x,a=t.y,n=window,s=n.devicePixelRatio||1;return{x:ie(r*s)/s||0,y:ie(a*s)/s||0}}function zt(t){var r,a=t.popper,n=t.popperRect,s=t.placement,i=t.variation,l=t.offsets,c=t.position,d=t.gpuAcceleration,f=t.adaptive,u=t.roundOffsets,x=t.isFixed,m=u===!0?Ta(l):typeof u=="function"?u(l):l,w=m.x,y=w===void 0?0:w,v=m.y,h=v===void 0?0:v,E=l.hasOwnProperty("x"),S=l.hasOwnProperty("y"),C=j,b=L,_=window;if(f){var T=ye(a),N="clientHeight",I="clientWidth";if(T===H(a)&&(T=Y(a),z(T).position!=="static"&&c==="absolute"&&(N="scrollHeight",I="scrollWidth")),T=T,s===L||(s===j||s===W)&&i===xe){b=V;var R=x&&_.visualViewport?_.visualViewport.height:T[N];h-=R-n.height,h*=d?1:-1}if(s===j||(s===L||s===V)&&i===xe){C=W;var A=x&&_.visualViewport?_.visualViewport.width:T[I];y-=A-n.width,y*=d?1:-1}}var D=Object.assign({position:c},f&&Oa);if(d){var P;return Object.assign({},D,(P={},P[b]=S?"0":"",P[C]=E?"0":"",P.transform=(_.devicePixelRatio||1)<=1?"translate("+y+"px, "+h+"px)":"translate3d("+y+"px, "+h+"px, 0)",P))}return Object.assign({},D,(r={},r[b]=S?h+"px":"",r[C]=E?y+"px":"",r.transform="",r))}function Sa(t){var r=t.state,a=t.options,n=a.gpuAcceleration,s=n===void 0?!0:n,i=a.adaptive,l=i===void 0?!0:i,c=a.roundOffsets,d=c===void 0?!0:c,f={placement:J(r.placement),variation:ce(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:s,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,zt(Object.assign({},f,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:l,roundOffsets:d})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,zt(Object.assign({},f,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}var Ca={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Sa,data:{}},Ue={passive:!0};function Ia(t){var r=t.state,a=t.instance,n=t.options,s=n.scroll,i=s===void 0?!0:s,l=n.resize,c=l===void 0?!0:l,d=H(r.elements.popper),f=[].concat(r.scrollParents.reference,r.scrollParents.popper);return i&&f.forEach(function(u){u.addEventListener("scroll",a.update,Ue)}),c&&d.addEventListener("resize",a.update,Ue),function(){i&&f.forEach(function(u){u.removeEventListener("scroll",a.update,Ue)}),c&&d.removeEventListener("resize",a.update,Ue)}}var Ra={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ia,data:{}},Aa={left:"right",right:"left",bottom:"top",top:"bottom"};function Ve(t){return t.replace(/left|right|bottom|top/g,function(r){return Aa[r]})}var Da={start:"end",end:"start"};function Gt(t){return t.replace(/start|end/g,function(r){return Da[r]})}function nt(t){var r=H(t),a=r.pageXOffset,n=r.pageYOffset;return{scrollLeft:a,scrollTop:n}}function st(t){return le(Y(t)).left+nt(t).scrollLeft}function ka(t){var r=H(t),a=Y(t),n=r.visualViewport,s=a.clientWidth,i=a.clientHeight,l=0,c=0;return n&&(s=n.width,i=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(l=n.offsetLeft,c=n.offsetTop)),{width:s,height:i,x:l+st(t),y:c}}function Ma(t){var r,a=Y(t),n=nt(t),s=(r=t.ownerDocument)==null?void 0:r.body,i=re(a.scrollWidth,a.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=re(a.scrollHeight,a.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-n.scrollLeft+st(t),d=-n.scrollTop;return z(s||a).direction==="rtl"&&(c+=re(a.clientWidth,s?s.clientWidth:0)-i),{width:i,height:l,x:c,y:d}}function ot(t){var r=z(t),a=r.overflow,n=r.overflowX,s=r.overflowY;return/auto|scroll|overlay|hidden/.test(a+s+n)}function Qt(t){return["html","body","#document"].indexOf(q(t))>=0?t.ownerDocument.body:$(t)&&ot(t)?t:Qt(je(t))}function Ee(t,r){var a;r===void 0&&(r=[]);var n=Qt(t),s=n===((a=t.ownerDocument)==null?void 0:a.body),i=H(n),l=s?[i].concat(i.visualViewport||[],ot(n)?n:[]):n,c=r.concat(l);return s?c:c.concat(Ee(je(l)))}function it(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Pa(t){var r=le(t);return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function Yt(t,r){return r===Ut?it(ka(t)):oe(r)?Pa(r):it(Ma(Y(t)))}function La(t){var r=Ee(je(t)),a=["absolute","fixed"].indexOf(z(t).position)>=0,n=a&&$(t)?ye(t):t;return oe(n)?r.filter(function(s){return oe(s)&&Bt(s,n)&&q(s)!=="body"&&(a?z(s).position!=="static":!0)}):[]}function ja(t,r,a){var n=r==="clippingParents"?La(t):[].concat(r),s=[].concat(n,[a]),i=s[0],l=s.reduce(function(c,d){var f=Yt(t,d);return c.top=re(f.top,c.top),c.right=Le(f.right,c.right),c.bottom=Le(f.bottom,c.bottom),c.left=re(f.left,c.left),c},Yt(t,i));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Xt(t){var r=t.reference,a=t.element,n=t.placement,s=n?J(n):null,i=n?ce(n):null,l=r.x+r.width/2-a.width/2,c=r.y+r.height/2-a.height/2,d;switch(s){case L:d={x:l,y:r.y-a.height};break;case V:d={x:l,y:r.y+r.height};break;case W:d={x:r.x+r.width,y:c};break;case j:d={x:r.x-a.width,y:c};break;default:d={x:r.x,y:r.y}}var f=s?at(s):null;if(f!=null){var u=f==="y"?"height":"width";switch(i){case se:d[f]=d[f]-(r[u]/2-a[u]/2);break;case xe:d[f]=d[f]+(r[u]/2-a[u]/2);break}}return d}function _e(t,r){r===void 0&&(r={});var a=r,n=a.placement,s=n===void 0?t.placement:n,i=a.boundary,l=i===void 0?aa:i,c=a.rootBoundary,d=c===void 0?Ut:c,f=a.elementContext,u=f===void 0?we:f,x=a.altBoundary,m=x===void 0?!1:x,w=a.padding,y=w===void 0?0:w,v=qt(typeof y!="number"?y:Jt(y,ge)),h=u===we?na:we,E=t.rects.popper,S=t.elements[m?h:u],C=ja(oe(S)?S:S.contextElement||Y(t.elements.popper),l,d),b=le(t.elements.reference),_=Xt({reference:b,element:E,strategy:"absolute",placement:s}),T=it(Object.assign({},E,_)),N=u===we?T:b,I={top:C.top-N.top+v.top,bottom:N.bottom-C.bottom+v.bottom,left:C.left-N.left+v.left,right:N.right-C.right+v.right},R=t.modifiersData.offset;if(u===we&&R){var A=R[s];Object.keys(I).forEach(function(D){var P=[W,V].indexOf(D)>=0?1:-1,X=[L,V].indexOf(D)>=0?"y":"x";I[D]+=A[X]*P})}return I}function Ua(t,r){r===void 0&&(r={});var a=r,n=a.placement,s=a.boundary,i=a.rootBoundary,l=a.padding,c=a.flipVariations,d=a.allowedAutoPlacements,f=d===void 0?Wt:d,u=ce(n),x=u?c?Vt:Vt.filter(function(y){return ce(y)===u}):ge,m=x.filter(function(y){return f.indexOf(y)>=0});m.length===0&&(m=x);var w=m.reduce(function(y,v){return y[v]=_e(t,{placement:v,boundary:s,rootBoundary:i,padding:l})[J(v)],y},{});return Object.keys(w).sort(function(y,v){return w[y]-w[v]})}function Va(t){if(J(t)===tt)return[];var r=Ve(t);return[Gt(t),r,Gt(r)]}function Wa(t){var r=t.state,a=t.options,n=t.name;if(!r.modifiersData[n]._skip){for(var s=a.mainAxis,i=s===void 0?!0:s,l=a.altAxis,c=l===void 0?!0:l,d=a.fallbackPlacements,f=a.padding,u=a.boundary,x=a.rootBoundary,m=a.altBoundary,w=a.flipVariations,y=w===void 0?!0:w,v=a.allowedAutoPlacements,h=r.options.placement,E=J(h),S=E===h,C=d||(S||!y?[Ve(h)]:Va(h)),b=[h].concat(C).reduce(function(ae,Q){return ae.concat(J(Q)===tt?Ua(r,{placement:Q,boundary:u,rootBoundary:x,padding:f,flipVariations:y,allowedAutoPlacements:v}):Q)},[]),_=r.rects.reference,T=r.rects.popper,N=new Map,I=!0,R=b[0],A=0;A<b.length;A++){var D=b[A],P=J(D),X=ce(D)===se,de=[L,V].indexOf(P)>=0,ue=de?"width":"height",U=_e(r,{placement:D,boundary:u,rootBoundary:x,altBoundary:m,padding:f}),B=de?X?W:j:X?V:L;_[ue]>T[ue]&&(B=Ve(B));var Oe=Ve(B),K=[];if(i&&K.push(U[P]<=0),c&&K.push(U[B]<=0,U[Oe]<=0),K.every(function(ae){return ae})){R=D,I=!1;break}N.set(D,K)}if(I)for(var Te=y?3:1,Be=function(Q){var pe=b.find(function(Ce){var Z=N.get(Ce);if(Z)return Z.slice(0,Q).every(function(Fe){return Fe})});if(pe)return R=pe,"break"},fe=Te;fe>0;fe--){var Se=Be(fe);if(Se==="break")break}r.placement!==R&&(r.modifiersData[n]._skip=!0,r.placement=R,r.reset=!0)}}var $a={name:"flip",enabled:!0,phase:"main",fn:Wa,requiresIfExists:["offset"],data:{_skip:!1}};function Kt(t,r,a){return a===void 0&&(a={x:0,y:0}),{top:t.top-r.height-a.y,right:t.right-r.width+a.x,bottom:t.bottom-r.height+a.y,left:t.left-r.width-a.x}}function Zt(t){return[L,W,V,j].some(function(r){return t[r]>=0})}function Ba(t){var r=t.state,a=t.name,n=r.rects.reference,s=r.rects.popper,i=r.modifiersData.preventOverflow,l=_e(r,{elementContext:"reference"}),c=_e(r,{altBoundary:!0}),d=Kt(l,n),f=Kt(c,s,i),u=Zt(d),x=Zt(f);r.modifiersData[a]={referenceClippingOffsets:d,popperEscapeOffsets:f,isReferenceHidden:u,hasPopperEscaped:x},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":x})}var Fa={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ba};function Ha(t,r,a){var n=J(t),s=[j,L].indexOf(n)>=0?-1:1,i=typeof a=="function"?a(Object.assign({},r,{placement:t})):a,l=i[0],c=i[1];return l=l||0,c=(c||0)*s,[j,W].indexOf(n)>=0?{x:c,y:l}:{x:l,y:c}}function qa(t){var r=t.state,a=t.options,n=t.name,s=a.offset,i=s===void 0?[0,0]:s,l=Wt.reduce(function(u,x){return u[x]=Ha(x,r.rects,i),u},{}),c=l[r.placement],d=c.x,f=c.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=d,r.modifiersData.popperOffsets.y+=f),r.modifiersData[n]=l}var Ja={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:qa};function za(t){var r=t.state,a=t.name;r.modifiersData[a]=Xt({reference:r.rects.reference,element:r.rects.popper,strategy:"absolute",placement:r.placement})}var Ga={name:"popperOffsets",enabled:!0,phase:"read",fn:za,data:{}};function Qa(t){return t==="x"?"y":"x"}function Ya(t){var r=t.state,a=t.options,n=t.name,s=a.mainAxis,i=s===void 0?!0:s,l=a.altAxis,c=l===void 0?!1:l,d=a.boundary,f=a.rootBoundary,u=a.altBoundary,x=a.padding,m=a.tether,w=m===void 0?!0:m,y=a.tetherOffset,v=y===void 0?0:y,h=_e(r,{boundary:d,rootBoundary:f,padding:x,altBoundary:u}),E=J(r.placement),S=ce(r.placement),C=!S,b=at(E),_=Qa(b),T=r.modifiersData.popperOffsets,N=r.rects.reference,I=r.rects.popper,R=typeof v=="function"?v(Object.assign({},r.rects,{placement:r.placement})):v,A=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),D=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,P={x:0,y:0};if(!!T){if(i){var X,de=b==="y"?L:j,ue=b==="y"?V:W,U=b==="y"?"height":"width",B=T[b],Oe=B+h[de],K=B-h[ue],Te=w?-I[U]/2:0,Be=S===se?N[U]:I[U],fe=S===se?-I[U]:-N[U],Se=r.elements.arrow,ae=w&&Se?rt(Se):{width:0,height:0},Q=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:Ht(),pe=Q[de],Ce=Q[ue],Z=be(0,N[U],ae[U]),Fe=C?N[U]/2-Te-Z-pe-A.mainAxis:Be-Z-pe-A.mainAxis,nr=C?-N[U]/2+Te+Z+Ce+A.mainAxis:fe+Z+Ce+A.mainAxis,He=r.elements.arrow&&ye(r.elements.arrow),sr=He?b==="y"?He.clientTop||0:He.clientLeft||0:0,ct=(X=D==null?void 0:D[b])!=null?X:0,or=B+Fe-ct-sr,ir=B+nr-ct,dt=be(w?Le(Oe,or):Oe,B,w?re(K,ir):K);T[b]=dt,P[b]=dt-B}if(c){var ut,lr=b==="x"?L:j,cr=b==="x"?V:W,ee=T[_],Ie=_==="y"?"height":"width",ft=ee+h[lr],pt=ee-h[cr],qe=[L,j].indexOf(E)!==-1,vt=(ut=D==null?void 0:D[_])!=null?ut:0,ht=qe?ft:ee-N[Ie]-I[Ie]-vt+A.altAxis,mt=qe?ee+N[Ie]+I[Ie]-vt-A.altAxis:pt,gt=w&&qe?ya(ht,ee,mt):be(w?ht:ft,ee,w?mt:pt);T[_]=gt,P[_]=gt-ee}r.modifiersData[n]=P}}var Xa={name:"preventOverflow",enabled:!0,phase:"main",fn:Ya,requiresIfExists:["offset"]};function Ka(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Za(t){return t===H(t)||!$(t)?nt(t):Ka(t)}function en(t){var r=t.getBoundingClientRect(),a=ie(r.width)/t.offsetWidth||1,n=ie(r.height)/t.offsetHeight||1;return a!==1||n!==1}function tn(t,r,a){a===void 0&&(a=!1);var n=$(r),s=$(r)&&en(r),i=Y(r),l=le(t,s),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(n||!n&&!a)&&((q(r)!=="body"||ot(i))&&(c=Za(r)),$(r)?(d=le(r,!0),d.x+=r.clientLeft,d.y+=r.clientTop):i&&(d.x=st(i))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function rn(t){var r=new Map,a=new Set,n=[];t.forEach(function(i){r.set(i.name,i)});function s(i){a.add(i.name);var l=[].concat(i.requires||[],i.requiresIfExists||[]);l.forEach(function(c){if(!a.has(c)){var d=r.get(c);d&&s(d)}}),n.push(i)}return t.forEach(function(i){a.has(i.name)||s(i)}),n}function an(t){var r=rn(t);return va.reduce(function(a,n){return a.concat(r.filter(function(s){return s.phase===n}))},[])}function nn(t){var r;return function(){return r||(r=new Promise(function(a){Promise.resolve().then(function(){r=void 0,a(t())})})),r}}function sn(t){var r=t.reduce(function(a,n){var s=a[n.name];return a[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,a},{});return Object.keys(r).map(function(a){return r[a]})}var er={placement:"bottom",modifiers:[],strategy:"absolute"};function tr(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return!r.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function on(t){t===void 0&&(t={});var r=t,a=r.defaultModifiers,n=a===void 0?[]:a,s=r.defaultOptions,i=s===void 0?er:s;return function(c,d,f){f===void 0&&(f=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},er,i),modifiersData:{},elements:{reference:c,popper:d},attributes:{},styles:{}},x=[],m=!1,w={state:u,setOptions:function(E){var S=typeof E=="function"?E(u.options):E;v(),u.options=Object.assign({},i,u.options,S),u.scrollParents={reference:oe(c)?Ee(c):c.contextElement?Ee(c.contextElement):[],popper:Ee(d)};var C=an(sn([].concat(n,u.options.modifiers)));return u.orderedModifiers=C.filter(function(b){return b.enabled}),y(),w.update()},forceUpdate:function(){if(!m){var E=u.elements,S=E.reference,C=E.popper;if(!!tr(S,C)){u.rects={reference:tn(S,ye(C),u.options.strategy==="fixed"),popper:rt(C)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(A){return u.modifiersData[A.name]=Object.assign({},A.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var _=u.orderedModifiers[b],T=_.fn,N=_.options,I=N===void 0?{}:N,R=_.name;typeof T=="function"&&(u=T({state:u,options:I,name:R,instance:w})||u)}}}},update:nn(function(){return new Promise(function(h){w.forceUpdate(),h(u)})}),destroy:function(){v(),m=!0}};if(!tr(c,d))return w;w.setOptions(f).then(function(h){!m&&f.onFirstUpdate&&f.onFirstUpdate(h)});function y(){u.orderedModifiers.forEach(function(h){var E=h.name,S=h.options,C=S===void 0?{}:S,b=h.effect;if(typeof b=="function"){var _=b({state:u,name:E,instance:w,options:C}),T=function(){};x.push(_||T)}})}function v(){x.forEach(function(h){return h()}),x=[]}return w}}var ln=[Ra,Ga,Ca,ga,Ja,$a,Xa,Na,Fa],cn=on({defaultModifiers:ln}),dn=typeof Element!="undefined",un=typeof Map=="function",fn=typeof Set=="function",pn=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function We(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var a,n,s;if(Array.isArray(t)){if(a=t.length,a!=r.length)return!1;for(n=a;n--!=0;)if(!We(t[n],r[n]))return!1;return!0}var i;if(un&&t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(i=t.entries();!(n=i.next()).done;)if(!r.has(n.value[0]))return!1;for(i=t.entries();!(n=i.next()).done;)if(!We(n.value[1],r.get(n.value[0])))return!1;return!0}if(fn&&t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(i=t.entries();!(n=i.next()).done;)if(!r.has(n.value[0]))return!1;return!0}if(pn&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if(a=t.length,a!=r.length)return!1;for(n=a;n--!=0;)if(t[n]!==r[n])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),a=s.length,a!==Object.keys(r).length)return!1;for(n=a;n--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;if(dn&&t instanceof Element)return!1;for(n=a;n--!=0;)if(!((s[n]==="_owner"||s[n]==="__v"||s[n]==="__o")&&t.$$typeof)&&!We(t[s[n]],r[s[n]]))return!1;return!0}return t!==t&&r!==r}var vn=function(r,a){try{return We(r,a)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}},hn=[],mn=function(r,a,n){n===void 0&&(n={});var s=p.exports.useRef(null),i={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||hn},l=p.exports.useState({styles:{popper:{position:i.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),c=l[0],d=l[1],f=p.exports.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(w){var y=w.state,v=Object.keys(y.elements);d({styles:Lt(v.map(function(h){return[h,y.styles[h]||{}]})),attributes:Lt(v.map(function(h){return[h,y.attributes[h]]}))})},requires:["computeStyles"]}},[]),u=p.exports.useMemo(function(){var m={onFirstUpdate:i.onFirstUpdate,placement:i.placement,strategy:i.strategy,modifiers:[].concat(i.modifiers,[f,{name:"applyStyles",enabled:!1}])};return vn(s.current,m)?s.current||m:(s.current=m,m)},[i.onFirstUpdate,i.placement,i.strategy,i.modifiers,f]),x=p.exports.useRef();return jt(function(){x.current&&x.current.setOptions(u)},[u]),jt(function(){if(!(r==null||a==null)){var m=n.createPopper||cn,w=m(r,a,u);return x.current=w,function(){w.destroy(),x.current=null}}},[r,a,n.createPopper]),{state:x.current?x.current.state:null,styles:c.styles,attributes:c.attributes,update:x.current?x.current.update:null,forceUpdate:x.current?x.current.forceUpdate:null}};function gn(t,r){if(console.log(t,r),!t)return!1;let a=r;for(;a;){if(a===t)return!0;a=a.parentElement}return!1}const rr=({selected:t,items:r,onChange:a})=>{const[n,s]=p.exports.useState(null),[i,l]=p.exports.useState(null),c=p.exports.useRef(i);c.current=i;const{styles:d,attributes:f}=mn(n,i),u=p.exports.useMemo(()=>r.find(({id:v})=>v===t)||r[0],[r,t]),[x,m]=p.exports.useState(!1),w=p.exports.useCallback(()=>{const v=({target:h})=>{const E=gn(c.current,h);console.log(E),!E&&m(!1)};return document.addEventListener("mousedown",v),m(!0),()=>document.removeEventListener("mousedown",v)},[]),y=p.exports.useCallback(v=>{m(!1),a(v)},[a]);return g("div",{className:"relative",children:[o("div",{ref:s,className:"h-full",children:o(he,{onClick:w,children:g("div",{className:"flex-nowrap flex",children:[o("span",{className:"whitespace-nowrap",children:u.label})," ",o(Tr,{className:"ml-1 w-4"})]})})}),x&&o("div",F(M({ref:l,style:M({},d.popper)},f.popper),{children:o("div",{className:"whitespace-nowrap flex flex-col border rounded-md bg-white shadow-md m-2",children:r.map(v=>{const{id:h,label:E}=v;return o("button",{className:"p-4 hover:bg-gray-100",onClick:()=>y(v),children:o("span",{className:"whitespace-nowrap",children:E})},h)})})}))]})},$e=({text:t,term:r})=>{if(!r)return o(Re,{children:t});const a=t.toLowerCase().indexOf(r.toLowerCase());if(a===-1)return o(Re,{children:t});const n=t.slice(0,a),s=t.slice(a,a+r.length),i=t.slice(a+r.length);return g(Re,{children:[n,s&&o("span",{className:"bg-yellow-200",children:s}),i]})},xn=({range:[t,r],onChange:a})=>g("div",{className:"flex items-center",children:[g("div",{className:"relative",children:[o("div",{className:O("flex absolute inset-y-0 left-0","items-center pl-3 pointer-events-none"),children:o(_t,{className:"w-5 text-gray-400"})}),o("input",{onChange:n=>a([new Date(n.currentTarget.value),r]),name:"start",type:"date",value:(t==null?void 0:t.toISOString().slice(0,10))||"",className:O("bg-gray-50 border border-gray-300","text-gray-900 sm:text-sm rounded-l-lg block w-full pl-10 p-2.5"),placeholder:"Select date start"})]}),g("div",{className:"relative",children:[o("div",{className:O("flex absolute inset-y-0 left-0","items-center pl-3 pointer-events-none"),children:o("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:o(_t,{className:"w-5 text-gray-400"})})}),o("input",{name:"end",type:"date",onChange:n=>a([t,new Date(n.currentTarget.value)]),value:(r==null?void 0:r.toISOString().slice(0,10))||"",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-r-lg block w-full pl-10 p-2.5",placeholder:"Select date end"})]})]});var wn="/assets/logo.0bd15c82.svg";const yn=({form:t,onSubmit:r,label:a="Submit"})=>{const[n,s]=p.exports.useState(!1),i=St(),l=p.exports.useCallback(async()=>{s(!0),await r(t.values),i.current&&s(!1)},[t.values,i,r]);return o(he,{loading:n,disabled:n,label:a,onClick:l})},bn=()=>{const{signIn:t}=Rt(),r=zr(p.exports.useMemo(()=>({email:{type:"email",label:"Email",defaultValue:""},password:{type:"password",label:"Password",defaultValue:""}}),[]));return p.exports.useCallback(()=>{},[]),o(ke,{children:o("div",{className:"flex justify-center items-center h-full",children:g("div",{className:"w-96 space-y-4 flex flex-col items-center",children:[o("img",{src:wn,alt:"logo",className:"w-24 h-24"}),o("span",{children:"VinehealthPRO"}),o(Nt,{field:r.fields.email}),o(Nt,{field:r.fields.password}),o("div",{className:"pt-4 flex w-full",children:o(yn,{label:"Sign in",form:r,onSubmit:t})})]})})})};class En{constructor(r){this.config=r}get apiEndpoint(){return this.config.apiEndpoint}}const _n=()=>{const t=G(),r=De(),[a,n]=p.exports.useState({rowsPerPage:25,page:1}),{page:s,rowsPerPage:i}=a,{data:l}=k([s,i],()=>t.getOrganisations({page:s,perPage:i})),{organisations:c,totalCount:d}=l||{organisations:[],totalCount:0},f=p.exports.useMemo(()=>[{label:"Organisation name",stickyColumn:!0,RowCell:({name:m})=>o("div",{className:"px-6 py-4 whitespace-nowrap",children:m})},{label:"created",RowCell:({dateCreated:m})=>o("div",{className:"px-6 py-4 whitespace-nowrap",children:m.toLocaleDateString()})},{label:"projects",RowCell:({projectsCount:m})=>o("div",{className:"px-6 py-4 whitespace-nowrap",children:m})},{label:"users",RowCell:({usersCount:m})=>o("div",{className:"px-6 py-4 whitespace-nowrap",children:m})}],[]),u=p.exports.useCallback(({organisationId:m})=>r.push(`/organisations/${m}`),[r]);return o(ke,{navigation:!0,title:"Organisations",children:g("div",{className:"flex flex-1 h-full overflow-hidden px-4 pt-4 flex-col",children:[g("div",{className:"mb-4 flex flex-row space-x-4  rounded-t-lg",children:[o("div",{className:"flex flex-col flex-1 w-full",children:g("div",{className:"relative rounded-md shadow-sm",children:[o("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o(ve,{className:"text-gray-500 w-5"})}),o("input",{type:"text",value:"",onChange:({currentTarget:m})=>{},placeholder:"",className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12  border-gray-300 rounded-md"})]})}),o("div",{children:o(he,{label:"ADD ORGANISATION",intent:"primary",onClick:()=>{}})})]}),o(Pe,{page:s,data:c,rowsPerPage:i,totalRows:d,headers:f,onRowClick:u,getRowId:({organisationId:m})=>m,onPageChange:m=>n(F(M({},a),{page:m})),onRowsPerPageChange:m=>n(F(M({},a),{rowsPerPage:m}))})]})})},ar=({label:t})=>o("div",{children:o("div",{className:O("inline-flex py-1 px-2 text-sm rounded-full","h-fit m-1",{"bg-red-300":t==="EQ5D","bg-cyan-300":t==="FACTG","bg-violet-300":t==="QLQC30","bg-lime-300":t==="BN20"}),children:t})}),Nn=()=>{const t=G(),{organisationId:r}=te(),{data:a}=k(["organisation",r],async()=>(await t.getOrganisation(r)).data),n=`/organisations/${r}`,s=De(),{data:i}=k(["programs",r],()=>t.getPrograms({organisationId:r})),l=p.exports.useCallback(({projectId:v})=>s.push(`/programs/${v}`),[s]),[c,d]=p.exports.useState(1),[f,u]=p.exports.useState(25),x=p.exports.useMemo(()=>[{label:"Project name",stickyColumn:!0,defaultWidth:300,RowCell:({name:v,imageThumbnailUrl:h})=>g("div",{className:"flex space-x-4 items-center px-6 py-4 whitespace-nowrap overflow-hidden",children:[o("div",{className:"w-14 h-14 border bg-slate-50 rounded-md shrink-0",style:{backgroundImage:`url(${h})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),o("div",{className:"text-ellipsis overflow-hidden",children:v})]})},{label:"Questionnaire types",defaultWidth:300,RowCell:({availableQuestionnaireTypes:v})=>o("div",{className:"flex flex-wrap h-full items-center p-2",children:v.map(h=>o(ar,{label:h},h))})},{label:"consented patients",RowCell:({consentedPatientsCount:v})=>o("div",{className:"px-6 py-4 whitespace-nowrap overflow-hidden text-ellipsis flex items-center",children:v})},{label:"created",defaultWidth:150,RowCell:({dateCreated:v})=>o("div",{className:"px-6 py-4 whitespace-nowrap overflow-hidden text-ellipsis flex items-center",children:v.toLocaleDateString()})},{label:"updated",defaultWidth:150,RowCell:({dateUpdated:v})=>o("div",{className:"px-6 py-4 whitespace-nowrap overflow-hidden text-ellipsis flex items-center",children:v.toLocaleDateString()})},{label:"end date",defaultWidth:150,RowCell:({endDate:v})=>o("div",{className:"px-6 py-4 whitespace-nowrap  overflow-hidden text-ellipsis flex items-center",children:v==null?void 0:v.toLocaleDateString()})},{label:"free text",defaultWidth:120,RowCell:({disableFreeText:v})=>o("div",{className:"px-6 py-4 whitespace-nowrap flex items-center",children:v&&o(Sr,{className:"w-6 text-green-500"})})},{label:"users",RowCell:({usersCount:v})=>o("div",{className:"px-6 py-4 whitespace-nowrap flex items-center",children:v})}],[]),{totalCount:m,programs:w}=i||{programs:[],totalCount:0},y=p.exports.useCallback(({projectId:v})=>v,[]);return o(ke,{navigation:!0,title:`${a==null?void 0:a.name} organisation`,breadcrumbs:[{href:"/organisations",label:"Organisations",Icon:bt}],sections:[{label:"Programs",link:`${n}/programs`},{label:"Settings",link:`${n}/settings`}],children:g("div",{className:"flex flex-1 h-full overflow-hidden px-4 pt-4 flex-col",children:[g("div",{className:"mb-4 flex flex-row space-x-4 rounded-t-lg",children:[o("div",{className:"flex flex-col flex-1 w-full",children:g("div",{className:"relative rounded-md shadow-sm",children:[o("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o(ve,{className:"text-gray-500 w-5"})}),o("input",{type:"text",value:"",onChange:({currentTarget:v})=>{},placeholder:"",className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12  border-gray-300 rounded-md"})]})}),o("div",{children:o(he,{label:"ADD PROGRAM",intent:"primary",onClick:()=>{}})})]}),o(Pe,{page:c,rowsPerPage:f,totalRows:m,headers:x,data:w,getRowId:y,onPageChange:d,onRowsPerPageChange:u,onRowClick:l})]})})},On=Array.from({length:999}).map((t,r)=>({id:r,label:`${r} row`})),Tn=()=>o("div",{className:"flex overflow-hidden flex-col h-full",children:o(Tt,{data:On,getRowId:({id:t})=>`${t}`,headers:[{label:"",RowCell:({label:t})=>o("div",{children:t})}],showHeader:!1,onPageRequest:t=>console.log("next")})}),Sn=()=>{const t=G(),{programId:r,participantId:a}=te(),{data:n}=k([r],async()=>(await t.getProgram(r)).data),{data:s}=k([r,a],async()=>(await t.getPatient({participantId:a,programId:r})).data),{data:i}=k([r,"patients"],async()=>(await t.getPatients({programId:r})).data);return o(ne,{programId:r,participants:i||[],program:n,selectedParticipantId:a,children:g("div",{className:"flex flex-col outline-hidden overflow-hidden w-ful h-full",children:[o("div",{className:"flex shrink-0",children:g("div",{className:"text-4xl flex flex-1 border-b border-gray-600",children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]})}),g("div",{className:"flex flex-row w-full overflow-hidden h-full",children:[o("div",{className:"flex w-60 flex-col border-r border-gray-600 h-full overflow-hidden",children:o(Tn,{})}),o("div",{className:"flex flex-1",children:"content"})]})]})})},Cn=()=>{const t=G(),{programId:r}=te(),{data:a}=k([r],async()=>(await t.getProgram(r)).data),{data:n}=k([r,"patients"],async()=>(await t.getPatients({programId:r})).data);return o(ne,{programId:r,program:a,participants:n||[],children:"questionnaires"})},Ne=({children:t,title:r})=>o("div",{children:g(me,{children:[o("div",{className:O("border-b border-gray-200","text-lg","p-4","sticky"),children:r}),t]})});function In(t,r){const a=p.exports.useRef(r);a.current=r;const n=p.exports.useRef(!!t);p.exports.useEffect(()=>{n.current||!t||(n.current=!0,a.current())},[t])}const Rn=()=>{var l,c;const t=G(),{programId:r}=te(),{data:a}=k([r],async()=>(await t.getProgram(r)).data),[n,s]=p.exports.useState([a==null?void 0:a.startDate,(a==null?void 0:a.endDate)||new Date]);In(a,()=>s([a==null?void 0:a.startDate,(a==null?void 0:a.endDate)||new Date]));const{data:i}=k([r,(l=n[0])==null?void 0:l.valueOf(),(c=n[1])==null?void 0:c.valueOf()],async()=>{if(!(!n[0]||!n[1]))return t.getMedications({programId:r,startDate:n[0],endDate:n[1]})});return console.log(i),o(ne,{programId:r,program:a,children:g("div",{className:"overflow-hidden p-4 flex flex-col",children:[o("div",{className:"border border-b-gray-300 pb-4",children:o(xn,{range:n,onChange:s})}),g("div",{className:O("pt-2","grid gap-4 grid-cols-2 auto overflow-y-auto"),style:{gridTemplateColumns:"repeat(auto-fit, minmax(520px, 1fr))"},children:[o(Ne,{title:"General",children:g("div",{className:"flex flex-col p-4",children:["Start date: ",a==null?void 0:a.startDate.toLocaleDateString(),a==null?void 0:a.availableQuestionnaireTypes.map(d=>o(ar,{label:d},d)),a==null?void 0:a.consentedPatientsCount," Consented patients"]})}),o(Ne,{title:"Temperature trends",children:o("div",{className:"p-4",children:"There have been no new temperature logs in the selected time frame"})}),o(Ne,{title:"Medication adherence"}),o(Ne,{title:"Most logged symptoms"}),o(Ne,{title:"Symptoms Trends"})]})]})})},An=()=>{const t=G(),{programId:r}=te(),{data:a}=k([r],async()=>(await t.getProgram(r)).data),{data:n}=k([r,"patients"],async()=>(await t.getPatients({programId:r})).data);return o(ne,{programId:r,program:a,participants:n||[],children:"team"})};var lt;(function(t){t.CONSENT_GIVEN="Consented",t.AWAITING_CONSENT="Invite sent"})(lt||(lt={}));const Dn=({consentGiven:t})=>o("div",{className:"text-sm mr-4 justify-end flex flex-1 flex-row items-center",children:g("div",{className:O("inline-flex","whitespace-nowrap","border rounded-md border-slate-300","h-fit"),children:[!t&&g("button",{onClick:()=>{},className:O("bg-gray-100 p-2 hover:bg-gray-200","rounded-l-md flex items-center"),children:[o(Ir,{className:"w-4 mr-1"}),"Resend invite"]}),o("button",{onClick:()=>{},className:O("p-2 bg-gray-100 hover:bg-gray-200",{"rounded-r-md":!0,"rounded-l-md":t,"border-l":!t}),children:o(wt,{className:"w-6"})})]})}),kn=()=>{const{programId:t}=te(),r=G(),a=De(),[n,s]=p.exports.useState(1),[i,l]=p.exports.useState(25),[c,d]=p.exports.useState(""),{data:f}=k([t],async()=>(await r.getProgram(t)).data),{data:u}=k([t,"patients",n,i,c],()=>r.getPatients({programId:t,perPage:i,page:n,term:c}),{keepPreviousData:!0}),{patients:x,totalCount:m}=u||{patients:[],totalCount:0},w=p.exports.useMemo(()=>[{label:"Patient Name",stickyColumn:!0,RowCell:({firstName:h,lastName:E})=>o("div",{className:O("px-6 py-4 whitespace-nowrap","text-ellipsis overflow-hidden"),children:o($e,{text:`${h} ${E}`,term:c})})},{label:"status",defaultWidth:150,RowCell:({consentStatus:h})=>o("div",{className:"px-6 py-4 whitespace-nowrap",children:o("div",{className:O("inline-flex rounded-full py-1 px-3 text-sm",{"bg-green-300":h==="CONSENT_GIVEN","bg-yellow-300":h==="AWAITING_CONSENT"}),children:lt[h]})})},{label:"email",defaultWidth:300,RowCell:({email:h})=>o("div",{className:O("text-gray-500 px-6 py-4","whitespace-nowrap overflow-hidden text-ellipsis"),children:o($e,{text:h,term:c})})}],[c]),y=p.exports.useCallback(({id:h})=>a.push(`/programs/${t}/participants/${h}`),[a,t]),v=p.exports.useCallback(({id:h})=>h,[]);return o(ne,{programId:t,program:f,children:g("div",{className:"flex flex-1 h-full overflow-hidden px-4 pt-4 flex-col",children:[g("div",{className:"flex flex-row space-x-4 rounded-t-lg mb-4",children:[o("div",{className:"p-2 text-secondary-900",children:o(yt,{to:`/organisations/${f==null?void 0:f.organisation.organisationId}`,children:o(Et,{className:"w-6"})})}),o("div",{className:"flex flex-col flex-1 w-full",children:g("div",{className:"relative rounded-md shadow-sm",children:[o("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o(ve,{className:"text-gray-500 w-5"})}),o("input",{type:"text",value:c,onChange:({currentTarget:h})=>d(h.value),placeholder:"Search for patient",className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12  border-gray-300 rounded-md"})]})}),o("div",{children:g(he,{intent:"primary",onClick:()=>{},children:[o(Cr,{className:"w-6 mr-2"}),"INVITE NEW PATIENT"]})})]}),o(Pe,{onPageChange:s,page:n,rowsPerPage:i,totalRows:m,onRowsPerPageChange:l,onRowClick:y,headers:w,data:x,getRowId:v,RowAction:Dn})]})})},Mn=()=>{const t=G(),{programId:r}=te(),{data:a}=k([r],async()=>(await t.getProgram(r)).data),{data:n}=k([r,"patients"],async()=>(await t.getPatients({programId:r})).data);return o(ne,{programId:r,program:a,participants:n||[],children:"settings"})},Pn=new En({apiEndpoint:"https://staging.api.vinehealth.ai/api/v1"}),Ln=t=>t.filter(Boolean).map(([a,n,s=!0])=>typeof n=="string"?o(Rr,{exact:s,path:a,to:n},a):o(Ar,{exact:s,path:a,component:n},a)),jn=p.exports.memo(()=>{const{isSigned:t}=Rt(),r=Ln([!t&&["/login",bn],!t&&["/*","/login",!1],["/login","/"],["/","/organisations"],["/organisations/:organisationId","/organisations/:organisationId/programs"],["/organisations",_n],["/organisations/:organisationId/programs",Nn],["/programs/:programId","/programs/:programId/enrolment"],["/programs/:programId/enrolment",kn],["/programs/:programId/reports",Rn],["/programs/:programId/questionnaires",Cn],["/programs/:programId/team",An],["/programs/:programId/settings",Mn],["/programs/:programId/participants/:participantId",Sn],["*",()=>o("div",{children:"404"}),!1]]);return o(Dr,{children:o(kr,{children:r})})}),Un=new Mr,Vn=p.exports.memo(()=>{const t=ea(Pn),r=Qr(t),{isSigned:a}=r,{hasToken:n}=t;return n&&!a?o("div",{children:"loading"}):o(It.Provider,{value:r,children:o(Mt.Provider,{value:t,children:o(Pr,{client:Un,children:o(jn,{})})})})});Lr.render(o(jr.StrictMode,{children:o(Vn,{})}),document.getElementById("root"));
