var lr=Object.defineProperty,cr=Object.defineProperties;var dr=Object.getOwnPropertyDescriptors;var gt=Object.getOwnPropertySymbols;var ur=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable;var He=(e,t,r)=>t in e?lr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,M=(e,t)=>{for(var r in t||(t={}))ur.call(t,r)&&He(e,r,t[r]);if(gt)for(var r of gt(t))pr.call(t,r)&&He(e,r,t[r]);return e},F=(e,t)=>cr(e,dr(t));var qe=(e,t,r)=>(He(e,typeof t!="symbol"?t+"":t,r),r);import{j as m,a as o,S as fe,c as C,r as p,F as Re,D as wt,L as xt,N as fr,b as ve,o as vr,u as Ae,d as hr,C as mr,B as gr,U as wr,e as xr,f as k,g as yt,O as yr,h as Er,i as Et,k as br,l as _r,m as ee,n as Nr,p as Or,P as Tr,R as Cr,q as Sr,s as Ir,t as Rr,Q as Ar,v as kr,w as Dr,x as Mr}from"./vendor.bd503762.js";const Pr=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};Pr();const ke=({navigation:e,children:t,title:r,breadcrumbs:a,sections:n})=>m("div",{className:"bg-secondary-600/10 w-screen h-screen flex  overflow-hidden flex-col",children:[e&&o(Fr,{breadcrumbs:a,title:r,sections:n}),o("div",{className:"flex flex-col w-full h-full overflow-hidden",children:o("div",{className:"flex overflow-hidden flex-1 flex-col",children:t})})]}),bt=({field:e})=>{const{setValue:t,value:r,config:a}=e,{label:n,type:s,placeholder:i}=a;return m("div",{className:"flex flex-col flex-1 w-full",children:[n&&o("span",{className:"block text-sm font-medium text-gray-700",children:n}),m("div",{className:"relative rounded-md shadow-sm",children:[o("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o(fe,{className:"text-gray-500 w-5"})}),o("input",{type:s,value:r,onChange:({currentTarget:l})=>t(l.value),placeholder:i,className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12  border-gray-300 rounded-md"})]})]})},he=({label:e,onClick:t,disabled:r=!1,loading:a=!1,intent:n="none",children:s})=>m("button",{disabled:r,onClick:t,className:C("disabled:bg-secondary-300 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 inline-flex items-center px-4 py-2 border","border-transparent rounded-md shadow-sm text-sm","h-full","font-medium","focus:outline-none focus:ring-2 focus:ring-offset-2","text-white",{"text-white bg-primary-600 hover:bg-primary-700":n==="primary","bg-white border border-gray-300 shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-100":n==="none"}),children:[a&&o("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:o("div",{className:"border-2 border-transparent  border-t-white rounded-full w-4 h-4 animate-spin"})}),e||s]}),Lr=({className:e})=>m("svg",{width:"39",height:"31",viewBox:"0 0 39 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[o("path",{d:"M13.139 17.8109L9.41569 9.84675C8.8792 8.69921 9.19767 7.3446 10.1937 6.53764L17.4618 0.648871C18.5296 -0.21629 20.0807 -0.216291 21.1485 0.648871L28.4166 6.53764C29.4126 7.3446 29.7311 8.69921 29.1946 9.84675L25.4712 17.8109C25.004 18.8103 23.9791 19.4519 22.8499 19.4519H15.7603C14.6312 19.4519 13.6063 18.8103 13.139 17.8109Z",fill:"#29bdae"}),o("path",{d:"M3.96056 28.6602L0.419433 21.0948C-0.118041 19.9465 0.200836 18.5906 1.19816 17.7835L8.10503 12.1941C9.17239 11.3303 10.7218 11.3303 11.7891 12.1941L18.696 17.7835C19.6933 18.5906 20.0122 19.9465 19.4747 21.0948L15.9336 28.6602C15.4661 29.659 14.4415 30.3001 13.3128 30.3001H6.58134C5.45266 30.3001 4.42807 29.659 3.96056 28.6602Z",fill:"#29bdae"}),o("path",{d:"M22.698 29.2987L19.1065 21.1107C18.5885 19.93 18.9629 18.558 20.0148 17.7822L26.9229 12.6869C27.9518 11.928 29.3746 11.928 30.4035 12.6869L37.3116 17.7822C38.3635 18.558 38.7378 19.93 38.2199 21.1107L34.6284 29.2987C34.1758 30.3305 33.1335 31 31.9798 31H25.3466C24.1929 31 23.1506 30.3305 22.698 29.2987Z",fill:"#29bdae"})]}),_t=({isLastItem:e,isFirstItem:t,width:r,header:a,onResizeStart:n})=>{const{label:s,stickyColumn:i}=a;return m("div",{className:C("flex","relative","border-b border-gray-200",{"sticky left-0 z-30 bg-gray-50":i&&t,"flex-1":e}),style:{width:e?void 0:r,boxShadow:"inset 0 -2px 0 rgb(229 231 235)"},children:[o("div",{className:C("w-full","whitespace-nowrap","shrink-0","text-ellipsis","overflow-hidden","px-6 py-3 text-left text-xs font-medium","text-gray-500 uppercase tracking-wider","bg-gray-50"),children:s}),!e&&o(wt,{onMouseDown:n,className:C("w-4 absolute top-0","-right-2 h-full text-gray-300 cursor-col-resize","z-20")})]})},jr=({headers:e,columnsWidth:t,onColumnsWidthChange:r,RowAction:a})=>{const n=p.exports.useRef(t);n.current=t;const s=p.exports.useCallback(i=>{const l=u=>{u.stopImmediatePropagation(),u.preventDefault();const d=[...n.current];d[i]+=u.movementX,r(d)},c=()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",c)};window.addEventListener("mouseup",c),window.addEventListener("mousemove",l)},[r]);return o("div",{className:"bg-gray-50 sticky top-0 z-10",children:m("div",{className:"flex flex-row",children:[e.map((i,l)=>o(_t,{header:i,isLastItem:!a&&l===e.length-1,isFirstItem:l===0,width:t[l],onResizeStart:()=>s(l)},i.label)),a&&o(_t,{header:{label:"",RowCell:()=>o(Re,{})},isLastItem:!0,isFirstItem:!1,onResizeStart:()=>{}})]})})},Ur=({row:e,width:t,stickyColumn:r,RowCell:a})=>o("div",{style:{width:t,minWidth:t,maxWidth:t,boxShadow:r?"inset -1px 0 0 rgb(229 231 235)":void 0},className:C("p-0","shrink-0","overflow-hidden","flex","flex-1",{"sticky left-0 z20 bg-white group-hover:bg-gray-100":r}),children:o(a,M({},e))}),Vr=({row:e,selectedRowId:t,onRowClick:r,headers:a,columnsWidth:n,RowAction:s,rowId:i})=>{const l=t===i;return m("div",{className:C("flex","group","cursor-pointer","hover:bg-black/5","text-gray-700",{"hover:bg-slate-300":l,"bg-slate-300":l,"text-gray-800":l}),onClick:()=>r==null?void 0:r(e),children:[a.map((c,u)=>{const{RowCell:d,stickyColumn:g}=c,w=!s&&u===a.length-1?void 0:n[u];return o(Ur,{width:w,stickyColumn:g,RowCell:d,row:e},c.label)}),s&&o("div",{className:"group-hover:sticky right-0 z20 flex flex-1",children:o(s,M({},e))})]},i)},Nt=({headers:e,data:t,getRowId:r,selectedRowId:a,onRowClick:n,showHeader:s=!0,RowAction:i})=>{const[l,c]=p.exports.useState(()=>e.map(({defaultWidth:u})=>u!=null?u:200));return o("div",{className:"flex flex-col flex-1 overflow-hidden",children:o("div",{className:"shadow border-b border-gray-200 overflow-scroll flex flex-1",children:m("div",{className:"h-fit relative border-b border-black/10 flex-1",children:[s&&o(jr,{columnsWidth:l,headers:e,onColumnsWidthChange:c,RowAction:i}),o("div",{className:"divide-y divide-black/10 w-auto",children:t.map(u=>{const d=r(u);return o(Vr,{rowId:d,row:u,selectedRowId:a,headers:e,columnsWidth:l,RowAction:i,onRowClick:n},d)})})]})})})};function Wr(e){return p.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},e),p.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"}))}function $r(e){return p.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},e),p.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}function Br(e){return p.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},e),p.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"}))}function Fr({breadcrumbs:e,title:t,sections:r}){return m("div",{className:C("h-44 flex-shrink-0 bg-gradient-to-r","to-gray-800 from-secondary-900 flex flex-row"),children:[m("div",{className:"flex flex-col p-4 justify-center items-center",children:[o(Lr,{className:"w-14 h-14 flex-shrink-0"}),o("span",{className:"text-primary-400 text-xl inline-flex",children:"VHPRO"})]}),m("div",{className:"flex flex-1 flex-col justify-center items-center",children:[o("div",{className:"flex whitespace-nowrap space-x-8 flex-1",children:e==null?void 0:e.map(({href:a,label:n,Icon:s})=>m(xt,{to:a,className:C("text-gray-400 flex flex-1 items-end","hover:text-white"),children:[o(s,{className:"w-6 mr-2"})," ",n]}))}),o("div",{className:C("justify-center items-center flex flex-1 text-4xl","text-gray-300 whitespace-nowrap p-2"),children:t}),o("div",{className:"flex justify-center text-secondary-200/50 h-11",children:r==null?void 0:r.map(({label:a,link:n,Icon:s})=>m(fr,{to:n,activeClassName:"text-primary-500 font-normal border-primary-500",className:C("hover:text-gray-300","px-5","border-transparent","border-b-4","flex-inline","whitespace-nowrap","py-2","flex"),children:[s&&o(s,{className:"w-6 mr-2"}),o("span",{children:a})]},a))})]}),m("div",{className:"flex flex-row items-start p-4",children:[m("button",{type:"button",className:"bg-gray-800 rounded-full text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[o("span",{className:"sr-only",children:"View notifications"}),o(Wr,{className:"h-6 w-6","aria-hidden":"true"})]}),o(Br,{className:"w-6 h-6 text-gray-400 ml-3"})]})]})}var Je;(function(e){e.ADMIN="admin",e.VIEW_USER="view_user",e.EDIT_USER="edit_user",e.DELETE_USER="delete_user",e.VIEW_ROLES="view_roles",e.VIEW_ORGANISATIONS="view_organisations",e.VIEW_ORGANISATION="view_organisation",e.EDIT_ORGANISATION="edit_organisation",e.DELETE_ORGANISATION="delete_organisation",e.CREATE_ORGANISATION="create_organisation",e.EDIT_USER_ROLES="edit_user_roles",e.VIEW_ADMIN_ACTIONS="view_admin_actions",e.RESET_USER_PASSWORD="reset_user_password",e.CREATE_PROJECT="create_project",e.VIEW_PROJECTS="view_projects",e.VIEW_PROJECT="view_project",e.EDIT_PROJECT="edit_project",e.DELETE_PROJECT="delete_project",e.VIEW_ORGANISATION_USERS="view_organisation_users",e.CREATE_ORGANISATION_USERS="create_organisation_users",e.DELETE_ORGANISATION_USERS="delete_organisation_users",e.VIEW_PROJECT_USERS="view_project_users",e.INVITE_PROJECT_USERS="invite_project_users",e.VIEW_USER_DASHBOARD="view_user_dashboard",e.VIEW_USER_DASHBOARD_REPORTS="view_user_dashboard_reports",e.EDIT_PROJECT_USER="edit_project_user",e.VIEW_PROJECT_USER="view_project_user",e.DELETE_PROJECT_USER="delete_project_user",e.CREATE_QUESTIONNAIRE_SCHEDULE="create_questionnaire_schedule",e.VIEW_QUESTIONNAIRE_SCHEDULES="view_questionnaire_schedules",e.DELETE_QUESTIONNAIRE_SCHEDULE="delete_questionnaire_schedule",e.VIEW_QUESTIONNAIRE_SCHEDULE="view_questionnaire_schedule",e.EDIT_QUESTIONNAIRE_SCHEDULE="edit_questionnaire_schedule",e.VIEW_PROJECT_STAFF_MEMBER="view_project_staff_member",e.VIEW_PROJECT_STAFF_MEMBERS="view_project_staff_members",e.CREATE_PROJECT_STAFF_MEMBER="create_project_staff_member",e.EDIT_PROJECT_STAFF_MEMBER="edit_project_staff_member",e.DELETE_PROJECT_STAFF_MEMBER="delete_project_staff_member",e.EDIT_PROJECT_QUESTIONNAIRE_SETTINGS="edit_project_questionnaire_settings",e.EDIT_QUESTIONNAIRE_SETTINGS_OUTCOMES_MEASURES="edit_questionnaire_settings_outcomes_measures",e.VIEW_QUESTIONNAIRE_SETTINGS_OUTCOMES_MEASURES="view_questionnaire_settings_outcomes_measures",e.VIEW_PROJECT_USERS_ANONYMISED="view_project_users_anonymised",e.EDIT_PROJECT_USERS="edit_project_users",e.DELETE_PROJECT_USERS="delete_project_users",e.WITHDRAW_CONSENT_PROJECT_USERS="withdraw_consent_project_users",e.VIEW_PROJECT_OVERVIEW="view_project_overview",e.VIEW_PROJECT_DASHBOARD_FILTERS="view_project_dashboard_filters",e.VIEW_USER_DASHBOARD_FILTERS="view_user_dashboard_filters",e.VIEW_USER_DASHBOARD_WEIGHT="view_user_dashboard_weight",e.VIEW_USER_DASHBOARD_CALENDAR="view_user_dashboard_calendar",e.VIEW_USER_DASHBOARD_TEMPERATURE="view_user_dashboard_temperature",e.VIEW_USER_QUESTIONNAIRE_EVENT_RESULTS="view_user_questionnaire_event_results",e.VIEW_USER_SYMPTOM_LOGS="view_user_symptom_logs",e.VIEW_USER_SYMPTOM_RED_FLAGS="view_user_symptom_red_flags",e.VIEW_USER_SYMPTOM_VALIDATION="view_user_symptom_validation",e.VIEW_USER_SYMPTOM_TRENDS="view_user_symptom_trends",e.VIEW_USER_MED_ADHERENCE="view_user_med_adherence",e.VIEW_USER_ACTIVITIES="view_user_activities",e.DATA_EXPORT_IDENTIFIABLE="data_export_identifiable",e.DATA_EXPORT_ANONYMISED="data_export_anonymised",e.VIEW_USER_LISTING_ANONYMISED="view_user_listing_anonymised",e.VIEW_PROJECT_DATA_MED_ADHERENCE="view_project_data_med_adherence",e.VIEW_PROJECT_DATA_QUESTIONNAIRE_BREAKDOWN="view_project_data_questionnaire_breakdown",e.VIEW_PROJECT_DATA_QUESTIONNAIRE_LONGITUDINAL="view_project_data_questionnaire_longitudinal",e.VIEW_PROJECT_DATA_TEMPERATURE="view_project_data_temperature",e.VIEW_PROJECT_DATA_SYMPTOM_LOGS="view_project_data_symptom_logs",e.VIEW_PROJECT_DATA_WEIGHT_TRENDS="view_project_data_weight_trends",e.VIEW_PROJECT_DATA_ACTIVITY_TRENDS="view_project_data_activity_trends",e.VALIDATE_USER_LOG="validate_user_log",e.VIEW_PROJECT_USERS_SYMPTOM_COUNTS="view_project_users_symptom_counts",e.VIEW_PROJECT_ARTICLES="view_project_articles",e.EDIT_DISABLE_MEDS_APPOINTMENT_NOTES="edit_disable_meds_appointment_notes",e.VIEW_DISABLE_MEDS_APPOINTMENT_NOTES="view_disable_meds_appointment_notes",e.VIEW_PROJECT_CONSENT_MESSAGE="view_project_consent_message",e.EDIT_PROJECT_CONSENT_MESSAGE="edit_project_consent_message",e.VIEW_PATIENT_PARTICIPATION_DURATION="view_patient_participation_duration",e.EDIT_PATIENT_PARTICIPATION_DURATION="edit_patient_participation_duration",e.VIEW_QUESTIONNAIRE_TYPES="view_questionnaire_types",e.UPLOAD_PROJECT_IMAGE="upload_project_image"})(Je||(Je={}));const{fromEntries:ze,entries:Ge}=Object;function Hr(e){const t=p.exports.useMemo(()=>ze(Ge(e).map(([i,{defaultValue:l}])=>[i,l])),[e]),[r,a]=p.exports.useState({}),n=p.exports.useMemo(()=>ze(Ge(t).map(([i,l])=>[i,r[i]||l])),[t,r]),s=p.exports.useMemo(()=>ze(Ge(e).map(([i,l])=>[i,{value:n[i],setValue:c=>a(F(M({},n),{[i]:c})),config:l}])),[e,n]);return{values:n,fields:s}}const Ot=e=>{const t=p.exports.useRef(!0);return p.exports.useEffect(()=>(t.current=!0,e==null||e(),()=>{t.current=!1}),[]),t},Qe="token",Ye="refresh_token";function Tt(){return{accessToken:localStorage.getItem(Qe),refreshToken:localStorage.getItem(Ye)}}function qr(){const[e,t]=p.exports.useState(()=>Tt()),{accessToken:r,refreshToken:a}=e,n=p.exports.useCallback(s=>{const{accessToken:i,refreshToken:l}=s;i?localStorage.setItem(Qe,i):localStorage.removeItem(Qe),l?localStorage.setItem(Ye,l):localStorage.removeItem(Ye)},[]);return p.exports.useEffect(()=>{const s=()=>{const i=Tt();i.accessToken===r&&i.refreshToken===a||t(i)};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[r,a]),{tokens:e,updateTokens:n}}function Jr({api:e}){const[t,r]=p.exports.useState(),a=p.exports.useCallback(async()=>{const{data:c}=await e.getUser();c&&r(c)},[e]);Ot(()=>{a()});const n=p.exports.useCallback(async c=>{const{data:u}=await e.login(c),{user:d}=u;r(d)},[e]),s=p.exports.useCallback(async()=>{},[]),i=p.exports.useMemo(()=>!!t,[t]),l=p.exports.useMemo(()=>(t==null?void 0:t.permissions.includes(Je.ADMIN))||!1,[t==null?void 0:t.permissions]);return{signIn:n,signOut:s,user:t,isSigned:i,isAdmin:l}}const Ct=p.exports.createContext(null),St=()=>p.exports.useContext(Ct),It=e=>F(M({},e),{dateCreated:new Date(e.dateCreated),dateUpdated:new Date(e.dateUpdated),diagnosisDate:new Date(e.diagnosisDate),dob:new Date(e.dob)}),Xe=e=>F(M({},e),{dateCreated:new Date(e.dateCreated),dateUpdated:new Date(e.dateUpdated)}),Rt=e=>F(M({},e),{dateCreated:new Date(e.dateCreated),dateUpdated:new Date(e.dateUpdated),startDate:new Date(e.startDate),endDate:e.endDate?new Date(e.endDate):null,organisation:Xe(e.organisation)}),At=e=>F(M({},e),{dateConsentGiven:new Date(e.dateConsentGiven),dateConsentRevoked:new Date(e.dateConsentRevoked),dateCreated:new Date(e.dateCreated),dateUpdated:new Date(e.dateUpdated),dob:e.dob?new Date(e.dob):null,questionnairesEarliestDate:new Date(e.questionnairesEarliestDate),questionnairesLatestDate:new Date(e.questionnairesLatestDate),reportsEarliestDate:new Date(e.reportsEarliestDate),reportsLatestDate:new Date(e.reportsLatestDate)});class Ke{constructor(t,r){qe(this,"fetch");qe(this,"tokens",null);this.apiEndpoint=t,this.onTokensUpdate=r,this.fetch=Ke.createAxios(t,null)}setTokens(t){this.tokens=t,this.fetch=ve.create({baseURL:this.apiEndpoint,headers:{"Content-Type":"application/json",Accept:"*/*","Access-Control-Allow-Origin":"*",Authorization:`Bearer ${t.accessToken}`}}),this.onTokensUpdate(this.tokens)}static createAxios(t,r){return ve.create({baseURL:t,headers:M({"Content-Type":"application/json",Accept:"*/*","Access-Control-Allow-Origin":"*"},r?{Authorization:`Bearer ${r}`}:{})})}async login(t){const r=await ve.post(`${this.apiEndpoint}/auth/login`,t);return this.tokens={accessToken:r.data.accessToken,refreshToken:r.data.refreshToken},this.setTokens(this.tokens),{payload:r,data:F(M({},r.data),{user:It(r.data.user)})}}async getUser(){var r;const t=await ve.get(`${this.apiEndpoint}/current`,{headers:{Authorization:`Bearer ${(r=this.tokens)==null?void 0:r.accessToken}`}});return{payload:t,data:It(t.data)}}async getOrganisations({page:t=1,perPage:r=25,term:a=""}){const n="/admin/organisations",s=await this.fetch.get(n,{params:{_page:t,_perPage:r,term:a}}),i=s.data.map(Xe),l=parseInt(s.headers["x-total-count"]);return{organisations:i,totalCount:l}}async getOrganisation(t){const r=await this.fetch.get(`admin/organisations/${t}`);return{payload:r,data:Xe(r.data)}}async getPrograms({page:t=1,perPage:r=25,term:a="",organisationId:n}){const s=await this.fetch.get("admin/projects",{params:{_page:t,_perPage:r,organisationId:n,term:a}}),i=parseInt(s.headers["x-total-count"]),l=s.data.map(Rt);return{totalCount:i,programs:l}}async getProgram(t){const r=await this.fetch.get(`admin/projects/${t}`);return{payload:r,data:Rt(r.data)}}async refetchAccessToken(){var r,a;const t=await ve.post(`${this.apiEndpoint}/auth/refresh`,{},{headers:{Authorization:`Bearer ${(r=this.tokens)==null?void 0:r.refreshToken}`}});return this.setTokens({accessToken:t.data.accessToken,refreshToken:((a=this.tokens)==null?void 0:a.refreshToken)||null}),{payload:t}}async getPatients({page:t=1,perPage:r=25,term:a="",consentedOnly:n=!1,programId:s}){const i=await this.fetch.get(`/admin/projects/${s}/users`,{params:{_page:t,_perPage:r,term:a,consentedOnly:n}});return{totalCount:parseInt(i.headers["x-total-count"]),patients:i.data.map(At)}}async getPatient({participantId:t,programId:r}){const a=await this.fetch.get(`admin/projects/${r}/users/${t}`);return{payload:a,data:At(a.data)}}}const zr=1e3*60,Gr=e=>{const{tokens:t,updateTokens:r}=qr(),a=p.exports.useMemo(()=>new Ke(e.apiEndpoint,r),[e.apiEndpoint,r]);p.exports.useEffect(()=>{a.setTokens(t);const{accessToken:s}=t;if(!s)return;const{exp:i}=vr(s),l=i*1e3-zr,c=new Date().getTime();if(l<c){a.refetchAccessToken();return}const u=setTimeout(()=>a.refetchAccessToken(),l-c);return()=>clearTimeout(u)},[a,t]);const n=!!t.accessToken;return{api:a,hasToken:n}},kt=p.exports.createContext(null),z=()=>p.exports.useContext(kt).api,Qr=({page:e,rowsPerPage:t,totalCount:r,setPage:a,setRowsPerPage:n})=>{const s=p.exports.useCallback(i=>{a(1),n(i)},[a,n]);return o(me.Footer,{children:m("div",{className:"flex flex-col px-4 py-2 bg-gray-50",children:[m("span",{className:"text-sm text-gray-700 flex-shrink-0 mb-2",children:["Showing"," ",o("span",{className:"font-medium",children:(e-1)*t+1})," to"," ",o("span",{className:"font-medium",children:Math.min(e*t,r)})," ","of ",o("span",{className:"font-medium",children:r})," results"]}),m("div",{className:"flex flex-row justify-items-stretch",children:[o(er,{items:[{id:"5",label:"5 rows",value:5},{id:"10",label:"10 rows",value:10},{id:"25",label:"25 rows",value:25},{id:"50",label:"50 rows",value:50},{id:"100",label:"100 rows",value:100}],selected:`${t}`,onChange:({value:i})=>s(i)}),o("div",{className:"flex flex-1 justify-end",children:o(Dt,{showActivePageOnly:!0,pagesCount:Math.ceil(r/t),currentPage:e,onPageChange:a})})]})]})})},ae=({programId:e,program:t,children:r,selectedParticipantId:a})=>{const n=`/programs/${e}`,s=Ae(),[i,l]=p.exports.useState(""),c=p.exports.useMemo(()=>[{label:"Patient enrolment",link:`${n}/enrolment`,Icon:hr},{label:"Reports",link:`${n}/reports`,Icon:mr},{label:"Questionnaires",link:`${n}/questionnaires`,Icon:gr},{label:"Team",link:`${n}/team`,Icon:wr},{label:"Settings",link:`${n}/settings`,Icon:xr}],[n]),u=z(),[d,g]=p.exports.useState(1),[h,w]=p.exports.useState(25),{data:x}=k([e,"patients",d,h,i],()=>u.getPatients({programId:e,perPage:h,page:d,term:i}),{keepPreviousData:!0}),{patients:f,totalCount:v}=x||{patients:[],totalCount:0},E=p.exports.useCallback(()=>({id:b})=>s.push(`/programs/${e}/participants/${b}`),[s,e]),O=p.exports.useMemo(()=>[{label:"Patient Name",RowCell:({firstName:b,lastName:N,severeSymptomsCount:_,id:S,email:I})=>m("div",{className:"relative group px-6 py-4 whitespace-nowrap flex-1 flex flex-col",children:[a===S&&o("div",{className:"absolute h-full w-1 bg-primary-500 left-0 top-0"}),o("div",{children:o(Ve,{text:`${b} ${N}`,term:i})}),o("div",{className:"text-gray-400 text-sm",children:o(Ve,{text:I,term:i})}),!!_&&o("div",{className:"absolute h-full right-0 top-0 flex items-center pr-4",children:o("div",{className:"bg-red-400 rounded-full px-2 py-1 text-sm flex items-center h-fit w-fit",children:m("div",{className:"flex whitespace-nowrap space-x-1",children:[o($r,{className:"w-4"}),o("span",{children:_}),o("span",{className:"hidden group-hover:block",children:"SEVERE SYMPTOMPS"})]})})})]})}],[i,a]),T=p.exports.useCallback(({id:b})=>b,[]),y=p.exports.useMemo(()=>[{Icon:yt,href:"/organisaitons",label:"Organisations"},{Icon:yr,href:`/organisations/${t==null?void 0:t.organisation.organisationId}`,label:`${t==null?void 0:t.organisation.name} organisation`}],[t==null?void 0:t.organisation.name,t==null?void 0:t.organisation.organisationId]);return o(ke,{navigation:!0,title:m("div",{className:"flex flex-col justify-center items-center",children:[`${t==null?void 0:t.name} program`,o("div",{className:"text-sm text-gray-400",children:t==null?void 0:t.description})]}),sections:c,breadcrumbs:y,children:m("div",{className:"flex flex-row flex-1 h-full overflow-hidden",children:[o("div",{className:C("flex flex-col w-96 border-r","border-slate-30 shrink-0 border-secondary-200"),children:m("div",{className:"flex flex-col overflow-hidden h-full",children:[m("div",{className:C("h-16 justify-center items-center","flex text-secondary-900/40 flex-shrink-0"),children:[o(Er,{className:"w-6 mr-2"}),"PARTICIPANTS"]}),o("div",{className:"pb-4 px-4",children:m("div",{className:"relative rounded-md shadow-sm",children:[o("div",{className:C("absolute inset-y-0 left-0 pl-3","flex items-center pointer-events-none"),children:o(fe,{className:"text-gray-500 w-5"})}),o("input",{type:"text",value:i,onChange:({currentTarget:b})=>{l(b.value)},placeholder:"search for participant",className:C("focus:ring-primary-500","focus:border-primary-500 block w-full pl-10 pr-12","border-gray-300 rounded-md")})]})}),o("div",{className:"px-4 overflow-hidden flex h-full",children:o(De,{selectedRowId:a,onRowClick:E,headers:O,data:f,getRowId:T,page:d,onPageChange:g,rowsPerPage:h,onRowsPerPageChange:w,totalRows:v,showHeader:!1,footer:o(Qr,{page:d,rowsPerPage:h,setPage:g,setRowsPerPage:w,totalCount:v})})})]})}),o("div",{className:"flex flex-col flex-1  w-full h-full overflow-hidden",children:r})]})})},Yr=({children:e})=>o("div",{children:e}),me=({children:e,roundedBottom:t=!0})=>o("div",{className:C("rounded-t-lg bg-white flex flex-1 flex-col","shadow border-slate-300 border overflow-hidden",{"rounded-b-lg":t}),children:e});me.Footer=Yr;const Ze=({label:e,active:t,onClick:r})=>o("button",{onClick:r,className:C("bg-white","z-10","relative inline-flex items-center","px-4 py-2 border text-sm font-medium",{"bg-primary-300":t}),children:e}),Dt=({pagesCount:e,currentPage:t,onPageChange:r,showActivePageOnly:a})=>{const n=7,s=p.exports.useMemo(()=>{if(a)return o(Ze,{label:t});if(e<=n)return Array.from({length:e}).map((u,d)=>o(Ze,{label:d+1,active:e!==1&&t===d+1,onClick:()=>r(d+1)},d));const i=t-Math.floor(n/2),l=i<=1?1:i+7>=e?e-n+1:i,c=Array.from({length:n}).map((u,d)=>d+l);return c[0]=1,c[1]=c[1]!==2?"...":c[1],c[c.length-1]=e,c[c.length-2]=c[c.length-2]!==e-1?"...":c[c.length-2],c.map((u,d)=>o(Ze,{label:u,active:u===t,onClick:()=>{typeof u=="number"&&r(u)}},`${u}_${d}`))},[t,r,e,a]);return o("div",{children:m("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[o("button",{disabled:t===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",onClick:()=>r(t-1),children:o(Et,{className:"h-5 w-5","aria-hidden":"true"})}),s,o("button",{disabled:t===e,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",onClick:()=>r(t+1),children:o(br,{className:"h-5 w-5","aria-hidden":"true"})})]})})},De=({headers:e,data:t,selectedRowId:r,page:a,rowsPerPage:n,totalRows:s,getRowId:i,onRowClick:l,RowAction:c,onPageChange:u,onRowsPerPageChange:d,footer:g,showHeader:h})=>{const w=Math.ceil(s/n),x=p.exports.useCallback(f=>{u(1),d(f)},[u,d]);return m(me,{roundedBottom:!1,children:[o(Nt,{onRowClick:l,headers:e,data:t,getRowId:i,selectedRowId:r,RowAction:c,showHeader:h}),g||o(me.Footer,{children:m("div",{className:"flex-1 flex items-center justify-between flex-wrap px-4 py-2 bg-gray-50",children:[o("div",{className:"flex flex-1 flex-shrink-0",children:m("span",{className:"text-sm text-gray-700 flex-shrink-0",children:["Showing"," ",o("span",{className:"font-medium",children:(a-1)*n+1})," ","to"," ",o("span",{className:"font-medium",children:Math.min(a*n,s)})," ","of ",o("span",{className:"font-medium",children:s})," results"]})}),m("div",{className:"space-x-4 flex flex-shrink-0 flex-1 justify-end",children:[o(er,{items:[{id:"5",label:"5 rows",value:5},{id:"10",label:"10 rows",value:10},{id:"25",label:"25 rows",value:25},{id:"50",label:"50 rows",value:50},{id:"100",label:"100 rows",value:100}],selected:`${n}`,onChange:({value:f})=>x(f)}),o(Dt,{pagesCount:w,currentPage:a,onPageChange:u})]})]})})]})};var Mt=function(t){return t.reduce(function(r,a){var n=a[0],s=a[1];return r[n]=s,r},{})},Pt=typeof window!="undefined"&&window.document&&window.document.createElement?p.exports.useLayoutEffect:p.exports.useEffect,P="top",U="bottom",V="right",L="left",et="auto",ge=[P,U,V,L],ne="start",we="end",Xr="clippingParents",Lt="viewport",xe="popper",Kr="reference",jt=ge.reduce(function(e,t){return e.concat([t+"-"+ne,t+"-"+we])},[]),Ut=[].concat(ge,[et]).reduce(function(e,t){return e.concat([t,t+"-"+ne,t+"-"+we])},[]),Zr="beforeRead",ea="read",ta="afterRead",ra="beforeMain",aa="main",na="afterMain",oa="beforeWrite",sa="write",ia="afterWrite",la=[Zr,ea,ta,ra,aa,na,oa,sa,ia];function H(e){return e?(e.nodeName||"").toLowerCase():null}function B(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function oe(e){var t=B(e).Element;return e instanceof t||e instanceof Element}function W(e){var t=B(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Vt(e){if(typeof ShadowRoot=="undefined")return!1;var t=B(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function ca(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var a=t.styles[r]||{},n=t.attributes[r]||{},s=t.elements[r];!W(s)||!H(s)||(Object.assign(s.style,a),Object.keys(n).forEach(function(i){var l=n[i];l===!1?s.removeAttribute(i):s.setAttribute(i,l===!0?"":l)}))})}function da(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(a){var n=t.elements[a],s=t.attributes[a]||{},i=Object.keys(t.styles.hasOwnProperty(a)?t.styles[a]:r[a]),l=i.reduce(function(c,u){return c[u]="",c},{});!W(n)||!H(n)||(Object.assign(n.style,l),Object.keys(s).forEach(function(c){n.removeAttribute(c)}))})}}var ua={name:"applyStyles",enabled:!0,phase:"write",fn:ca,effect:da,requires:["computeStyles"]};function q(e){return e.split("-")[0]}var te=Math.max,Me=Math.min,se=Math.round;function ie(e,t){t===void 0&&(t=!1);var r=e.getBoundingClientRect(),a=1,n=1;if(W(e)&&t){var s=e.offsetHeight,i=e.offsetWidth;i>0&&(a=se(r.width)/i||1),s>0&&(n=se(r.height)/s||1)}return{width:r.width/a,height:r.height/n,top:r.top/n,right:r.right/a,bottom:r.bottom/n,left:r.left/a,x:r.left/a,y:r.top/n}}function tt(e){var t=ie(e),r=e.offsetWidth,a=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:a}}function Wt(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Vt(r)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function J(e){return B(e).getComputedStyle(e)}function pa(e){return["table","td","th"].indexOf(H(e))>=0}function Q(e){return((oe(e)?e.ownerDocument:e.document)||window.document).documentElement}function Pe(e){return H(e)==="html"?e:e.assignedSlot||e.parentNode||(Vt(e)?e.host:null)||Q(e)}function $t(e){return!W(e)||J(e).position==="fixed"?null:e.offsetParent}function fa(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&W(e)){var a=J(e);if(a.position==="fixed")return null}for(var n=Pe(e);W(n)&&["html","body"].indexOf(H(n))<0;){var s=J(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function ye(e){for(var t=B(e),r=$t(e);r&&pa(r)&&J(r).position==="static";)r=$t(r);return r&&(H(r)==="html"||H(r)==="body"&&J(r).position==="static")?t:r||fa(e)||t}function rt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ee(e,t,r){return te(e,Me(t,r))}function va(e,t,r){var a=Ee(e,t,r);return a>r?r:a}function Bt(){return{top:0,right:0,bottom:0,left:0}}function Ft(e){return Object.assign({},Bt(),e)}function Ht(e,t){return t.reduce(function(r,a){return r[a]=e,r},{})}var ha=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Ft(typeof t!="number"?t:Ht(t,ge))};function ma(e){var t,r=e.state,a=e.name,n=e.options,s=r.elements.arrow,i=r.modifiersData.popperOffsets,l=q(r.placement),c=rt(l),u=[L,V].indexOf(l)>=0,d=u?"height":"width";if(!(!s||!i)){var g=ha(n.padding,r),h=tt(s),w=c==="y"?P:L,x=c==="y"?U:V,f=r.rects.reference[d]+r.rects.reference[c]-i[c]-r.rects.popper[d],v=i[c]-r.rects.reference[c],E=ye(s),O=E?c==="y"?E.clientHeight||0:E.clientWidth||0:0,T=f/2-v/2,y=g[w],b=O-h[d]-g[x],N=O/2-h[d]/2+T,_=Ee(y,N,b),S=c;r.modifiersData[a]=(t={},t[S]=_,t.centerOffset=_-N,t)}}function ga(e){var t=e.state,r=e.options,a=r.element,n=a===void 0?"[data-popper-arrow]":a;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||!Wt(t.elements.popper,n)||(t.elements.arrow=n))}var wa={name:"arrow",enabled:!0,phase:"main",fn:ma,effect:ga,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function le(e){return e.split("-")[1]}var xa={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ya(e){var t=e.x,r=e.y,a=window,n=a.devicePixelRatio||1;return{x:se(t*n)/n||0,y:se(r*n)/n||0}}function qt(e){var t,r=e.popper,a=e.popperRect,n=e.placement,s=e.variation,i=e.offsets,l=e.position,c=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,g=e.isFixed,h=d===!0?ya(i):typeof d=="function"?d(i):i,w=h.x,x=w===void 0?0:w,f=h.y,v=f===void 0?0:f,E=i.hasOwnProperty("x"),O=i.hasOwnProperty("y"),T=L,y=P,b=window;if(u){var N=ye(r),_="clientHeight",S="clientWidth";if(N===B(r)&&(N=Q(r),J(N).position!=="static"&&l==="absolute"&&(_="scrollHeight",S="scrollWidth")),N=N,n===P||(n===L||n===V)&&s===we){y=U;var I=g&&b.visualViewport?b.visualViewport.height:N[_];v-=I-a.height,v*=c?1:-1}if(n===L||(n===P||n===U)&&s===we){T=V;var R=g&&b.visualViewport?b.visualViewport.width:N[S];x-=R-a.width,x*=c?1:-1}}var A=Object.assign({position:l},u&&xa);if(c){var D;return Object.assign({},A,(D={},D[y]=O?"0":"",D[T]=E?"0":"",D.transform=(b.devicePixelRatio||1)<=1?"translate("+x+"px, "+v+"px)":"translate3d("+x+"px, "+v+"px, 0)",D))}return Object.assign({},A,(t={},t[y]=O?v+"px":"",t[T]=E?x+"px":"",t.transform="",t))}function Ea(e){var t=e.state,r=e.options,a=r.gpuAcceleration,n=a===void 0?!0:a,s=r.adaptive,i=s===void 0?!0:s,l=r.roundOffsets,c=l===void 0?!0:l,u={placement:q(t.placement),variation:le(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,qt(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,qt(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var ba={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ea,data:{}},Le={passive:!0};function _a(e){var t=e.state,r=e.instance,a=e.options,n=a.scroll,s=n===void 0?!0:n,i=a.resize,l=i===void 0?!0:i,c=B(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach(function(d){d.addEventListener("scroll",r.update,Le)}),l&&c.addEventListener("resize",r.update,Le),function(){s&&u.forEach(function(d){d.removeEventListener("scroll",r.update,Le)}),l&&c.removeEventListener("resize",r.update,Le)}}var Na={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:_a,data:{}},Oa={left:"right",right:"left",bottom:"top",top:"bottom"};function je(e){return e.replace(/left|right|bottom|top/g,function(t){return Oa[t]})}var Ta={start:"end",end:"start"};function Jt(e){return e.replace(/start|end/g,function(t){return Ta[t]})}function at(e){var t=B(e),r=t.pageXOffset,a=t.pageYOffset;return{scrollLeft:r,scrollTop:a}}function nt(e){return ie(Q(e)).left+at(e).scrollLeft}function Ca(e){var t=B(e),r=Q(e),a=t.visualViewport,n=r.clientWidth,s=r.clientHeight,i=0,l=0;return a&&(n=a.width,s=a.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=a.offsetLeft,l=a.offsetTop)),{width:n,height:s,x:i+nt(e),y:l}}function Sa(e){var t,r=Q(e),a=at(e),n=(t=e.ownerDocument)==null?void 0:t.body,s=te(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),i=te(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),l=-a.scrollLeft+nt(e),c=-a.scrollTop;return J(n||r).direction==="rtl"&&(l+=te(r.clientWidth,n?n.clientWidth:0)-s),{width:s,height:i,x:l,y:c}}function ot(e){var t=J(e),r=t.overflow,a=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+a)}function zt(e){return["html","body","#document"].indexOf(H(e))>=0?e.ownerDocument.body:W(e)&&ot(e)?e:zt(Pe(e))}function be(e,t){var r;t===void 0&&(t=[]);var a=zt(e),n=a===((r=e.ownerDocument)==null?void 0:r.body),s=B(a),i=n?[s].concat(s.visualViewport||[],ot(a)?a:[]):a,l=t.concat(i);return n?l:l.concat(be(Pe(i)))}function st(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ia(e){var t=ie(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function Gt(e,t){return t===Lt?st(Ca(e)):oe(t)?Ia(t):st(Sa(Q(e)))}function Ra(e){var t=be(Pe(e)),r=["absolute","fixed"].indexOf(J(e).position)>=0,a=r&&W(e)?ye(e):e;return oe(a)?t.filter(function(n){return oe(n)&&Wt(n,a)&&H(n)!=="body"&&(r?J(n).position!=="static":!0)}):[]}function Aa(e,t,r){var a=t==="clippingParents"?Ra(e):[].concat(t),n=[].concat(a,[r]),s=n[0],i=n.reduce(function(l,c){var u=Gt(e,c);return l.top=te(u.top,l.top),l.right=Me(u.right,l.right),l.bottom=Me(u.bottom,l.bottom),l.left=te(u.left,l.left),l},Gt(e,s));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function Qt(e){var t=e.reference,r=e.element,a=e.placement,n=a?q(a):null,s=a?le(a):null,i=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,c;switch(n){case P:c={x:i,y:t.y-r.height};break;case U:c={x:i,y:t.y+t.height};break;case V:c={x:t.x+t.width,y:l};break;case L:c={x:t.x-r.width,y:l};break;default:c={x:t.x,y:t.y}}var u=n?rt(n):null;if(u!=null){var d=u==="y"?"height":"width";switch(s){case ne:c[u]=c[u]-(t[d]/2-r[d]/2);break;case we:c[u]=c[u]+(t[d]/2-r[d]/2);break}}return c}function _e(e,t){t===void 0&&(t={});var r=t,a=r.placement,n=a===void 0?e.placement:a,s=r.boundary,i=s===void 0?Xr:s,l=r.rootBoundary,c=l===void 0?Lt:l,u=r.elementContext,d=u===void 0?xe:u,g=r.altBoundary,h=g===void 0?!1:g,w=r.padding,x=w===void 0?0:w,f=Ft(typeof x!="number"?x:Ht(x,ge)),v=d===xe?Kr:xe,E=e.rects.popper,O=e.elements[h?v:d],T=Aa(oe(O)?O:O.contextElement||Q(e.elements.popper),i,c),y=ie(e.elements.reference),b=Qt({reference:y,element:E,strategy:"absolute",placement:n}),N=st(Object.assign({},E,b)),_=d===xe?N:y,S={top:T.top-_.top+f.top,bottom:_.bottom-T.bottom+f.bottom,left:T.left-_.left+f.left,right:_.right-T.right+f.right},I=e.modifiersData.offset;if(d===xe&&I){var R=I[n];Object.keys(S).forEach(function(A){var D=[V,U].indexOf(A)>=0?1:-1,Y=[P,U].indexOf(A)>=0?"y":"x";S[A]+=R[Y]*D})}return S}function ka(e,t){t===void 0&&(t={});var r=t,a=r.placement,n=r.boundary,s=r.rootBoundary,i=r.padding,l=r.flipVariations,c=r.allowedAutoPlacements,u=c===void 0?Ut:c,d=le(a),g=d?l?jt:jt.filter(function(x){return le(x)===d}):ge,h=g.filter(function(x){return u.indexOf(x)>=0});h.length===0&&(h=g);var w=h.reduce(function(x,f){return x[f]=_e(e,{placement:f,boundary:n,rootBoundary:s,padding:i})[q(f)],x},{});return Object.keys(w).sort(function(x,f){return w[x]-w[f]})}function Da(e){if(q(e)===et)return[];var t=je(e);return[Jt(e),t,Jt(t)]}function Ma(e){var t=e.state,r=e.options,a=e.name;if(!t.modifiersData[a]._skip){for(var n=r.mainAxis,s=n===void 0?!0:n,i=r.altAxis,l=i===void 0?!0:i,c=r.fallbackPlacements,u=r.padding,d=r.boundary,g=r.rootBoundary,h=r.altBoundary,w=r.flipVariations,x=w===void 0?!0:w,f=r.allowedAutoPlacements,v=t.options.placement,E=q(v),O=E===v,T=c||(O||!x?[je(v)]:Da(v)),y=[v].concat(T).reduce(function(re,G){return re.concat(q(G)===et?ka(t,{placement:G,boundary:d,rootBoundary:g,padding:u,flipVariations:x,allowedAutoPlacements:f}):G)},[]),b=t.rects.reference,N=t.rects.popper,_=new Map,S=!0,I=y[0],R=0;R<y.length;R++){var A=y[R],D=q(A),Y=le(A)===ne,ce=[P,U].indexOf(D)>=0,de=ce?"width":"height",j=_e(t,{placement:A,boundary:d,rootBoundary:g,altBoundary:h,padding:u}),$=ce?Y?V:L:Y?U:P;b[de]>N[de]&&($=je($));var Oe=je($),X=[];if(s&&X.push(j[D]<=0),l&&X.push(j[$]<=0,j[Oe]<=0),X.every(function(re){return re})){I=A,S=!1;break}_.set(A,X)}if(S)for(var Te=x?3:1,We=function(G){var pe=y.find(function(Se){var K=_.get(Se);if(K)return K.slice(0,G).every(function($e){return $e})});if(pe)return I=pe,"break"},ue=Te;ue>0;ue--){var Ce=We(ue);if(Ce==="break")break}t.placement!==I&&(t.modifiersData[a]._skip=!0,t.placement=I,t.reset=!0)}}var Pa={name:"flip",enabled:!0,phase:"main",fn:Ma,requiresIfExists:["offset"],data:{_skip:!1}};function Yt(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Xt(e){return[P,V,U,L].some(function(t){return e[t]>=0})}function La(e){var t=e.state,r=e.name,a=t.rects.reference,n=t.rects.popper,s=t.modifiersData.preventOverflow,i=_e(t,{elementContext:"reference"}),l=_e(t,{altBoundary:!0}),c=Yt(i,a),u=Yt(l,n,s),d=Xt(c),g=Xt(u);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:g},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":g})}var ja={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:La};function Ua(e,t,r){var a=q(e),n=[L,P].indexOf(a)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,i=s[0],l=s[1];return i=i||0,l=(l||0)*n,[L,V].indexOf(a)>=0?{x:l,y:i}:{x:i,y:l}}function Va(e){var t=e.state,r=e.options,a=e.name,n=r.offset,s=n===void 0?[0,0]:n,i=Ut.reduce(function(d,g){return d[g]=Ua(g,t.rects,s),d},{}),l=i[t.placement],c=l.x,u=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[a]=i}var Wa={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Va};function $a(e){var t=e.state,r=e.name;t.modifiersData[r]=Qt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Ba={name:"popperOffsets",enabled:!0,phase:"read",fn:$a,data:{}};function Fa(e){return e==="x"?"y":"x"}function Ha(e){var t=e.state,r=e.options,a=e.name,n=r.mainAxis,s=n===void 0?!0:n,i=r.altAxis,l=i===void 0?!1:i,c=r.boundary,u=r.rootBoundary,d=r.altBoundary,g=r.padding,h=r.tether,w=h===void 0?!0:h,x=r.tetherOffset,f=x===void 0?0:x,v=_e(t,{boundary:c,rootBoundary:u,padding:g,altBoundary:d}),E=q(t.placement),O=le(t.placement),T=!O,y=rt(E),b=Fa(y),N=t.modifiersData.popperOffsets,_=t.rects.reference,S=t.rects.popper,I=typeof f=="function"?f(Object.assign({},t.rects,{placement:t.placement})):f,R=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(!!N){if(s){var Y,ce=y==="y"?P:L,de=y==="y"?U:V,j=y==="y"?"height":"width",$=N[y],Oe=$+v[ce],X=$-v[de],Te=w?-S[j]/2:0,We=O===ne?_[j]:S[j],ue=O===ne?-S[j]:-_[j],Ce=t.elements.arrow,re=w&&Ce?tt(Ce):{width:0,height:0},G=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Bt(),pe=G[ce],Se=G[de],K=Ee(0,_[j],re[j]),$e=T?_[j]/2-Te-K-pe-R.mainAxis:We-K-pe-R.mainAxis,rr=T?-_[j]/2+Te+K+Se+R.mainAxis:ue+K+Se+R.mainAxis,Be=t.elements.arrow&&ye(t.elements.arrow),ar=Be?y==="y"?Be.clientTop||0:Be.clientLeft||0:0,lt=(Y=A==null?void 0:A[y])!=null?Y:0,nr=$+$e-lt-ar,or=$+rr-lt,ct=Ee(w?Me(Oe,nr):Oe,$,w?te(X,or):X);N[y]=ct,D[y]=ct-$}if(l){var dt,sr=y==="x"?P:L,ir=y==="x"?U:V,Z=N[b],Ie=b==="y"?"height":"width",ut=Z+v[sr],pt=Z-v[ir],Fe=[P,L].indexOf(E)!==-1,ft=(dt=A==null?void 0:A[b])!=null?dt:0,vt=Fe?ut:Z-_[Ie]-S[Ie]-ft+R.altAxis,ht=Fe?Z+_[Ie]+S[Ie]-ft-R.altAxis:pt,mt=w&&Fe?va(vt,Z,ht):Ee(w?vt:ut,Z,w?ht:pt);N[b]=mt,D[b]=mt-Z}t.modifiersData[a]=D}}var qa={name:"preventOverflow",enabled:!0,phase:"main",fn:Ha,requiresIfExists:["offset"]};function Ja(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function za(e){return e===B(e)||!W(e)?at(e):Ja(e)}function Ga(e){var t=e.getBoundingClientRect(),r=se(t.width)/e.offsetWidth||1,a=se(t.height)/e.offsetHeight||1;return r!==1||a!==1}function Qa(e,t,r){r===void 0&&(r=!1);var a=W(t),n=W(t)&&Ga(t),s=Q(t),i=ie(e,n),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!r)&&((H(t)!=="body"||ot(s))&&(l=za(t)),W(t)?(c=ie(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=nt(s))),{x:i.left+l.scrollLeft-c.x,y:i.top+l.scrollTop-c.y,width:i.width,height:i.height}}function Ya(e){var t=new Map,r=new Set,a=[];e.forEach(function(s){t.set(s.name,s)});function n(s){r.add(s.name);var i=[].concat(s.requires||[],s.requiresIfExists||[]);i.forEach(function(l){if(!r.has(l)){var c=t.get(l);c&&n(c)}}),a.push(s)}return e.forEach(function(s){r.has(s.name)||n(s)}),a}function Xa(e){var t=Ya(e);return la.reduce(function(r,a){return r.concat(t.filter(function(n){return n.phase===a}))},[])}function Ka(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Za(e){var t=e.reduce(function(r,a){var n=r[a.name];return r[a.name]=n?Object.assign({},n,a,{options:Object.assign({},n.options,a.options),data:Object.assign({},n.data,a.data)}):a,r},{});return Object.keys(t).map(function(r){return t[r]})}var Kt={placement:"bottom",modifiers:[],strategy:"absolute"};function Zt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function en(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,a=r===void 0?[]:r,n=t.defaultOptions,s=n===void 0?Kt:n;return function(l,c,u){u===void 0&&(u=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Kt,s),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},g=[],h=!1,w={state:d,setOptions:function(E){var O=typeof E=="function"?E(d.options):E;f(),d.options=Object.assign({},s,d.options,O),d.scrollParents={reference:oe(l)?be(l):l.contextElement?be(l.contextElement):[],popper:be(c)};var T=Xa(Za([].concat(a,d.options.modifiers)));return d.orderedModifiers=T.filter(function(y){return y.enabled}),x(),w.update()},forceUpdate:function(){if(!h){var E=d.elements,O=E.reference,T=E.popper;if(!!Zt(O,T)){d.rects={reference:Qa(O,ye(T),d.options.strategy==="fixed"),popper:tt(T)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(R){return d.modifiersData[R.name]=Object.assign({},R.data)});for(var y=0;y<d.orderedModifiers.length;y++){if(d.reset===!0){d.reset=!1,y=-1;continue}var b=d.orderedModifiers[y],N=b.fn,_=b.options,S=_===void 0?{}:_,I=b.name;typeof N=="function"&&(d=N({state:d,options:S,name:I,instance:w})||d)}}}},update:Ka(function(){return new Promise(function(v){w.forceUpdate(),v(d)})}),destroy:function(){f(),h=!0}};if(!Zt(l,c))return w;w.setOptions(u).then(function(v){!h&&u.onFirstUpdate&&u.onFirstUpdate(v)});function x(){d.orderedModifiers.forEach(function(v){var E=v.name,O=v.options,T=O===void 0?{}:O,y=v.effect;if(typeof y=="function"){var b=y({state:d,name:E,instance:w,options:T}),N=function(){};g.push(b||N)}})}function f(){g.forEach(function(v){return v()}),g=[]}return w}}var tn=[Na,Ba,ba,ua,Wa,Pa,qa,wa,ja],rn=en({defaultModifiers:tn}),an=typeof Element!="undefined",nn=typeof Map=="function",on=typeof Set=="function",sn=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Ue(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,a,n;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(a=r;a--!=0;)if(!Ue(e[a],t[a]))return!1;return!0}var s;if(nn&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(a=s.next()).done;)if(!t.has(a.value[0]))return!1;for(s=e.entries();!(a=s.next()).done;)if(!Ue(a.value[1],t.get(a.value[0])))return!1;return!0}if(on&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(a=s.next()).done;)if(!t.has(a.value[0]))return!1;return!0}if(sn&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(a=r;a--!=0;)if(e[a]!==t[a])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(n=Object.keys(e),r=n.length,r!==Object.keys(t).length)return!1;for(a=r;a--!=0;)if(!Object.prototype.hasOwnProperty.call(t,n[a]))return!1;if(an&&e instanceof Element)return!1;for(a=r;a--!=0;)if(!((n[a]==="_owner"||n[a]==="__v"||n[a]==="__o")&&e.$$typeof)&&!Ue(e[n[a]],t[n[a]]))return!1;return!0}return e!==e&&t!==t}var ln=function(t,r){try{return Ue(t,r)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}},cn=[],dn=function(t,r,a){a===void 0&&(a={});var n=p.exports.useRef(null),s={onFirstUpdate:a.onFirstUpdate,placement:a.placement||"bottom",strategy:a.strategy||"absolute",modifiers:a.modifiers||cn},i=p.exports.useState({styles:{popper:{position:s.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),l=i[0],c=i[1],u=p.exports.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(w){var x=w.state,f=Object.keys(x.elements);c({styles:Mt(f.map(function(v){return[v,x.styles[v]||{}]})),attributes:Mt(f.map(function(v){return[v,x.attributes[v]]}))})},requires:["computeStyles"]}},[]),d=p.exports.useMemo(function(){var h={onFirstUpdate:s.onFirstUpdate,placement:s.placement,strategy:s.strategy,modifiers:[].concat(s.modifiers,[u,{name:"applyStyles",enabled:!1}])};return ln(n.current,h)?n.current||h:(n.current=h,h)},[s.onFirstUpdate,s.placement,s.strategy,s.modifiers,u]),g=p.exports.useRef();return Pt(function(){g.current&&g.current.setOptions(d)},[d]),Pt(function(){if(!(t==null||r==null)){var h=a.createPopper||rn,w=h(t,r,d);return g.current=w,function(){w.destroy(),g.current=null}}},[t,r,a.createPopper]),{state:g.current?g.current.state:null,styles:l.styles,attributes:l.attributes,update:g.current?g.current.update:null,forceUpdate:g.current?g.current.forceUpdate:null}};function un(e,t){if(console.log(e,t),!e)return!1;let r=t;for(;r;){if(r===e)return!0;r=r.parentElement}return!1}const er=({selected:e,items:t,onChange:r})=>{const[a,n]=p.exports.useState(null),[s,i]=p.exports.useState(null),l=p.exports.useRef(s);l.current=s;const{styles:c,attributes:u}=dn(a,s),d=p.exports.useMemo(()=>t.find(({id:f})=>f===e)||t[0],[t,e]),[g,h]=p.exports.useState(!1),w=p.exports.useCallback(()=>{const f=({target:v})=>{const E=un(l.current,v);console.log(E),!E&&h(!1)};return document.addEventListener("mousedown",f),h(!0),()=>document.removeEventListener("mousedown",f)},[]),x=p.exports.useCallback(f=>{h(!1),r(f)},[r]);return m("div",{className:"relative",children:[o("div",{ref:n,className:"h-full",children:o(he,{onClick:w,children:m("div",{className:"flex-nowrap flex",children:[o("span",{className:"whitespace-nowrap",children:d.label})," ",o(_r,{className:"ml-1 w-4"})]})})}),g&&o("div",F(M({ref:i,style:M({},c.popper)},u.popper),{children:o("div",{className:"whitespace-nowrap flex flex-col border rounded-md bg-white shadow-md m-2",children:t.map(f=>{const{id:v,label:E}=f;return o("button",{className:"p-4 hover:bg-gray-100",onClick:()=>x(f),children:o("span",{className:"whitespace-nowrap",children:E})},v)})})}))]})},Ve=({text:e,term:t})=>{if(!t)return o(Re,{children:e});const r=e.toLowerCase().indexOf(t.toLowerCase());if(r===-1)return o(Re,{children:e});const a=e.slice(0,r),n=e.slice(r,r+t.length),s=e.slice(r+t.length);return m(Re,{children:[a,n&&o("span",{className:"bg-yellow-200",children:n}),s]})};var pn="https://kresli.github.io/vhpro/assets/logo.0bd15c82.svg";const fn=({form:e,onSubmit:t,label:r="Submit"})=>{const[a,n]=p.exports.useState(!1),s=Ot(),i=p.exports.useCallback(async()=>{n(!0),await t(e.values),s.current&&n(!1)},[e.values,s,t]);return o(he,{loading:a,disabled:a,label:r,onClick:i})},vn=()=>{const{signIn:e}=St(),t=Hr(p.exports.useMemo(()=>({email:{type:"email",label:"Email",defaultValue:""},password:{type:"password",label:"Password",defaultValue:""}}),[]));return p.exports.useCallback(()=>{},[]),o(ke,{children:o("div",{className:"flex justify-center items-center h-full",children:m("div",{className:"w-96 space-y-4 flex flex-col items-center",children:[o("img",{src:pn,alt:"logo",className:"w-24 h-24"}),o("span",{children:"VinehealthPRO"}),o(bt,{field:t.fields.email}),o(bt,{field:t.fields.password}),o("div",{className:"pt-4 flex w-full",children:o(fn,{label:"Sign in",form:t,onSubmit:e})})]})})})};class hn{constructor(t){this.config=t}get apiEndpoint(){return this.config.apiEndpoint}}const mn=()=>{const e=z(),t=Ae(),[r,a]=p.exports.useState({rowsPerPage:25,page:1}),{page:n,rowsPerPage:s}=r,{data:i}=k([n,s],()=>e.getOrganisations({page:n,perPage:s})),{organisations:l,totalCount:c}=i||{organisations:[],totalCount:0},u=p.exports.useMemo(()=>[{label:"Organisation name",stickyColumn:!0,RowCell:({name:h})=>o("div",{className:"px-6 py-4 whitespace-nowrap",children:h})},{label:"created",RowCell:({dateCreated:h})=>o("div",{className:"px-6 py-4 whitespace-nowrap",children:h.toLocaleDateString()})},{label:"projects",RowCell:({projectsCount:h})=>o("div",{className:"px-6 py-4 whitespace-nowrap",children:h})},{label:"users",RowCell:({usersCount:h})=>o("div",{className:"px-6 py-4 whitespace-nowrap",children:h})}],[]),d=p.exports.useCallback(({organisationId:h})=>t.push(`/organisations/${h}`),[t]);return o(ke,{navigation:!0,title:"Organisations",children:m("div",{className:"flex flex-1 h-full overflow-hidden px-4 pt-4 flex-col",children:[m("div",{className:"mb-4 flex flex-row space-x-4  rounded-t-lg",children:[o("div",{className:"flex flex-col flex-1 w-full",children:m("div",{className:"relative rounded-md shadow-sm",children:[o("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o(fe,{className:"text-gray-500 w-5"})}),o("input",{type:"text",value:"",onChange:({currentTarget:h})=>{},placeholder:"",className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12  border-gray-300 rounded-md"})]})}),o("div",{children:o(he,{label:"ADD ORGANISATION",intent:"primary",onClick:()=>{}})})]}),o(De,{page:n,data:l,rowsPerPage:s,totalRows:c,headers:u,onRowClick:d,getRowId:({organisationId:h})=>h,onPageChange:h=>a(F(M({},r),{page:h})),onRowsPerPageChange:h=>a(F(M({},r),{rowsPerPage:h}))})]})})},tr=({label:e})=>o("div",{children:o("div",{className:C("inline-flex py-1 px-2 text-sm rounded-full","h-fit m-1",{"bg-red-300":e==="EQ5D","bg-cyan-300":e==="FACTG","bg-violet-300":e==="QLQC30","bg-lime-300":e==="BN20"}),children:e})}),gn=()=>{const e=z(),{organisationId:t}=ee(),{data:r}=k(["organisation",t],async()=>(await e.getOrganisation(t)).data),a=`/organisations/${t}`,n=Ae(),{data:s}=k(["programs",t],()=>e.getPrograms({organisationId:t})),i=p.exports.useCallback(({projectId:f})=>n.push(`/programs/${f}`),[n]),[l,c]=p.exports.useState(1),[u,d]=p.exports.useState(25),g=p.exports.useMemo(()=>[{label:"Project name",stickyColumn:!0,defaultWidth:300,RowCell:({name:f,imageThumbnailUrl:v})=>m("div",{className:"flex space-x-4 items-center px-6 py-4 whitespace-nowrap overflow-hidden",children:[o("div",{className:"w-14 h-14 border bg-slate-50 rounded-md shrink-0",style:{backgroundImage:`url(${v})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),o("div",{className:"text-ellipsis overflow-hidden",children:f})]})},{label:"Questionnaire types",defaultWidth:300,RowCell:({availableQuestionnaireTypes:f})=>o("div",{className:"flex flex-wrap h-full items-center p-2",children:f.map(v=>o(tr,{label:v},v))})},{label:"consented patients",RowCell:({consentedPatientsCount:f})=>o("div",{className:"px-6 py-4 whitespace-nowrap overflow-hidden text-ellipsis",children:f})},{label:"created",defaultWidth:150,RowCell:({dateCreated:f})=>o("div",{className:"px-6 py-4 whitespace-nowrap overflow-hidden text-ellipsis",children:f.toLocaleDateString()})},{label:"updated",defaultWidth:150,RowCell:({dateUpdated:f})=>o("div",{className:"px-6 py-4 whitespace-nowrap overflow-hidden text-ellipsis",children:f.toLocaleDateString()})},{label:"end date",defaultWidth:150,RowCell:({endDate:f})=>o("div",{className:"px-6 py-4 whitespace-nowrap  overflow-hidden text-ellipsis",children:f==null?void 0:f.toLocaleDateString()})},{label:"free text",defaultWidth:120,RowCell:({disableFreeText:f})=>o("div",{className:"px-6 py-4 whitespace-nowrap",children:f&&o(Nr,{className:"w-6 text-green-500"})})},{label:"users",RowCell:({usersCount:f})=>o("div",{className:"px-6 py-4 whitespace-nowrap",children:f})}],[]),{totalCount:h,programs:w}=s||{programs:[],totalCount:0},x=p.exports.useCallback(({projectId:f})=>f,[]);return o(ke,{navigation:!0,title:`${r==null?void 0:r.name} organisation`,breadcrumbs:[{href:"/organisations",label:"Organisations",Icon:yt}],sections:[{label:"Programs",link:`${a}/programs`},{label:"Settings",link:`${a}/settings`}],children:m("div",{className:"flex flex-1 h-full overflow-hidden px-4 pt-4 flex-col",children:[m("div",{className:"mb-4 flex flex-row space-x-4 rounded-t-lg",children:[o("div",{className:"flex flex-col flex-1 w-full",children:m("div",{className:"relative rounded-md shadow-sm",children:[o("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o(fe,{className:"text-gray-500 w-5"})}),o("input",{type:"text",value:"",onChange:({currentTarget:f})=>{},placeholder:"",className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12  border-gray-300 rounded-md"})]})}),o("div",{children:o(he,{label:"ADD PROGRAM",intent:"primary",onClick:()=>{}})})]}),o(De,{page:l,rowsPerPage:u,totalRows:h,headers:g,data:w,getRowId:x,onPageChange:c,onRowsPerPageChange:d,onRowClick:i})]})})},wn=Array.from({length:999}).map((e,t)=>({id:t,label:`${t} row`})),xn=()=>o("div",{className:"flex overflow-hidden flex-col h-full",children:o(Nt,{data:wn,getRowId:({id:e})=>`${e}`,headers:[{label:"",RowCell:({label:e})=>o("div",{children:e})}],showHeader:!1,onPageRequest:e=>console.log("next")})}),yn=()=>{const e=z(),{programId:t,participantId:r}=ee(),{data:a}=k([t],async()=>(await e.getProgram(t)).data),{data:n}=k([t,r],async()=>(await e.getPatient({participantId:r,programId:t})).data),{data:s}=k([t,"patients"],async()=>(await e.getPatients({programId:t})).data);return o(ae,{programId:t,participants:s||[],program:a,selectedParticipantId:r,children:m("div",{className:"flex flex-col outline-hidden overflow-hidden w-ful h-full",children:[o("div",{className:"flex shrink-0",children:m("div",{className:"text-4xl flex flex-1 border-b border-gray-600",children:[n==null?void 0:n.firstName," ",n==null?void 0:n.lastName]})}),m("div",{className:"flex flex-row w-full overflow-hidden h-full",children:[o("div",{className:"flex w-60 flex-col border-r border-gray-600 h-full overflow-hidden",children:o(xn,{})}),o("div",{className:"flex flex-1",children:"content"})]})]})})},En=()=>{const e=z(),{programId:t}=ee(),{data:r}=k([t],async()=>(await e.getProgram(t)).data),{data:a}=k([t,"patients"],async()=>(await e.getPatients({programId:t})).data);return o(ae,{programId:t,program:r,participants:a||[],children:"questionnaires"})},Ne=({children:e,title:t})=>o("div",{children:m(me,{children:[o("div",{className:C("border-b border-gray-200","text-lg","p-4"),children:t}),e]})}),bn=()=>{const e=z(),{programId:t}=ee(),{data:r}=k([t],async()=>(await e.getProgram(t)).data);return o(ae,{programId:t,program:r,children:m("div",{className:"p-4 grid gap-4 grid-cols-2 auto",style:{gridTemplateColumns:"repeat(auto-fit, minmax(600px, 1fr))"},children:[o(Ne,{title:"General",children:m("div",{className:"flex flex-col p-4",children:["Start date: ",r==null?void 0:r.startDate.toLocaleDateString(),r==null?void 0:r.availableQuestionnaireTypes.map(a=>o(tr,{label:a})),r==null?void 0:r.consentedPatientsCount," Consented patients"]})}),o(Ne,{title:"Temperature trends"}),o(Ne,{title:"Medication adherence"}),o(Ne,{title:"Most logged symptoms"}),o(Ne,{title:"Symptoms Trends"})]})})},_n=()=>{const e=z(),{programId:t}=ee(),{data:r}=k([t],async()=>(await e.getProgram(t)).data),{data:a}=k([t,"patients"],async()=>(await e.getPatients({programId:t})).data);return o(ae,{programId:t,program:r,participants:a||[],children:"team"})};var it;(function(e){e.CONSENT_GIVEN="Consented",e.AWAITING_CONSENT="Invite sent"})(it||(it={}));const Nn=({consentGiven:e})=>o("div",{className:"text-sm mr-4 justify-end flex flex-1 flex-row items-center",children:m("div",{className:C("inline-flex","whitespace-nowrap","border rounded-md border-slate-300","h-fit"),children:[!e&&m("button",{onClick:()=>{},className:C("bg-gray-100 p-2 hover:bg-gray-200","rounded-l-md flex items-center"),children:[o(Tr,{className:"w-4 mr-1"}),"Resend invite"]}),o("button",{onClick:()=>{},className:C("p-2 bg-gray-100 hover:bg-gray-200",{"rounded-r-md":!0,"rounded-l-md":e,"border-l":!e}),children:o(wt,{className:"w-6"})})]})}),On=()=>{const{programId:e}=ee(),t=z(),r=Ae(),[a,n]=p.exports.useState(1),[s,i]=p.exports.useState(25),[l,c]=p.exports.useState(""),{data:u}=k([e],async()=>(await t.getProgram(e)).data),{data:d}=k([e,"patients",a,s,l],()=>t.getPatients({programId:e,perPage:s,page:a,term:l}),{keepPreviousData:!0}),{patients:g,totalCount:h}=d||{patients:[],totalCount:0},w=p.exports.useMemo(()=>[{label:"Patient Name",stickyColumn:!0,RowCell:({firstName:v,lastName:E})=>o("div",{className:C("px-6 py-4 whitespace-nowrap","text-ellipsis overflow-hidden"),children:o(Ve,{text:`${v} ${E}`,term:l})})},{label:"status",defaultWidth:150,RowCell:({consentStatus:v})=>o("div",{className:"px-6 py-4 whitespace-nowrap",children:o("div",{className:C("inline-flex rounded-full py-1 px-3 text-sm",{"bg-green-300":v==="CONSENT_GIVEN","bg-yellow-300":v==="AWAITING_CONSENT"}),children:it[v]})})},{label:"email",defaultWidth:300,RowCell:({email:v})=>o("div",{className:C("text-gray-500 px-6 py-4","whitespace-nowrap overflow-hidden text-ellipsis"),children:o(Ve,{text:v,term:l})})}],[l]),x=p.exports.useCallback(({id:v})=>r.push(`/programs/${e}/participants/${v}`),[r,e]),f=p.exports.useCallback(({id:v})=>v,[]);return o(ae,{programId:e,program:u,children:m("div",{className:"flex flex-1 h-full overflow-hidden px-4 pt-4 flex-col",children:[m("div",{className:"flex flex-row space-x-4 rounded-t-lg mb-4",children:[o("div",{className:"p-2 text-secondary-900",children:o(xt,{to:`/organisations/${u==null?void 0:u.organisation.organisationId}`,children:o(Et,{className:"w-6"})})}),o("div",{className:"flex flex-col flex-1 w-full",children:m("div",{className:"relative rounded-md shadow-sm",children:[o("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o(fe,{className:"text-gray-500 w-5"})}),o("input",{type:"text",value:l,onChange:({currentTarget:v})=>c(v.value),placeholder:"Search for patient",className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12  border-gray-300 rounded-md"})]})}),o("div",{children:m(he,{intent:"primary",onClick:()=>{},children:[o(Or,{className:"w-6 mr-2"}),"INVITE NEW PATIENT"]})})]}),o(De,{onPageChange:n,page:a,rowsPerPage:s,totalRows:h,onRowsPerPageChange:i,onRowClick:x,headers:w,data:g,getRowId:f,RowAction:Nn})]})})},Tn=()=>{const e=z(),{programId:t}=ee(),{data:r}=k([t],async()=>(await e.getProgram(t)).data),{data:a}=k([t,"patients"],async()=>(await e.getPatients({programId:t})).data);return o(ae,{programId:t,program:r,participants:a||[],children:"settings"})},Cn=new hn({apiEndpoint:"https://staging.api.vinehealth.ai/api/v1"}),Sn=e=>e.filter(Boolean).map(([r,a,n=!0])=>typeof a=="string"?o(Cr,{exact:n,path:r,to:a},r):o(Sr,{exact:n,path:r,component:a},r)),In=p.exports.memo(()=>{const{isSigned:e}=St(),t=Sn([!e&&["/login",vn],!e&&["/*","/login",!1],["/login","/"],["/","/organisations"],["/organisations/:organisationId","/organisations/:organisationId/programs"],["/organisations",mn],["/organisations/:organisationId/programs",gn],["/programs/:programId","/programs/:programId/enrolment"],["/programs/:programId/enrolment",On],["/programs/:programId/reports",bn],["/programs/:programId/questionnaires",En],["/programs/:programId/team",_n],["/programs/:programId/settings",Tn],["/programs/:programId/participants/:participantId",yn],["*",()=>o("div",{children:"404"}),!1]]);return o(Ir,{children:o(Rr,{children:t})})}),Rn=new Ar,An=p.exports.memo(()=>{const e=Gr(Cn),t=Jr(e),{isSigned:r}=t,{hasToken:a}=e;return a&&!r?o("div",{children:"loading"}):o(Ct.Provider,{value:t,children:o(kt.Provider,{value:e,children:o(kr,{client:Rn,children:o(In,{})})})})});Dr.render(o(Mr.StrictMode,{children:o(An,{})}),document.getElementById("root"));
