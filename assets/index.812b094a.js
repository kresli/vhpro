var vr=Object.defineProperty,hr=Object.defineProperties;var mr=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var bt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable;var Qe=(e,t,r)=>t in e?vr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,R=(e,t)=>{for(var r in t||(t={}))bt.call(t,r)&&Qe(e,r,t[r]);if(Ae)for(var r of Ae(t))Et.call(t,r)&&Qe(e,r,t[r]);return e},M=(e,t)=>hr(e,mr(t));var ve=(e,t)=>{var r={};for(var a in e)bt.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&Ae)for(var a of Ae(e))t.indexOf(a)<0&&Et.call(e,a)&&(r[a]=e[a]);return r};var Ye=(e,t,r)=>(Qe(e,typeof t!="symbol"?t+"":t,r),r);import{j as h,a as s,S as he,c as S,r as u,F as De,D as _t,o as gr,q as wr,L as Nt,N as xr,u as J,b as ke,d as yr,C as br,B as Er,U as _r,e as Nr,f as Ot,O as Or,g as Tr,h as Tt,i as Sr,k as Rr,l as St,m as ee,n as Cr,p as Ir,P as Ar,R as Dr,s as kr,t as Mr,v as Lr,Q as Pr,w as jr,x as Ur,y as Vr}from"./vendor.8c97d32d.js";const Wr=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}};Wr();const Me=({navigation:e,children:t,title:r,breadcrumbs:a,sections:n})=>h("div",{className:"bg-secondary-600/10 w-screen h-screen flex  overflow-hidden flex-col",children:[e&&s(Kr,{breadcrumbs:a,title:r,sections:n}),s("div",{className:"flex flex-col w-full h-full overflow-hidden",children:s("div",{className:"flex overflow-hidden flex-1 flex-col",children:t})})]}),Rt=({field:e})=>{const{setValue:t,value:r,config:a}=e,{label:n,type:o,placeholder:i}=a;return h("div",{className:"flex flex-col flex-1 w-full",children:[n&&s("span",{className:"block text-sm font-medium text-gray-700",children:n}),h("div",{className:"relative rounded-md shadow-sm",children:[s("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s(he,{className:"text-gray-500 w-5"})}),s("input",{type:o,value:r,onChange:({currentTarget:l})=>t(l.value),placeholder:i,className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12  border-gray-300 rounded-md"})]})]})},me=({label:e,onClick:t,disabled:r=!1,loading:a=!1,intent:n="none",children:o})=>h("button",{disabled:r,onClick:t,className:S("disabled:bg-secondary-300 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 inline-flex items-center px-4 py-2 border","border-transparent rounded-md shadow-sm text-sm","h-full","font-medium","focus:outline-none focus:ring-2 focus:ring-offset-2","text-white",{"text-white bg-primary-600 hover:bg-primary-700":n==="primary","bg-white border border-gray-300 shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-100":n==="none"}),children:[a&&s("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:s("div",{className:"border-2 border-transparent  border-t-white rounded-full w-4 h-4 animate-spin"})}),e||o]}),$r=({className:e})=>h("svg",{width:"39",height:"31",viewBox:"0 0 39 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[s("path",{d:"M13.139 17.8109L9.41569 9.84675C8.8792 8.69921 9.19767 7.3446 10.1937 6.53764L17.4618 0.648871C18.5296 -0.21629 20.0807 -0.216291 21.1485 0.648871L28.4166 6.53764C29.4126 7.3446 29.7311 8.69921 29.1946 9.84675L25.4712 17.8109C25.004 18.8103 23.9791 19.4519 22.8499 19.4519H15.7603C14.6312 19.4519 13.6063 18.8103 13.139 17.8109Z",fill:"#29bdae"}),s("path",{d:"M3.96056 28.6602L0.419433 21.0948C-0.118041 19.9465 0.200836 18.5906 1.19816 17.7835L8.10503 12.1941C9.17239 11.3303 10.7218 11.3303 11.7891 12.1941L18.696 17.7835C19.6933 18.5906 20.0122 19.9465 19.4747 21.0948L15.9336 28.6602C15.4661 29.659 14.4415 30.3001 13.3128 30.3001H6.58134C5.45266 30.3001 4.42807 29.659 3.96056 28.6602Z",fill:"#29bdae"}),s("path",{d:"M22.698 29.2987L19.1065 21.1107C18.5885 19.93 18.9629 18.558 20.0148 17.7822L26.9229 12.6869C27.9518 11.928 29.3746 11.928 30.4035 12.6869L37.3116 17.7822C38.3635 18.558 38.7378 19.93 38.2199 21.1107L34.6284 29.2987C34.1758 30.3305 33.1335 31 31.9798 31H25.3466C24.1929 31 23.1506 30.3305 22.698 29.2987Z",fill:"#29bdae"})]}),Ct=({isLastItem:e,isFirstItem:t,width:r,header:a,onResizeStart:n})=>{const{label:o,stickyColumn:i}=a;return h("div",{className:S("flex","relative","border-b border-gray-200",{"sticky left-0 z-30 bg-gray-50":i&&t,"flex-1":e}),style:{width:e?void 0:r,boxShadow:"inset 0 -2px 0 rgb(229 231 235)"},children:[s("div",{className:S("w-full","whitespace-nowrap","shrink-0","text-ellipsis","overflow-hidden","px-6 py-3 text-left text-xs font-medium","text-gray-500 uppercase tracking-wider","bg-gray-50"),children:o}),!e&&s(_t,{onMouseDown:n,className:S("w-4 absolute top-0","-right-2 h-full text-gray-300 cursor-col-resize","z-20")})]})},Br=({headers:e,columnsWidth:t,onColumnsWidthChange:r,RowAction:a})=>{const n=u.exports.useRef(t);n.current=t;const o=u.exports.useCallback(i=>{const l=f=>{f.stopImmediatePropagation(),f.preventDefault();const c=[...n.current];c[i]+=f.movementX,r(c)},d=()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",d)};window.addEventListener("mouseup",d),window.addEventListener("mousemove",l)},[r]);return s("div",{className:"bg-gray-50 sticky top-0 z-10",children:h("div",{className:"flex flex-row",children:[e.map((i,l)=>s(Ct,{header:i,isLastItem:!a&&l===e.length-1,isFirstItem:l===0,width:t[l],onResizeStart:()=>o(l)},i.label)),a&&s(Ct,{header:{label:"",RowCell:()=>s(De,{})},isLastItem:!0,isFirstItem:!1,onResizeStart:()=>{}})]})})},Fr=({row:e,width:t,stickyColumn:r,RowCell:a,isEvenRow:n})=>s("div",{style:{width:t,minWidth:t,maxWidth:t,boxShadow:r?"inset -1px 0 0 rgb(229 231 235)":void 0},className:S("p-0","shrink-0","overflow-hidden","flex","flex-1","group-hover:bg-gray-100",{"sticky left-0 z20 bg-white":r,"bg-gray-50":!n}),children:s(a,R({},e))}),Hr=({row:e,selectedRowId:t,onRowClick:r,headers:a,columnsWidth:n,RowAction:o,rowId:i,isEvenRow:l})=>{const d=t===i;return h("div",{className:S("flex","group","cursor-pointer","hover:bg-black/5","text-gray-700",{"hover:bg-slate-300":d,"bg-slate-300":d,"text-gray-800":d}),onClick:()=>r==null?void 0:r(e),children:[a.map((f,c)=>{const{RowCell:m,stickyColumn:g}=f,v=!o&&c===a.length-1?void 0:n[c];return s(Fr,{width:v,stickyColumn:g,RowCell:m,row:e,isEvenRow:l},f.label)}),o&&s("div",{className:"group-hover:sticky right-0 z20 flex flex-1",children:s(o,R({},e))})]},i)},Le=({headers:e,data:t,getRowId:r,selectedRowId:a,onRowClick:n,showHeader:o=!0,RowAction:i})=>{const[l,d]=u.exports.useState(()=>e.map(({defaultWidth:f})=>f!=null?f:200));return s("div",{className:"flex flex-col flex-1 overflow-hidden",children:s("div",{className:"shadow border-b border-gray-200 overflow-auto flex flex-1",children:h("div",{className:"h-fit relative border-b border-black/10 flex-1",children:[o&&s(Br,{columnsWidth:l,headers:e,onColumnsWidthChange:d,RowAction:i}),s("div",{className:"divide-y divide-black/10 w-auto",children:t.map((f,c)=>{const m=r(f);return s(Hr,{rowId:m,row:f,selectedRowId:a,headers:e,columnsWidth:l,RowAction:i,onRowClick:n,isEvenRow:c%2==0},m)})})]})})})};function Gr(e){return u.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},e),u.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"}))}function qr(e){return u.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},e),u.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}function Jr(e){return u.exports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},e),u.exports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"}))}var Xe;(function(e){e.ADMIN="admin",e.VIEW_USER="view_user",e.EDIT_USER="edit_user",e.DELETE_USER="delete_user",e.VIEW_ROLES="view_roles",e.VIEW_ORGANISATIONS="view_organisations",e.VIEW_ORGANISATION="view_organisation",e.EDIT_ORGANISATION="edit_organisation",e.DELETE_ORGANISATION="delete_organisation",e.CREATE_ORGANISATION="create_organisation",e.EDIT_USER_ROLES="edit_user_roles",e.VIEW_ADMIN_ACTIONS="view_admin_actions",e.RESET_USER_PASSWORD="reset_user_password",e.CREATE_PROJECT="create_project",e.VIEW_PROJECTS="view_projects",e.VIEW_PROJECT="view_project",e.EDIT_PROJECT="edit_project",e.DELETE_PROJECT="delete_project",e.VIEW_ORGANISATION_USERS="view_organisation_users",e.CREATE_ORGANISATION_USERS="create_organisation_users",e.DELETE_ORGANISATION_USERS="delete_organisation_users",e.VIEW_PROJECT_USERS="view_project_users",e.INVITE_PROJECT_USERS="invite_project_users",e.VIEW_USER_DASHBOARD="view_user_dashboard",e.VIEW_USER_DASHBOARD_REPORTS="view_user_dashboard_reports",e.EDIT_PROJECT_USER="edit_project_user",e.VIEW_PROJECT_USER="view_project_user",e.DELETE_PROJECT_USER="delete_project_user",e.CREATE_QUESTIONNAIRE_SCHEDULE="create_questionnaire_schedule",e.VIEW_QUESTIONNAIRE_SCHEDULES="view_questionnaire_schedules",e.DELETE_QUESTIONNAIRE_SCHEDULE="delete_questionnaire_schedule",e.VIEW_QUESTIONNAIRE_SCHEDULE="view_questionnaire_schedule",e.EDIT_QUESTIONNAIRE_SCHEDULE="edit_questionnaire_schedule",e.VIEW_PROJECT_STAFF_MEMBER="view_project_staff_member",e.VIEW_PROJECT_STAFF_MEMBERS="view_project_staff_members",e.CREATE_PROJECT_STAFF_MEMBER="create_project_staff_member",e.EDIT_PROJECT_STAFF_MEMBER="edit_project_staff_member",e.DELETE_PROJECT_STAFF_MEMBER="delete_project_staff_member",e.EDIT_PROJECT_QUESTIONNAIRE_SETTINGS="edit_project_questionnaire_settings",e.EDIT_QUESTIONNAIRE_SETTINGS_OUTCOMES_MEASURES="edit_questionnaire_settings_outcomes_measures",e.VIEW_QUESTIONNAIRE_SETTINGS_OUTCOMES_MEASURES="view_questionnaire_settings_outcomes_measures",e.VIEW_PROJECT_USERS_ANONYMISED="view_project_users_anonymised",e.EDIT_PROJECT_USERS="edit_project_users",e.DELETE_PROJECT_USERS="delete_project_users",e.WITHDRAW_CONSENT_PROJECT_USERS="withdraw_consent_project_users",e.VIEW_PROJECT_OVERVIEW="view_project_overview",e.VIEW_PROJECT_DASHBOARD_FILTERS="view_project_dashboard_filters",e.VIEW_USER_DASHBOARD_FILTERS="view_user_dashboard_filters",e.VIEW_USER_DASHBOARD_WEIGHT="view_user_dashboard_weight",e.VIEW_USER_DASHBOARD_CALENDAR="view_user_dashboard_calendar",e.VIEW_USER_DASHBOARD_TEMPERATURE="view_user_dashboard_temperature",e.VIEW_USER_QUESTIONNAIRE_EVENT_RESULTS="view_user_questionnaire_event_results",e.VIEW_USER_SYMPTOM_LOGS="view_user_symptom_logs",e.VIEW_USER_SYMPTOM_RED_FLAGS="view_user_symptom_red_flags",e.VIEW_USER_SYMPTOM_VALIDATION="view_user_symptom_validation",e.VIEW_USER_SYMPTOM_TRENDS="view_user_symptom_trends",e.VIEW_USER_MED_ADHERENCE="view_user_med_adherence",e.VIEW_USER_ACTIVITIES="view_user_activities",e.DATA_EXPORT_IDENTIFIABLE="data_export_identifiable",e.DATA_EXPORT_ANONYMISED="data_export_anonymised",e.VIEW_USER_LISTING_ANONYMISED="view_user_listing_anonymised",e.VIEW_PROJECT_DATA_MED_ADHERENCE="view_project_data_med_adherence",e.VIEW_PROJECT_DATA_QUESTIONNAIRE_BREAKDOWN="view_project_data_questionnaire_breakdown",e.VIEW_PROJECT_DATA_QUESTIONNAIRE_LONGITUDINAL="view_project_data_questionnaire_longitudinal",e.VIEW_PROJECT_DATA_TEMPERATURE="view_project_data_temperature",e.VIEW_PROJECT_DATA_SYMPTOM_LOGS="view_project_data_symptom_logs",e.VIEW_PROJECT_DATA_WEIGHT_TRENDS="view_project_data_weight_trends",e.VIEW_PROJECT_DATA_ACTIVITY_TRENDS="view_project_data_activity_trends",e.VALIDATE_USER_LOG="validate_user_log",e.VIEW_PROJECT_USERS_SYMPTOM_COUNTS="view_project_users_symptom_counts",e.VIEW_PROJECT_ARTICLES="view_project_articles",e.EDIT_DISABLE_MEDS_APPOINTMENT_NOTES="edit_disable_meds_appointment_notes",e.VIEW_DISABLE_MEDS_APPOINTMENT_NOTES="view_disable_meds_appointment_notes",e.VIEW_PROJECT_CONSENT_MESSAGE="view_project_consent_message",e.EDIT_PROJECT_CONSENT_MESSAGE="edit_project_consent_message",e.VIEW_PATIENT_PARTICIPATION_DURATION="view_patient_participation_duration",e.EDIT_PATIENT_PARTICIPATION_DURATION="edit_patient_participation_duration",e.VIEW_QUESTIONNAIRE_TYPES="view_questionnaire_types",e.UPLOAD_PROJECT_IMAGE="upload_project_image"})(Xe||(Xe={}));function zr(e,t){const r=u.exports.useRef(t);r.current=t;const a=1e3*60;u.exports.useEffect(()=>{if(!e)return;const{exp:n}=gr(e),o=n*1e3-a,i=new Date().getTime();if(o<i){r.current();return}const l=setTimeout(r.current,o-i);return()=>clearTimeout(l)},[e,a])}function Qr(e,[t,r]){const[a,n]=u.exports.useState(),o=u.exports.useMemo(()=>!!t.accessToken&&!a,[t.accessToken,a]);u.exports.useEffect(()=>{t.accessToken&&!a&&e.getUser().then(({user:c})=>n(c))},[e,t.accessToken,a]),zr(t.accessToken,async()=>{const{accessToken:c}=await e.refetchAccessToken();r(M(R({},t),{accessToken:c}))});const i=u.exports.useCallback(async c=>{const{user:m,tokens:g}=await e.login(c);r(g),n(m)},[e,r]),l=u.exports.useCallback(async()=>{r({accessToken:null,refreshToken:null}),e.logout()},[e,r]),d=u.exports.useMemo(()=>!!a,[a]),f=u.exports.useMemo(()=>(a==null?void 0:a.permissions.includes(Xe.ADMIN))||!1,[a==null?void 0:a.permissions]);return{signIn:i,signOut:l,user:a,isAdmin:f,loading:o,isSigned:d}}const It=u.exports.createContext(null),Ke=()=>u.exports.useContext(It),At=e=>M(R({},e),{dateCreated:new Date(e.dateCreated),dateUpdated:new Date(e.dateUpdated),diagnosisDate:new Date(e.diagnosisDate),dob:new Date(e.dob)}),Ze=e=>M(R({},e),{dateCreated:new Date(e.dateCreated),dateUpdated:new Date(e.dateUpdated)}),Dt=e=>M(R({},e),{dateCreated:new Date(e.dateCreated),dateUpdated:new Date(e.dateUpdated),startDate:new Date(e.startDate),endDate:e.endDate?new Date(e.endDate):null,organisation:Ze(e.organisation)}),kt=e=>M(R({},e),{dateConsentGiven:new Date(e.dateConsentGiven),dateConsentRevoked:new Date(e.dateConsentRevoked),dateCreated:new Date(e.dateCreated),dateUpdated:new Date(e.dateUpdated),dob:e.dob?new Date(e.dob):null,questionnairesEarliestDate:new Date(e.questionnairesEarliestDate),questionnairesLatestDate:new Date(e.questionnairesLatestDate),reportsEarliestDate:new Date(e.reportsEarliestDate),reportsLatestDate:new Date(e.reportsLatestDate)});class Pe{constructor(t,r){Ye(this,"apiEndpoint");this.accessToken=r,this.apiEndpoint=t.replace(/\/$/,"")}getUrl(t){const r=t[0]==="/"?t:`/${t}`;return`${this.apiEndpoint}${r}`}post(t,r,a){return Pe.post(this.getUrl(t),r,R({token:this.accessToken||""},a))}get(t,r){return Pe.get(this.getUrl(t),R({token:this.accessToken||""},r))}static async post(t,r,a){const n=new Headers({"Content-Type":"application/json"});return(a==null?void 0:a.token)&&n.set("Authorization",`Bearer ${a.token}`),fetch(t,{method:"POST",referrerPolicy:"no-referrer",headers:n,body:JSON.stringify(r||{})}).then(async o=>({data:await o.json(),headers:o.headers}))}static async get(t,r){const a=new Headers({"Content-Type":"application/json"});(r==null?void 0:r.token)&&a.set("Authorization",`Bearer ${r.token}`);const n=(r==null?void 0:r.params)?wr.stringify(r==null?void 0:r.params):"",o=n?`?${n}`:"";return fetch(`${t}${o}`,{method:"GET",referrerPolicy:"no-referrer",headers:a}).then(async i=>({data:await i.json(),headers:i.headers}))}}class Yr{constructor(t,r){Ye(this,"fetch");this.apiEndpoint=t,this.tokens=r,this.fetch=new Pe(this.apiEndpoint,this.tokens.accessToken)}get hasAccessToken(){return!!this.tokens.accessToken}async login(t){const{data:{accessToken:r,refreshToken:a,user:n}}=await this.fetch.post("/auth/login",t);return{tokens:{accessToken:r,refreshToken:a},user:At(n)}}async getUser(){const t=await this.fetch.get("/current");return{user:At(t.data)}}async getOrganisations({page:t=1,perPage:r=25,term:a=""}){const n="/admin/organisations",o=await this.fetch.get(n,{params:{_page:t,_perPage:r,term:a}}),i=o.data.map(Ze),l=parseInt(o.headers.get("x-total-count")||"");return{organisations:i,totalCount:l}}async getOrganisation(t){const r=await this.fetch.get(`admin/organisations/${t}`);return{payload:r,data:Ze(r.data)}}async getPrograms({page:t=1,perPage:r=25,term:a="",organisationId:n}){const o=await this.fetch.get("admin/projects",{params:{_page:t,_perPage:r,organisationId:n,term:a}}),i=parseInt(o.headers.get("x-total-count")||""),l=o.data.map(Dt);return{totalCount:i,programs:l}}async getProgram(t){const r=await this.fetch.get(`admin/projects/${t}`);return{payload:r,data:Dt(r.data)}}async refetchAccessToken(){const{refreshToken:t}=this.tokens;if(!t)return{accessToken:null};const{data:{accessToken:r}}=await this.fetch.post("/auth/refresh",{},{token:t});return{accessToken:r}}async getPatients({page:t=1,perPage:r=25,term:a="",consentedOnly:n=!1,programId:o}){const i=await this.fetch.get(`/admin/projects/${o}/users`,{params:{_page:t,_perPage:r,term:a,consentedOnly:n}});return{totalCount:parseInt(i.headers.get("x-total-count")||""),patients:i.data.map(kt)}}async getPatient({participantId:t,programId:r}){const a=await this.fetch.get(`admin/projects/${r}/users/${t}`);return{payload:a,data:kt(a.data)}}async getMedications({programId:t,startDate:r,endDate:a}){const{data:n}=await this.fetch.get(`/pro-dashboard/projects/${t}/reports/medication`,{params:{startDate:r.toISOString(),endDate:a.toISOString()}});return n}async getSymptomps({programId:t,startDate:r,endDate:a}){const{data:n}=await this.fetch.get(`/pro-dashboard/projects/${t}/reports/symptoms`,{params:{startDate:r.toISOString(),endDate:a.toISOString()}});return n}async logout(){return this.fetch.post("auth/logout")}}const Xr=(e,[t])=>u.exports.useMemo(()=>new Yr(e.apiEndpoint,{accessToken:t.accessToken,refreshToken:t.refreshToken}),[e.apiEndpoint,t.accessToken,t.refreshToken]),Mt=u.exports.createContext(null),z=()=>u.exports.useContext(Mt);function Kr({breadcrumbs:e,title:t,sections:r}){const a=Ke();return h("div",{className:S("h-44 flex-shrink-0 bg-gradient-to-r","to-gray-800 from-secondary-900 flex flex-row"),children:[h("div",{className:"flex flex-col p-4 justify-center items-center",children:[s($r,{className:"w-14 h-14 flex-shrink-0"}),s("span",{className:"text-primary-400 text-xl inline-flex",children:"VHPRO"})]}),h("div",{className:"flex flex-1 flex-col justify-center items-center",children:[s("div",{className:"flex whitespace-nowrap space-x-8 flex-1",children:e==null?void 0:e.map(({href:n,label:o,Icon:i})=>h(Nt,{to:n,className:S("text-gray-400 flex flex-1 items-end","hover:text-white"),children:[s(i,{className:"w-6 mr-2"})," ",o]},o))}),s("div",{className:S("justify-center items-center flex flex-1 text-4xl","text-gray-300 whitespace-nowrap p-2"),children:t}),s("div",{className:"flex justify-center text-secondary-200/50 h-11",children:r==null?void 0:r.map(({label:n,link:o,Icon:i})=>h(xr,{to:o,activeClassName:"text-primary-500 font-normal border-primary-500",className:S("hover:text-gray-300","px-5","border-transparent","border-b-4","flex-inline","whitespace-nowrap","py-2","flex"),children:[i&&s(i,{className:"w-6 mr-2"}),s("span",{children:n})]},n))})]}),h("div",{className:"flex flex-row items-start p-4",children:[s("button",{onClick:()=>a.signOut(),children:" sign out"}),h("button",{type:"button",className:"bg-gray-800 rounded-full text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[s("span",{className:"sr-only",children:"View notifications"}),s(Gr,{className:"h-6 w-6","aria-hidden":"true"})]}),s(Jr,{className:"w-6 h-6 text-gray-400 ml-3"})]})]})}const{fromEntries:et,keys:je}=Object;function Zr(e,t,r){if(!!r)for(const a of r){const n=a(e,t);if(n)return n}}function Lt(e,t){const r=u.exports.useRef(),a=e(r.current);return u.exports.useEffect(()=>{r.current=a}),a}function ea(e,t){const r=u.exports.useRef(e),a=Lt(b=>{const y=et(je(r.current).map(E=>[E,t[E].defaultValue]));return b&&JSON.stringify(y)===JSON.stringify(b)?b:y}),[n,o]=u.exports.useState({}),i=u.exports.useRef(n);i.current=n;const l=u.exports.useMemo(()=>R(R({},a),n),[a,n]),d=u.exports.useMemo(()=>et(je(e).map(b=>[b,Zr(l[b],l,t[b].validators)])),[t,e,l]),f=u.exports.useMemo(()=>Object.values(d).some(b=>!!b),[d]),c=Lt(b=>et(je(r.current).map(y=>{const E=t[y],T=l[y],O=d[y],N=b==null?void 0:b[y];return N&&JSON.stringify([N.config,N.value,b.errorMessage])===JSON.stringify([E,T,O])?[y,N]:[y,{config:t[y],value:l[y],errorMessage:d[y],hasError:!!d[y],setValue:C=>{const I=M(R({},i.current),{[y]:C});C===E.defaultValue&&delete I[y],o(I)}}]}))),m=u.exports.useCallback(()=>{o({})},[]),[g,p]=u.exports.useState(!1),v=u.exports.useCallback(b=>async()=>{p(!0),await b(l),p(!1)},[l]),w=u.exports.useCallback(b=>async()=>{p(!0),await b(n),p(!1)},[n]),x=u.exports.useMemo(()=>!!je(n).length,[n]),_=u.exports.useCallback(b=>{o(R(R({},n),b))},[n]);return{fields:c,values:l,hasError:f,reset:m,isModified:x,onSubmit:v,setFormValues:_,isLoading:g,onPatchSubmit:w}}function Pt(){return null}const ta=e=>{const t=u.exports.useRef(!0);return u.exports.useEffect(()=>(t.current=!0,e==null||e(),()=>{t.current=!1}),[]),t},tt="token",rt="refresh_token";function jt(){return{accessToken:localStorage.getItem(tt),refreshToken:localStorage.getItem(rt)}}function ra(){const[e,t]=u.exports.useState(()=>jt()),{accessToken:r,refreshToken:a}=e,n=u.exports.useCallback(o=>{t(o);const{accessToken:i,refreshToken:l}=o;i?localStorage.setItem(tt,i):localStorage.removeItem(tt),l?localStorage.setItem(rt,l):localStorage.removeItem(rt)},[]);return u.exports.useEffect(()=>{const o=()=>{const i=jt();i.accessToken===r&&i.refreshToken===a||t(i)};return window.addEventListener("storage",o),()=>window.removeEventListener("storage",o)},[r,a]),[e,n]}function aa({organisationId:e}){const t=z(),n=J(["organisation",e],async()=>(await t.getOrganisation(e)).data),{data:r}=n,a=ve(n,["data"]);return M(R({},a),{organisation:r||null})}function na({page:e,perPage:t}){const r=z(),o=J([e,t],()=>r.getOrganisations({page:e,perPage:t})),{data:a}=o,n=ve(o,["data"]);return M(R({},n),{organisations:(a==null?void 0:a.organisations)||[],totalCount:(a==null?void 0:a.totalCount)||0})}function ae({programId:e}){const t=z(),n=J([e],async()=>(await t.getProgram(e)).data),{data:r}=n,a=ve(n,["data"]);return M(R({},a),{program:r})}function sa({organisationId:e}){const t=z(),{data:r}=J(["programs",e],()=>t.getPrograms({organisationId:e}));return{programs:(r==null?void 0:r.programs)||[],totalCount:(r==null?void 0:r.totalCount)||0}}function Ut({programId:e,page:t,perPage:r,term:a},{keepPreviousData:n}){const o=z(),d=J([e,"patients",t,r,a],()=>o.getPatients({programId:e,perPage:r,page:t,term:a}),{keepPreviousData:n}),{data:i}=d,l=ve(d,["data"]);return M(R({},l),{patients:(i==null?void 0:i.patients)||[],totalCount:(i==null?void 0:i.totalCount)||0})}function oa({programId:e,patientId:t}){const r=z(),{data:a}=J([e,t],async()=>(await r.getPatient({participantId:t,programId:e})).data);return{patient:a}}function ia({programId:e,rangeEndDate:t,rangeStartDate:r}){const a=z(),{data:n}=J([e,"medications",r==null?void 0:r.valueOf(),t==null?void 0:t.valueOf()],async()=>{if(!(!r||!t))return a.getMedications({programId:e,startDate:r,endDate:t})});return{medications:n}}const la=({page:e,rowsPerPage:t,totalCount:r,setPage:a,setRowsPerPage:n})=>{const o=u.exports.useCallback(i=>{a(1),n(i)},[a,n]);return s(ge.Footer,{children:h("div",{className:"flex flex-col px-4 py-2 bg-gray-50",children:[h("span",{className:"text-sm text-gray-700 flex-shrink-0 mb-2",children:["Showing"," ",s("span",{className:"font-medium",children:(e-1)*t+1})," to"," ",s("span",{className:"font-medium",children:Math.min(e*t,r)})," ","of ",s("span",{className:"font-medium",children:r})," results"]}),h("div",{className:"flex flex-row justify-items-stretch",children:[s(or,{items:[{id:"5",label:"5 rows",value:5},{id:"10",label:"10 rows",value:10},{id:"25",label:"25 rows",value:25},{id:"50",label:"50 rows",value:50},{id:"100",label:"100 rows",value:100}],selected:`${t}`,onChange:({value:i})=>o(i)}),s("div",{className:"flex flex-1 justify-end",children:s(Vt,{showActivePageOnly:!0,pagesCount:Math.ceil(r/t),currentPage:e,onPageChange:a})})]})]})})},ne=({programId:e,program:t,children:r,selectedParticipantId:a})=>{const n=`/programs/${e}`,o=ke(),[i,l]=u.exports.useState(""),d=u.exports.useMemo(()=>[{label:"Patient enrolment",link:`${n}/enrolment`,Icon:yr},{label:"Reports",link:`${n}/reports`,Icon:br},{label:"Questionnaires",link:`${n}/questionnaires`,Icon:Er},{label:"Team",link:`${n}/team`,Icon:_r},{label:"Settings",link:`${n}/settings`,Icon:Nr}],[n]),[f,c]=u.exports.useState(1),[m,g]=u.exports.useState(25),{patients:p,totalCount:v}=Ut({programId:e,perPage:m,term:i,page:f},{keepPreviousData:!0}),w=u.exports.useCallback(()=>({id:y})=>o.push(`/programs/${e}/participants/${y}`),[o,e]),x=u.exports.useMemo(()=>[{label:"Patient Name",RowCell:({firstName:y,lastName:E,severeSymptomsCount:T,id:O,email:N})=>h("div",{className:"relative group px-6 py-4 whitespace-nowrap flex-1 flex flex-col",children:[a===O&&s("div",{className:"absolute h-full w-1 bg-primary-500 left-0 top-0"}),s("div",{children:s(He,{text:`${y} ${E}`,term:i})}),s("div",{className:"text-gray-400 text-sm",children:s(He,{text:N,term:i})}),!!T&&s("div",{className:"absolute h-full right-0 top-0 flex items-center pr-4",children:s("div",{className:"bg-red-400 rounded-full px-2 py-1 text-sm flex items-center h-fit w-fit",children:h("div",{className:"flex whitespace-nowrap space-x-1",children:[s(qr,{className:"w-4"}),s("span",{children:T}),s("span",{className:"hidden group-hover:block",children:"SEVERE SYMPTOMPS"})]})})})]})}],[i,a]),_=u.exports.useCallback(({id:y})=>y,[]),b=u.exports.useMemo(()=>[{Icon:Ot,href:"/organisaitons",label:"Organisations"},{Icon:Or,href:`/organisations/${t==null?void 0:t.organisation.organisationId}`,label:`${t==null?void 0:t.organisation.name} organisation`}],[t==null?void 0:t.organisation.name,t==null?void 0:t.organisation.organisationId]);return s(Me,{navigation:!0,title:h("div",{className:"flex flex-col justify-center items-center",children:[`${t==null?void 0:t.name} program`,s("div",{className:"text-sm text-gray-400",children:t==null?void 0:t.description})]}),sections:d,breadcrumbs:b,children:h("div",{className:"flex flex-row flex-1 h-full overflow-hidden",children:[s("div",{className:S("flex flex-col w-96 border-r","border-slate-30 shrink-0 border-secondary-200"),children:h("div",{className:"flex flex-col overflow-hidden h-full",children:[h("div",{className:S("h-16 justify-center items-center","flex text-secondary-900/40 flex-shrink-0"),children:[s(Tr,{className:"w-6 mr-2"}),"PARTICIPANTS"]}),s("div",{className:"pb-4 px-4",children:h("div",{className:"relative rounded-md shadow-sm",children:[s("div",{className:S("absolute inset-y-0 left-0 pl-3","flex items-center pointer-events-none"),children:s(he,{className:"text-gray-500 w-5"})}),s("input",{type:"text",value:i,onChange:({currentTarget:y})=>{l(y.value)},placeholder:"search for participant",className:S("focus:ring-primary-500","focus:border-primary-500 block w-full pl-10 pr-12","border-gray-300 rounded-md")})]})}),s("div",{className:"px-4 overflow-hidden flex h-full",children:s(Ue,{selectedRowId:a,onRowClick:w,headers:x,data:p,getRowId:_,page:f,onPageChange:c,rowsPerPage:m,onRowsPerPageChange:g,totalRows:v,showHeader:!1,footer:s(la,{page:f,rowsPerPage:m,setPage:c,setRowsPerPage:g,totalCount:v})})})]})}),s("div",{className:"flex flex-col flex-1  w-full h-full overflow-hidden",children:r})]})})},ca=({children:e})=>s("div",{children:e}),ge=({children:e,roundedBottom:t=!0})=>s("div",{className:S("rounded-t-lg bg-white flex flex-1 flex-col","shadow border-slate-300 border overflow-hidden",{"rounded-b-lg":t}),children:e});ge.Footer=ca;const at=({label:e,active:t,onClick:r})=>s("button",{onClick:r,className:S("bg-white","z-10","relative inline-flex items-center","px-4 py-2 border text-sm font-medium",{"bg-primary-300":t}),children:e}),Vt=({pagesCount:e,currentPage:t,onPageChange:r,showActivePageOnly:a})=>{const n=7,o=u.exports.useMemo(()=>{if(a)return s(at,{label:t});if(e<=n)return Array.from({length:e}).map((f,c)=>s(at,{label:c+1,active:e!==1&&t===c+1,onClick:()=>r(c+1)},c));const i=t-Math.floor(n/2),l=i<=1?1:i+7>=e?e-n+1:i,d=Array.from({length:n}).map((f,c)=>c+l);return d[0]=1,d[1]=d[1]!==2?"...":d[1],d[d.length-1]=e,d[d.length-2]=d[d.length-2]!==e-1?"...":d[d.length-2],d.map((f,c)=>s(at,{label:f,active:f===t,onClick:()=>{typeof f=="number"&&r(f)}},`${f}_${c}`))},[t,r,e,a]);return s("div",{children:h("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[s("button",{disabled:t===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",onClick:()=>r(t-1),children:s(Tt,{className:"h-5 w-5","aria-hidden":"true"})}),o,s("button",{disabled:t===e,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",onClick:()=>r(t+1),children:s(Sr,{className:"h-5 w-5","aria-hidden":"true"})})]})})},Ue=({headers:e,data:t,selectedRowId:r,page:a,rowsPerPage:n,totalRows:o,getRowId:i,onRowClick:l,RowAction:d,onPageChange:f,onRowsPerPageChange:c,footer:m,showHeader:g})=>{const p=Math.ceil(o/n),v=u.exports.useCallback(w=>{f(1),c(w)},[f,c]);return h(ge,{roundedBottom:!1,children:[s(Le,{onRowClick:l,headers:e,data:t,getRowId:i,selectedRowId:r,RowAction:d,showHeader:g}),m||s(ge.Footer,{children:h("div",{className:"flex-1 flex items-center justify-between flex-wrap px-4 py-2 bg-gray-50",children:[s("div",{className:"flex flex-1 flex-shrink-0",children:h("span",{className:"text-sm text-gray-700 flex-shrink-0",children:["Showing"," ",s("span",{className:"font-medium",children:(a-1)*n+1})," ","to"," ",s("span",{className:"font-medium",children:Math.min(a*n,o)})," ","of ",s("span",{className:"font-medium",children:o})," results"]})}),h("div",{className:"space-x-4 flex flex-shrink-0 flex-1 justify-end",children:[s(or,{items:[{id:"5",label:"5 rows",value:5},{id:"10",label:"10 rows",value:10},{id:"25",label:"25 rows",value:25},{id:"50",label:"50 rows",value:50},{id:"100",label:"100 rows",value:100}],selected:`${n}`,onChange:({value:w})=>v(w)}),s(Vt,{pagesCount:p,currentPage:a,onPageChange:f})]})]})})]})};var Wt=function(t){return t.reduce(function(r,a){var n=a[0],o=a[1];return r[n]=o,r},{})},$t=typeof window!="undefined"&&window.document&&window.document.createElement?u.exports.useLayoutEffect:u.exports.useEffect,L="top",U="bottom",V="right",P="left",nt="auto",we=[L,U,V,P],se="start",xe="end",da="clippingParents",Bt="viewport",ye="popper",ua="reference",Ft=we.reduce(function(e,t){return e.concat([t+"-"+se,t+"-"+xe])},[]),Ht=[].concat(we,[nt]).reduce(function(e,t){return e.concat([t,t+"-"+se,t+"-"+xe])},[]),fa="beforeRead",pa="read",va="afterRead",ha="beforeMain",ma="main",ga="afterMain",wa="beforeWrite",xa="write",ya="afterWrite",ba=[fa,pa,va,ha,ma,ga,wa,xa,ya];function F(e){return e?(e.nodeName||"").toLowerCase():null}function B(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function oe(e){var t=B(e).Element;return e instanceof t||e instanceof Element}function W(e){var t=B(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Gt(e){if(typeof ShadowRoot=="undefined")return!1;var t=B(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Ea(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var a=t.styles[r]||{},n=t.attributes[r]||{},o=t.elements[r];!W(o)||!F(o)||(Object.assign(o.style,a),Object.keys(n).forEach(function(i){var l=n[i];l===!1?o.removeAttribute(i):o.setAttribute(i,l===!0?"":l)}))})}function _a(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(a){var n=t.elements[a],o=t.attributes[a]||{},i=Object.keys(t.styles.hasOwnProperty(a)?t.styles[a]:r[a]),l=i.reduce(function(d,f){return d[f]="",d},{});!W(n)||!F(n)||(Object.assign(n.style,l),Object.keys(o).forEach(function(d){n.removeAttribute(d)}))})}}var Na={name:"applyStyles",enabled:!0,phase:"write",fn:Ea,effect:_a,requires:["computeStyles"]};function H(e){return e.split("-")[0]}var te=Math.max,Ve=Math.min,ie=Math.round;function le(e,t){t===void 0&&(t=!1);var r=e.getBoundingClientRect(),a=1,n=1;if(W(e)&&t){var o=e.offsetHeight,i=e.offsetWidth;i>0&&(a=ie(r.width)/i||1),o>0&&(n=ie(r.height)/o||1)}return{width:r.width/a,height:r.height/n,top:r.top/n,right:r.right/a,bottom:r.bottom/n,left:r.left/a,x:r.left/a,y:r.top/n}}function st(e){var t=le(e),r=e.offsetWidth,a=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:a}}function qt(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Gt(r)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function G(e){return B(e).getComputedStyle(e)}function Oa(e){return["table","td","th"].indexOf(F(e))>=0}function Q(e){return((oe(e)?e.ownerDocument:e.document)||window.document).documentElement}function We(e){return F(e)==="html"?e:e.assignedSlot||e.parentNode||(Gt(e)?e.host:null)||Q(e)}function Jt(e){return!W(e)||G(e).position==="fixed"?null:e.offsetParent}function Ta(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&W(e)){var a=G(e);if(a.position==="fixed")return null}for(var n=We(e);W(n)&&["html","body"].indexOf(F(n))<0;){var o=G(n);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return n;n=n.parentNode}return null}function be(e){for(var t=B(e),r=Jt(e);r&&Oa(r)&&G(r).position==="static";)r=Jt(r);return r&&(F(r)==="html"||F(r)==="body"&&G(r).position==="static")?t:r||Ta(e)||t}function ot(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ee(e,t,r){return te(e,Ve(t,r))}function Sa(e,t,r){var a=Ee(e,t,r);return a>r?r:a}function zt(){return{top:0,right:0,bottom:0,left:0}}function Qt(e){return Object.assign({},zt(),e)}function Yt(e,t){return t.reduce(function(r,a){return r[a]=e,r},{})}var Ra=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Qt(typeof t!="number"?t:Yt(t,we))};function Ca(e){var t,r=e.state,a=e.name,n=e.options,o=r.elements.arrow,i=r.modifiersData.popperOffsets,l=H(r.placement),d=ot(l),f=[P,V].indexOf(l)>=0,c=f?"height":"width";if(!(!o||!i)){var m=Ra(n.padding,r),g=st(o),p=d==="y"?L:P,v=d==="y"?U:V,w=r.rects.reference[c]+r.rects.reference[d]-i[d]-r.rects.popper[c],x=i[d]-r.rects.reference[d],_=be(o),b=_?d==="y"?_.clientHeight||0:_.clientWidth||0:0,y=w/2-x/2,E=m[p],T=b-g[c]-m[v],O=b/2-g[c]/2+y,N=Ee(E,O,T),C=d;r.modifiersData[a]=(t={},t[C]=N,t.centerOffset=N-O,t)}}function Ia(e){var t=e.state,r=e.options,a=r.element,n=a===void 0?"[data-popper-arrow]":a;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||!qt(t.elements.popper,n)||(t.elements.arrow=n))}var Aa={name:"arrow",enabled:!0,phase:"main",fn:Ca,effect:Ia,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ce(e){return e.split("-")[1]}var Da={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ka(e){var t=e.x,r=e.y,a=window,n=a.devicePixelRatio||1;return{x:ie(t*n)/n||0,y:ie(r*n)/n||0}}function Xt(e){var t,r=e.popper,a=e.popperRect,n=e.placement,o=e.variation,i=e.offsets,l=e.position,d=e.gpuAcceleration,f=e.adaptive,c=e.roundOffsets,m=e.isFixed,g=c===!0?ka(i):typeof c=="function"?c(i):i,p=g.x,v=p===void 0?0:p,w=g.y,x=w===void 0?0:w,_=i.hasOwnProperty("x"),b=i.hasOwnProperty("y"),y=P,E=L,T=window;if(f){var O=be(r),N="clientHeight",C="clientWidth";if(O===B(r)&&(O=Q(r),G(O).position!=="static"&&l==="absolute"&&(N="scrollHeight",C="scrollWidth")),O=O,n===L||(n===P||n===V)&&o===xe){E=U;var I=m&&T.visualViewport?T.visualViewport.height:O[N];x-=I-a.height,x*=d?1:-1}if(n===P||(n===L||n===U)&&o===xe){y=V;var A=m&&T.visualViewport?T.visualViewport.width:O[C];v-=A-a.width,v*=d?1:-1}}var D=Object.assign({position:l},f&&Da);if(d){var k;return Object.assign({},D,(k={},k[E]=b?"0":"",k[y]=_?"0":"",k.transform=(T.devicePixelRatio||1)<=1?"translate("+v+"px, "+x+"px)":"translate3d("+v+"px, "+x+"px, 0)",k))}return Object.assign({},D,(t={},t[E]=b?x+"px":"",t[y]=_?v+"px":"",t.transform="",t))}function Ma(e){var t=e.state,r=e.options,a=r.gpuAcceleration,n=a===void 0?!0:a,o=r.adaptive,i=o===void 0?!0:o,l=r.roundOffsets,d=l===void 0?!0:l,f={placement:H(t.placement),variation:ce(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Xt(Object.assign({},f,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:d})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Xt(Object.assign({},f,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var La={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ma,data:{}},$e={passive:!0};function Pa(e){var t=e.state,r=e.instance,a=e.options,n=a.scroll,o=n===void 0?!0:n,i=a.resize,l=i===void 0?!0:i,d=B(t.elements.popper),f=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&f.forEach(function(c){c.addEventListener("scroll",r.update,$e)}),l&&d.addEventListener("resize",r.update,$e),function(){o&&f.forEach(function(c){c.removeEventListener("scroll",r.update,$e)}),l&&d.removeEventListener("resize",r.update,$e)}}var ja={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Pa,data:{}},Ua={left:"right",right:"left",bottom:"top",top:"bottom"};function Be(e){return e.replace(/left|right|bottom|top/g,function(t){return Ua[t]})}var Va={start:"end",end:"start"};function Kt(e){return e.replace(/start|end/g,function(t){return Va[t]})}function it(e){var t=B(e),r=t.pageXOffset,a=t.pageYOffset;return{scrollLeft:r,scrollTop:a}}function lt(e){return le(Q(e)).left+it(e).scrollLeft}function Wa(e){var t=B(e),r=Q(e),a=t.visualViewport,n=r.clientWidth,o=r.clientHeight,i=0,l=0;return a&&(n=a.width,o=a.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=a.offsetLeft,l=a.offsetTop)),{width:n,height:o,x:i+lt(e),y:l}}function $a(e){var t,r=Q(e),a=it(e),n=(t=e.ownerDocument)==null?void 0:t.body,o=te(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),i=te(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),l=-a.scrollLeft+lt(e),d=-a.scrollTop;return G(n||r).direction==="rtl"&&(l+=te(r.clientWidth,n?n.clientWidth:0)-o),{width:o,height:i,x:l,y:d}}function ct(e){var t=G(e),r=t.overflow,a=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+a)}function Zt(e){return["html","body","#document"].indexOf(F(e))>=0?e.ownerDocument.body:W(e)&&ct(e)?e:Zt(We(e))}function _e(e,t){var r;t===void 0&&(t=[]);var a=Zt(e),n=a===((r=e.ownerDocument)==null?void 0:r.body),o=B(a),i=n?[o].concat(o.visualViewport||[],ct(a)?a:[]):a,l=t.concat(i);return n?l:l.concat(_e(We(i)))}function dt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ba(e){var t=le(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function er(e,t){return t===Bt?dt(Wa(e)):oe(t)?Ba(t):dt($a(Q(e)))}function Fa(e){var t=_e(We(e)),r=["absolute","fixed"].indexOf(G(e).position)>=0,a=r&&W(e)?be(e):e;return oe(a)?t.filter(function(n){return oe(n)&&qt(n,a)&&F(n)!=="body"&&(r?G(n).position!=="static":!0)}):[]}function Ha(e,t,r){var a=t==="clippingParents"?Fa(e):[].concat(t),n=[].concat(a,[r]),o=n[0],i=n.reduce(function(l,d){var f=er(e,d);return l.top=te(f.top,l.top),l.right=Ve(f.right,l.right),l.bottom=Ve(f.bottom,l.bottom),l.left=te(f.left,l.left),l},er(e,o));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function tr(e){var t=e.reference,r=e.element,a=e.placement,n=a?H(a):null,o=a?ce(a):null,i=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,d;switch(n){case L:d={x:i,y:t.y-r.height};break;case U:d={x:i,y:t.y+t.height};break;case V:d={x:t.x+t.width,y:l};break;case P:d={x:t.x-r.width,y:l};break;default:d={x:t.x,y:t.y}}var f=n?ot(n):null;if(f!=null){var c=f==="y"?"height":"width";switch(o){case se:d[f]=d[f]-(t[c]/2-r[c]/2);break;case xe:d[f]=d[f]+(t[c]/2-r[c]/2);break}}return d}function Ne(e,t){t===void 0&&(t={});var r=t,a=r.placement,n=a===void 0?e.placement:a,o=r.boundary,i=o===void 0?da:o,l=r.rootBoundary,d=l===void 0?Bt:l,f=r.elementContext,c=f===void 0?ye:f,m=r.altBoundary,g=m===void 0?!1:m,p=r.padding,v=p===void 0?0:p,w=Qt(typeof v!="number"?v:Yt(v,we)),x=c===ye?ua:ye,_=e.rects.popper,b=e.elements[g?x:c],y=Ha(oe(b)?b:b.contextElement||Q(e.elements.popper),i,d),E=le(e.elements.reference),T=tr({reference:E,element:_,strategy:"absolute",placement:n}),O=dt(Object.assign({},_,T)),N=c===ye?O:E,C={top:y.top-N.top+w.top,bottom:N.bottom-y.bottom+w.bottom,left:y.left-N.left+w.left,right:N.right-y.right+w.right},I=e.modifiersData.offset;if(c===ye&&I){var A=I[n];Object.keys(C).forEach(function(D){var k=[V,U].indexOf(D)>=0?1:-1,Y=[L,U].indexOf(D)>=0?"y":"x";C[D]+=A[Y]*k})}return C}function Ga(e,t){t===void 0&&(t={});var r=t,a=r.placement,n=r.boundary,o=r.rootBoundary,i=r.padding,l=r.flipVariations,d=r.allowedAutoPlacements,f=d===void 0?Ht:d,c=ce(a),m=c?l?Ft:Ft.filter(function(v){return ce(v)===c}):we,g=m.filter(function(v){return f.indexOf(v)>=0});g.length===0&&(g=m);var p=g.reduce(function(v,w){return v[w]=Ne(e,{placement:w,boundary:n,rootBoundary:o,padding:i})[H(w)],v},{});return Object.keys(p).sort(function(v,w){return p[v]-p[w]})}function qa(e){if(H(e)===nt)return[];var t=Be(e);return[Kt(e),t,Kt(t)]}function Ja(e){var t=e.state,r=e.options,a=e.name;if(!t.modifiersData[a]._skip){for(var n=r.mainAxis,o=n===void 0?!0:n,i=r.altAxis,l=i===void 0?!0:i,d=r.fallbackPlacements,f=r.padding,c=r.boundary,m=r.rootBoundary,g=r.altBoundary,p=r.flipVariations,v=p===void 0?!0:p,w=r.allowedAutoPlacements,x=t.options.placement,_=H(x),b=_===x,y=d||(b||!v?[Be(x)]:qa(x)),E=[x].concat(y).reduce(function(re,q){return re.concat(H(q)===nt?Ga(t,{placement:q,boundary:c,rootBoundary:m,padding:f,flipVariations:v,allowedAutoPlacements:w}):q)},[]),T=t.rects.reference,O=t.rects.popper,N=new Map,C=!0,I=E[0],A=0;A<E.length;A++){var D=E[A],k=H(D),Y=ce(D)===se,de=[L,U].indexOf(k)>=0,ue=de?"width":"height",j=Ne(t,{placement:D,boundary:c,rootBoundary:m,altBoundary:g,padding:f}),$=de?Y?V:P:Y?U:L;T[ue]>O[ue]&&($=Be($));var Te=Be($),X=[];if(o&&X.push(j[k]<=0),l&&X.push(j[$]<=0,j[Te]<=0),X.every(function(re){return re})){I=D,C=!1;break}N.set(D,X)}if(C)for(var Se=v?3:1,Ge=function(q){var pe=E.find(function(Ce){var K=N.get(Ce);if(K)return K.slice(0,q).every(function(qe){return qe})});if(pe)return I=pe,"break"},fe=Se;fe>0;fe--){var Re=Ge(fe);if(Re==="break")break}t.placement!==I&&(t.modifiersData[a]._skip=!0,t.placement=I,t.reset=!0)}}var za={name:"flip",enabled:!0,phase:"main",fn:Ja,requiresIfExists:["offset"],data:{_skip:!1}};function rr(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function ar(e){return[L,V,U,P].some(function(t){return e[t]>=0})}function Qa(e){var t=e.state,r=e.name,a=t.rects.reference,n=t.rects.popper,o=t.modifiersData.preventOverflow,i=Ne(t,{elementContext:"reference"}),l=Ne(t,{altBoundary:!0}),d=rr(i,a),f=rr(l,n,o),c=ar(d),m=ar(f);t.modifiersData[r]={referenceClippingOffsets:d,popperEscapeOffsets:f,isReferenceHidden:c,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":m})}var Ya={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Qa};function Xa(e,t,r){var a=H(e),n=[P,L].indexOf(a)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,i=o[0],l=o[1];return i=i||0,l=(l||0)*n,[P,V].indexOf(a)>=0?{x:l,y:i}:{x:i,y:l}}function Ka(e){var t=e.state,r=e.options,a=e.name,n=r.offset,o=n===void 0?[0,0]:n,i=Ht.reduce(function(c,m){return c[m]=Xa(m,t.rects,o),c},{}),l=i[t.placement],d=l.x,f=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=f),t.modifiersData[a]=i}var Za={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ka};function en(e){var t=e.state,r=e.name;t.modifiersData[r]=tr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var tn={name:"popperOffsets",enabled:!0,phase:"read",fn:en,data:{}};function rn(e){return e==="x"?"y":"x"}function an(e){var t=e.state,r=e.options,a=e.name,n=r.mainAxis,o=n===void 0?!0:n,i=r.altAxis,l=i===void 0?!1:i,d=r.boundary,f=r.rootBoundary,c=r.altBoundary,m=r.padding,g=r.tether,p=g===void 0?!0:g,v=r.tetherOffset,w=v===void 0?0:v,x=Ne(t,{boundary:d,rootBoundary:f,padding:m,altBoundary:c}),_=H(t.placement),b=ce(t.placement),y=!b,E=ot(_),T=rn(E),O=t.modifiersData.popperOffsets,N=t.rects.reference,C=t.rects.popper,I=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,A=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,k={x:0,y:0};if(!!O){if(o){var Y,de=E==="y"?L:P,ue=E==="y"?U:V,j=E==="y"?"height":"width",$=O[E],Te=$+x[de],X=$-x[ue],Se=p?-C[j]/2:0,Ge=b===se?N[j]:C[j],fe=b===se?-C[j]:-N[j],Re=t.elements.arrow,re=p&&Re?st(Re):{width:0,height:0},q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:zt(),pe=q[de],Ce=q[ue],K=Ee(0,N[j],re[j]),qe=y?N[j]/2-Se-K-pe-A.mainAxis:Ge-K-pe-A.mainAxis,lr=y?-N[j]/2+Se+K+Ce+A.mainAxis:fe+K+Ce+A.mainAxis,Je=t.elements.arrow&&be(t.elements.arrow),cr=Je?E==="y"?Je.clientTop||0:Je.clientLeft||0:0,ft=(Y=D==null?void 0:D[E])!=null?Y:0,dr=$+qe-ft-cr,ur=$+lr-ft,pt=Ee(p?Ve(Te,dr):Te,$,p?te(X,ur):X);O[E]=pt,k[E]=pt-$}if(l){var vt,fr=E==="x"?L:P,pr=E==="x"?U:V,Z=O[T],Ie=T==="y"?"height":"width",ht=Z+x[fr],mt=Z-x[pr],ze=[L,P].indexOf(_)!==-1,gt=(vt=D==null?void 0:D[T])!=null?vt:0,wt=ze?ht:Z-N[Ie]-C[Ie]-gt+A.altAxis,xt=ze?Z+N[Ie]+C[Ie]-gt-A.altAxis:mt,yt=p&&ze?Sa(wt,Z,xt):Ee(p?wt:ht,Z,p?xt:mt);O[T]=yt,k[T]=yt-Z}t.modifiersData[a]=k}}var nn={name:"preventOverflow",enabled:!0,phase:"main",fn:an,requiresIfExists:["offset"]};function sn(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function on(e){return e===B(e)||!W(e)?it(e):sn(e)}function ln(e){var t=e.getBoundingClientRect(),r=ie(t.width)/e.offsetWidth||1,a=ie(t.height)/e.offsetHeight||1;return r!==1||a!==1}function cn(e,t,r){r===void 0&&(r=!1);var a=W(t),n=W(t)&&ln(t),o=Q(t),i=le(e,n),l={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(a||!a&&!r)&&((F(t)!=="body"||ct(o))&&(l=on(t)),W(t)?(d=le(t,!0),d.x+=t.clientLeft,d.y+=t.clientTop):o&&(d.x=lt(o))),{x:i.left+l.scrollLeft-d.x,y:i.top+l.scrollTop-d.y,width:i.width,height:i.height}}function dn(e){var t=new Map,r=new Set,a=[];e.forEach(function(o){t.set(o.name,o)});function n(o){r.add(o.name);var i=[].concat(o.requires||[],o.requiresIfExists||[]);i.forEach(function(l){if(!r.has(l)){var d=t.get(l);d&&n(d)}}),a.push(o)}return e.forEach(function(o){r.has(o.name)||n(o)}),a}function un(e){var t=dn(e);return ba.reduce(function(r,a){return r.concat(t.filter(function(n){return n.phase===a}))},[])}function fn(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function pn(e){var t=e.reduce(function(r,a){var n=r[a.name];return r[a.name]=n?Object.assign({},n,a,{options:Object.assign({},n.options,a.options),data:Object.assign({},n.data,a.data)}):a,r},{});return Object.keys(t).map(function(r){return t[r]})}var nr={placement:"bottom",modifiers:[],strategy:"absolute"};function sr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function vn(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,a=r===void 0?[]:r,n=t.defaultOptions,o=n===void 0?nr:n;return function(l,d,f){f===void 0&&(f=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},nr,o),modifiersData:{},elements:{reference:l,popper:d},attributes:{},styles:{}},m=[],g=!1,p={state:c,setOptions:function(_){var b=typeof _=="function"?_(c.options):_;w(),c.options=Object.assign({},o,c.options,b),c.scrollParents={reference:oe(l)?_e(l):l.contextElement?_e(l.contextElement):[],popper:_e(d)};var y=un(pn([].concat(a,c.options.modifiers)));return c.orderedModifiers=y.filter(function(E){return E.enabled}),v(),p.update()},forceUpdate:function(){if(!g){var _=c.elements,b=_.reference,y=_.popper;if(!!sr(b,y)){c.rects={reference:cn(b,be(y),c.options.strategy==="fixed"),popper:st(y)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(A){return c.modifiersData[A.name]=Object.assign({},A.data)});for(var E=0;E<c.orderedModifiers.length;E++){if(c.reset===!0){c.reset=!1,E=-1;continue}var T=c.orderedModifiers[E],O=T.fn,N=T.options,C=N===void 0?{}:N,I=T.name;typeof O=="function"&&(c=O({state:c,options:C,name:I,instance:p})||c)}}}},update:fn(function(){return new Promise(function(x){p.forceUpdate(),x(c)})}),destroy:function(){w(),g=!0}};if(!sr(l,d))return p;p.setOptions(f).then(function(x){!g&&f.onFirstUpdate&&f.onFirstUpdate(x)});function v(){c.orderedModifiers.forEach(function(x){var _=x.name,b=x.options,y=b===void 0?{}:b,E=x.effect;if(typeof E=="function"){var T=E({state:c,name:_,instance:p,options:y}),O=function(){};m.push(T||O)}})}function w(){m.forEach(function(x){return x()}),m=[]}return p}}var hn=[ja,tn,La,Na,Za,za,nn,Aa,Ya],mn=vn({defaultModifiers:hn}),gn=typeof Element!="undefined",wn=typeof Map=="function",xn=typeof Set=="function",yn=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Fe(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,a,n;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(a=r;a--!=0;)if(!Fe(e[a],t[a]))return!1;return!0}var o;if(wn&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(a=o.next()).done;)if(!t.has(a.value[0]))return!1;for(o=e.entries();!(a=o.next()).done;)if(!Fe(a.value[1],t.get(a.value[0])))return!1;return!0}if(xn&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(a=o.next()).done;)if(!t.has(a.value[0]))return!1;return!0}if(yn&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(a=r;a--!=0;)if(e[a]!==t[a])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(n=Object.keys(e),r=n.length,r!==Object.keys(t).length)return!1;for(a=r;a--!=0;)if(!Object.prototype.hasOwnProperty.call(t,n[a]))return!1;if(gn&&e instanceof Element)return!1;for(a=r;a--!=0;)if(!((n[a]==="_owner"||n[a]==="__v"||n[a]==="__o")&&e.$$typeof)&&!Fe(e[n[a]],t[n[a]]))return!1;return!0}return e!==e&&t!==t}var bn=function(t,r){try{return Fe(t,r)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}},En=[],_n=function(t,r,a){a===void 0&&(a={});var n=u.exports.useRef(null),o={onFirstUpdate:a.onFirstUpdate,placement:a.placement||"bottom",strategy:a.strategy||"absolute",modifiers:a.modifiers||En},i=u.exports.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),l=i[0],d=i[1],f=u.exports.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(p){var v=p.state,w=Object.keys(v.elements);d({styles:Wt(w.map(function(x){return[x,v.styles[x]||{}]})),attributes:Wt(w.map(function(x){return[x,v.attributes[x]]}))})},requires:["computeStyles"]}},[]),c=u.exports.useMemo(function(){var g={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[f,{name:"applyStyles",enabled:!1}])};return bn(n.current,g)?n.current||g:(n.current=g,g)},[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,f]),m=u.exports.useRef();return $t(function(){m.current&&m.current.setOptions(c)},[c]),$t(function(){if(!(t==null||r==null)){var g=a.createPopper||mn,p=g(t,r,c);return m.current=p,function(){p.destroy(),m.current=null}}},[t,r,a.createPopper]),{state:m.current?m.current.state:null,styles:l.styles,attributes:l.attributes,update:m.current?m.current.update:null,forceUpdate:m.current?m.current.forceUpdate:null}};function Nn(e,t){if(console.log(e,t),!e)return!1;let r=t;for(;r;){if(r===e)return!0;r=r.parentElement}return!1}const or=({selected:e,items:t,onChange:r})=>{const[a,n]=u.exports.useState(null),[o,i]=u.exports.useState(null),l=u.exports.useRef(o);l.current=o;const{styles:d,attributes:f}=_n(a,o),c=u.exports.useMemo(()=>t.find(({id:w})=>w===e)||t[0],[t,e]),[m,g]=u.exports.useState(!1),p=u.exports.useCallback(()=>{const w=({target:x})=>{const _=Nn(l.current,x);console.log(_),!_&&g(!1)};return document.addEventListener("mousedown",w),g(!0),()=>document.removeEventListener("mousedown",w)},[]),v=u.exports.useCallback(w=>{g(!1),r(w)},[r]);return h("div",{className:"relative",children:[s("div",{ref:n,className:"h-full",children:s(me,{onClick:p,children:h("div",{className:"flex-nowrap flex",children:[s("span",{className:"whitespace-nowrap",children:c.label})," ",s(Rr,{className:"ml-1 w-4"})]})})}),m&&s("div",M(R({ref:i,style:R({},d.popper)},f.popper),{children:s("div",{className:"whitespace-nowrap flex flex-col border rounded-md bg-white shadow-md m-2",children:t.map(w=>{const{id:x,label:_}=w;return s("button",{className:"p-4 hover:bg-gray-100",onClick:()=>v(w),children:s("span",{className:"whitespace-nowrap",children:_})},x)})})}))]})},He=({text:e,term:t})=>{if(!t)return s(De,{children:e});const r=e.toLowerCase().indexOf(t.toLowerCase());if(r===-1)return s(De,{children:e});const a=e.slice(0,r),n=e.slice(r,r+t.length),o=e.slice(r+t.length);return h(De,{children:[a,n&&s("span",{className:"bg-yellow-200",children:n}),o]})},On=({range:[e,t],onChange:r})=>h("div",{className:"flex items-center",children:[h("div",{className:"relative",children:[s("div",{className:S("flex absolute inset-y-0 left-0","items-center pl-3 pointer-events-none"),children:s(St,{className:"w-5 text-gray-400"})}),s("input",{onChange:a=>r([new Date(a.currentTarget.value),t]),name:"start",type:"date",value:(e==null?void 0:e.toISOString().slice(0,10))||"",className:S("bg-gray-50 border border-gray-300","text-gray-900 sm:text-sm rounded-l-lg block w-full pl-10 p-2.5"),placeholder:"Select date start"})]}),h("div",{className:"relative",children:[s("div",{className:S("flex absolute inset-y-0 left-0","items-center pl-3 pointer-events-none"),children:s("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:s(St,{className:"w-5 text-gray-400"})})}),s("input",{name:"end",type:"date",onChange:a=>r([e,new Date(a.currentTarget.value)]),value:(t==null?void 0:t.toISOString().slice(0,10))||"",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-r-lg block w-full pl-10 p-2.5",placeholder:"Select date end"})]})]});var Tn="/assets/logo.0bd15c82.svg";const Sn=({form:e,onSubmit:t,label:r="Submit"})=>{const[a,n]=u.exports.useState(!1),o=ta(),i=u.exports.useCallback(async()=>{n(!0),await t(e.values),o.current&&n(!1)},[e.values,o,t]);return s(me,{loading:a,disabled:a,label:r,onClick:i})},Rn=()=>{const{signIn:e}=Ke(),t=ea({email:Pt(),password:Pt()},{email:{type:"email",label:"Email",defaultValue:""},password:{type:"password",label:"Password",defaultValue:""}});return u.exports.useCallback(()=>{},[]),s(Me,{children:s("div",{className:"flex justify-center items-center h-full",children:h("div",{className:"w-96 space-y-4 flex flex-col items-center",children:[s("img",{src:Tn,alt:"logo",className:"w-24 h-24"}),s("span",{children:"VinehealthPRO"}),s(Rt,{field:t.fields.email}),s(Rt,{field:t.fields.password}),s("div",{className:"pt-4 flex w-full",children:s(Sn,{label:"Sign in",form:t,onSubmit:e})})]})})})};class Cn{constructor(t){this.config=t}get apiEndpoint(){return this.config.apiEndpoint}}const In=()=>{const e=ke(),[t,r]=u.exports.useState({rowsPerPage:25,page:1}),{page:a,rowsPerPage:n}=t,{organisations:o,totalCount:i}=na({page:a,perPage:n}),l=u.exports.useMemo(()=>[{label:"Organisation name",stickyColumn:!0,RowCell:({name:c})=>s("div",{className:"px-6 py-4 whitespace-nowrap",children:c})},{label:"created",RowCell:({dateCreated:c})=>s("div",{className:"px-6 py-4 whitespace-nowrap",children:c.toLocaleDateString()})},{label:"projects",RowCell:({projectsCount:c})=>s("div",{className:"px-6 py-4 whitespace-nowrap",children:c})},{label:"users",RowCell:({usersCount:c})=>s("div",{className:"px-6 py-4 whitespace-nowrap",children:c})}],[]),d=u.exports.useCallback(({organisationId:c})=>e.push(`/organisations/${c}`),[e]);return s(Me,{navigation:!0,title:"Organisations",children:h("div",{className:"flex flex-1 h-full overflow-hidden px-4 pt-4 flex-col",children:[h("div",{className:"mb-4 flex flex-row space-x-4  rounded-t-lg",children:[s("div",{className:"flex flex-col flex-1 w-full",children:h("div",{className:"relative rounded-md shadow-sm",children:[s("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s(he,{className:"text-gray-500 w-5"})}),s("input",{type:"text",value:"",onChange:({currentTarget:c})=>{},placeholder:"",className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12  border-gray-300 rounded-md"})]})}),s("div",{children:s(me,{label:"ADD ORGANISATION",intent:"primary",onClick:()=>{}})})]}),s(Ue,{page:a,data:o,rowsPerPage:n,totalRows:i,headers:l,onRowClick:d,getRowId:({organisationId:c})=>c,onPageChange:c=>r(M(R({},t),{page:c})),onRowsPerPageChange:c=>r(M(R({},t),{rowsPerPage:c}))})]})})},ir=({label:e})=>s("div",{children:s("div",{className:S("inline-flex py-1 px-2 text-sm rounded-full","h-fit m-1",{"bg-red-300":e==="EQ5D","bg-cyan-300":e==="FACTG","bg-violet-300":e==="QLQC30","bg-lime-300":e==="BN20"}),children:e})}),An=()=>{const{organisationId:e}=ee(),{organisation:t}=aa({organisationId:e}),{programs:r,totalCount:a}=sa({organisationId:e}),n=`/organisations/${e}`,o=ke(),i=u.exports.useCallback(({projectId:p})=>o.push(`/programs/${p}`),[o]),[l,d]=u.exports.useState(1),[f,c]=u.exports.useState(25),m=u.exports.useCallback(({projectId:p})=>p,[]),g=u.exports.useMemo(()=>[{label:"Project name",stickyColumn:!0,defaultWidth:300,RowCell:({name:p,imageThumbnailUrl:v})=>h("div",{className:"flex space-x-4 items-center px-6 py-4 whitespace-nowrap overflow-hidden",children:[s("div",{className:"w-14 h-14 border bg-slate-50 rounded-md shrink-0",style:{backgroundImage:`url(${v})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),s("div",{className:"text-ellipsis overflow-hidden",children:p})]})},{label:"Questionnaire types",defaultWidth:300,RowCell:({availableQuestionnaireTypes:p})=>s("div",{className:"flex flex-wrap h-full items-center p-2",children:p.map(v=>s(ir,{label:v},v))})},{label:"consented patients",RowCell:({consentedPatientsCount:p})=>s("div",{className:"px-6 py-4 whitespace-nowrap overflow-hidden text-ellipsis flex items-center",children:p})},{label:"created",defaultWidth:150,RowCell:({dateCreated:p})=>s("div",{className:"px-6 py-4 whitespace-nowrap overflow-hidden text-ellipsis flex items-center",children:p.toLocaleDateString()})},{label:"updated",defaultWidth:150,RowCell:({dateUpdated:p})=>s("div",{className:"px-6 py-4 whitespace-nowrap overflow-hidden text-ellipsis flex items-center",children:p.toLocaleDateString()})},{label:"end date",defaultWidth:150,RowCell:({endDate:p})=>s("div",{className:"px-6 py-4 whitespace-nowrap  overflow-hidden text-ellipsis flex items-center",children:p==null?void 0:p.toLocaleDateString()})},{label:"free text",defaultWidth:120,RowCell:({disableFreeText:p})=>s("div",{className:"px-6 py-4 whitespace-nowrap flex items-center",children:p&&s(Cr,{className:"w-6 text-green-500"})})},{label:"users",RowCell:({usersCount:p})=>s("div",{className:"px-6 py-4 whitespace-nowrap flex items-center",children:p})}],[]);return s(Me,{navigation:!0,title:`${t==null?void 0:t.name} organisation`,breadcrumbs:[{href:"/organisations",label:"Organisations",Icon:Ot}],sections:[{label:"Programs",link:`${n}/programs`},{label:"Settings",link:`${n}/settings`}],children:h("div",{className:"flex flex-1 h-full overflow-hidden px-4 pt-4 flex-col",children:[h("div",{className:"mb-4 flex flex-row space-x-4 rounded-t-lg",children:[s("div",{className:"flex flex-col flex-1 w-full",children:h("div",{className:"relative rounded-md shadow-sm",children:[s("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s(he,{className:"text-gray-500 w-5"})}),s("input",{type:"text",value:"",onChange:({currentTarget:p})=>{},placeholder:"",className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12  border-gray-300 rounded-md"})]})}),s("div",{children:s(me,{label:"ADD PROGRAM",intent:"primary",onClick:()=>{}})})]}),s(Ue,{page:l,rowsPerPage:f,totalRows:a,headers:g,data:r,getRowId:m,onPageChange:d,onRowsPerPageChange:c,onRowClick:i})]})})},Dn=Array.from({length:999}).map((e,t)=>({id:t,label:`${t} row`})),kn=()=>s("div",{className:"flex overflow-hidden flex-col h-full",children:s(Le,{data:Dn,getRowId:({id:e})=>`${e}`,headers:[{label:"",RowCell:({label:e})=>s("div",{children:e})}],showHeader:!1})}),Mn=()=>{const{programId:e,participantId:t}=ee(),{program:r}=ae({programId:e}),{patient:a}=oa({programId:e,patientId:t});return s(ne,{programId:e,program:r,selectedParticipantId:t,children:h("div",{className:"flex flex-col outline-hidden overflow-hidden w-ful h-full",children:[s("div",{className:"flex shrink-0",children:h("div",{className:"text-4xl flex flex-1 border-b border-gray-600",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]})}),h("div",{className:"flex flex-row w-full overflow-hidden h-full",children:[s("div",{className:"flex w-60 flex-col border-r border-gray-600 h-full overflow-hidden",children:s(kn,{})}),s("div",{className:"flex flex-1",children:"content"})]})]})})},Ln=()=>{const{programId:e}=ee(),{program:t}=ae({programId:e});return s(ne,{programId:e,program:t,children:"questionnaires"})};function Pn({programId:e,rangeEndDate:t,rangeStartDate:r}){const a=z(),{data:n}=J([e,"symptoms",t==null?void 0:t.valueOf(),r==null?void 0:r.valueOf()],async()=>{if(!(!t||!r))return a.getSymptomps({programId:e,startDate:t,endDate:r})});return{symptoms:n||[]}}const Oe=({children:e,title:t})=>s("div",{children:h(ge,{children:[s("div",{className:S("border-b border-gray-200","text-lg","p-4","sticky"),children:t}),e]})});function jn(e,t){const r=u.exports.useRef(t);r.current=t;const a=u.exports.useRef(!!e);u.exports.useEffect(()=>{a.current||!e||(a.current=!0,r.current())},[e])}const Un=()=>{const{programId:e}=ee(),{program:t}=ae({programId:e}),[r,a]=u.exports.useState([t==null?void 0:t.startDate,(t==null?void 0:t.endDate)||new Date]);jn(t,()=>a([t==null?void 0:t.startDate,(t==null?void 0:t.endDate)||new Date]));const{medications:n}=ia({programId:e,rangeStartDate:r[0],rangeEndDate:r[1]}),{symptoms:o}=Pn({programId:e,rangeEndDate:r[0],rangeStartDate:r[1]});return s(ne,{programId:e,program:t,children:h("div",{className:"overflow-hidden p-4 flex flex-col",children:[s("div",{className:"border-b border-gray-300 pb-4",children:s(On,{range:r,onChange:a})}),h("div",{className:S("pt-2","grid gap-4 grid-cols-2 auto overflow-y-auto"),style:{gridTemplateColumns:"repeat(auto-fit, minmax(520px, 1fr))"},children:[s(Oe,{title:"General",children:h("div",{className:"flex flex-col p-4",children:["Start date: ",t==null?void 0:t.startDate.toLocaleDateString(),t==null?void 0:t.availableQuestionnaireTypes.map(i=>s(ir,{label:i},i)),t==null?void 0:t.consentedPatientsCount," Consented patients"]})}),s(Oe,{title:"Temperature trends",children:s("div",{className:"p-4",children:"There have been no new temperature logs in the selected time frame"})}),h(Oe,{title:"Medication adherence",children:[s(Le,{data:n||[],headers:[{label:"Name",RowCell:({medicationName:i})=>s("div",{className:"p-4",children:i})},{label:"Adherence",RowCell:({adherence:i})=>h("div",{className:"p-4",children:[i,"%"]})},{label:"Skipped doses",RowCell:({eventsSkipped:i})=>h("div",{className:"p-4",children:[i," doses skipped"]})}],getRowId:({medicationName:i})=>i}),s("div",{className:"text-sm p-4 text-gray-400",children:"* adherence to all scheduled medications by all patients"})]}),s(Oe,{title:"Most logged symptoms",children:s(Le,{data:o,headers:[{label:"symptom",RowCell:({logType:i})=>s("div",{className:"p-4",children:i.name})},{label:"Logs",RowCell:({count:i})=>s("div",{children:i})},{label:"Grade 0",RowCell:({grades:i})=>s("div",{children:i["0"].count})},{label:"Grade 1",RowCell:({grades:i})=>s("div",{children:i["1"].count})},{label:"Grade 2",RowCell:({grades:i})=>s("div",{children:i["2"].count})},{label:"Grade 3",RowCell:({grades:i})=>{var l;return s("div",{children:(l=i["3"])==null?void 0:l.count})}},{label:"Grade 4",RowCell:({grades:i})=>{var l;return s("div",{children:(l=i["4"])==null?void 0:l.count})}}],getRowId:i=>(console.log(i),i.logType.identifier)})}),s(Oe,{title:"Symptoms Trends"})]})]})})},Vn=()=>{const{programId:e}=ee(),{program:t}=ae({programId:e});return s(ne,{programId:e,program:t,children:"team"})};var ut;(function(e){e.CONSENT_GIVEN="Consented",e.AWAITING_CONSENT="Invite sent"})(ut||(ut={}));const Wn=({consentGiven:e})=>s("div",{className:"text-sm mr-4 justify-end flex flex-1 flex-row items-center",children:h("div",{className:S("inline-flex","whitespace-nowrap","border rounded-md border-slate-300","h-fit"),children:[!e&&h("button",{onClick:()=>{},className:S("bg-gray-100 p-2 hover:bg-gray-200","rounded-l-md flex items-center"),children:[s(Ar,{className:"w-4 mr-1"}),"Resend invite"]}),s("button",{onClick:()=>{},className:S("p-2 bg-gray-100 hover:bg-gray-200",{"rounded-r-md":!0,"rounded-l-md":e,"border-l":!e}),children:s(_t,{className:"w-6"})})]})}),$n=()=>{const{programId:e}=ee(),t=ke(),[r,a]=u.exports.useState(1),[n,o]=u.exports.useState(25),[i,l]=u.exports.useState(""),{program:d}=ae({programId:e}),{patients:f,totalCount:c}=Ut({programId:e,perPage:n,term:i,page:r},{keepPreviousData:!0}),m=u.exports.useMemo(()=>[{label:"Patient Name",stickyColumn:!0,RowCell:({firstName:v,lastName:w})=>s("div",{className:S("px-6 py-4 whitespace-nowrap","text-ellipsis overflow-hidden"),children:s(He,{text:`${v} ${w}`,term:i})})},{label:"status",defaultWidth:150,RowCell:({consentStatus:v})=>s("div",{className:"px-6 py-4 whitespace-nowrap",children:s("div",{className:S("inline-flex rounded-full py-1 px-3 text-sm",{"bg-green-300":v==="CONSENT_GIVEN","bg-yellow-300":v==="AWAITING_CONSENT"}),children:ut[v]})})},{label:"email",defaultWidth:300,RowCell:({email:v})=>s("div",{className:S("text-gray-500 px-6 py-4","whitespace-nowrap overflow-hidden text-ellipsis"),children:s(He,{text:v,term:i})})}],[i]),g=u.exports.useCallback(({id:v})=>t.push(`/programs/${e}/participants/${v}`),[t,e]),p=u.exports.useCallback(({id:v})=>v,[]);return s(ne,{programId:e,program:d,children:h("div",{className:"flex flex-1 h-full overflow-hidden px-4 pt-4 flex-col",children:[h("div",{className:"flex flex-row space-x-4 rounded-t-lg mb-4",children:[s("div",{className:"p-2 text-secondary-900",children:s(Nt,{to:`/organisations/${d==null?void 0:d.organisation.organisationId}`,children:s(Tt,{className:"w-6"})})}),s("div",{className:"flex flex-col flex-1 w-full",children:h("div",{className:"relative rounded-md shadow-sm",children:[s("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s(he,{className:"text-gray-500 w-5"})}),s("input",{type:"text",value:i,onChange:({currentTarget:v})=>l(v.value),placeholder:"Search for patient",className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 pr-12  border-gray-300 rounded-md"})]})}),s("div",{children:h(me,{intent:"primary",onClick:()=>{},children:[s(Ir,{className:"w-6 mr-2"}),"INVITE NEW PATIENT"]})})]}),s(Ue,{onPageChange:a,page:r,rowsPerPage:n,totalRows:c,onRowsPerPageChange:o,onRowClick:g,headers:m,data:f,getRowId:p,RowAction:Wn})]})})},Bn=()=>{const{programId:e}=ee(),{program:t}=ae({programId:e});return s(ne,{programId:e,program:t,children:"settings"})},Fn=new Cn({apiEndpoint:"https://staging.api.vinehealth.ai/api/v1"}),Hn=e=>e.filter(Boolean).map(([r,a,n=!0])=>typeof a=="string"?s(Dr,{exact:n,path:r,to:a},r):s(kr,{exact:n,path:r,component:a},r)),Gn=u.exports.memo(()=>{const{isSigned:e}=Ke(),t=Hn([!e&&["/login",Rn],!e&&["/*","/login",!1],["/login","/"],["/","/organisations"],["/organisations/:organisationId","/organisations/:organisationId/programs"],["/organisations",In],["/organisations/:organisationId/programs",An],["/programs/:programId","/programs/:programId/enrolment"],["/programs/:programId/enrolment",$n],["/programs/:programId/reports",Un],["/programs/:programId/questionnaires",Ln],["/programs/:programId/team",Vn],["/programs/:programId/settings",Bn],["/programs/:programId/participants/:participantId",Mn],["*",()=>s("div",{children:"404"}),!1]]);return s(Mr,{children:s(Lr,{children:t})})}),qn=new Pr,Jn=u.exports.memo(()=>{const e=ra(),t=Xr(Fn,e),r=Qr(t,e),{loading:a}=r;return a?s("div",{children:"loading"}):(console.log("loading",a),s(It.Provider,{value:r,children:s(Mt.Provider,{value:t,children:s(jr,{client:qn,children:s(Gn,{})})})}))});Ur.render(s(Vr.StrictMode,{children:s(Jn,{})}),document.getElementById("root"));
